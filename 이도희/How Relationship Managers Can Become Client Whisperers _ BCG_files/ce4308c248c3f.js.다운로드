var CS_CONF={"isSMB":false,"projectId":2913,"status":1,"hostnames":["bcg.com","ceros.com","view.ceros.com","phenompro.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"5d[a-zA-Z0-9]+","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"customErrors":{"consoleMessageLogLevels":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aeu1.contentsquare.net","malkaRecordingDomain":"k-aeu1.contentsquare.net","staticResourceManagerDomain":"srm.ba.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"4045573184","heap_tag_status":"mapping_only"}};
;
(()=>{var re={};re.d=(s,r)=>{for(var t in r)re.o(r,t)&&!re.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};re.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();re.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);re.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var en={};re.r(en);re.d(en,{getRequestParameters:()=>rm});function Ge(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t||(t=s[r]),t}var li=typeof window=="undefined";function ah(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof re.g!="undefined"?re.g:typeof process!="undefined"?process:Function("return this")()}var bt=ah();var pa="cs-native-frame",Ae={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=Ge(window,"setTimeout");window.csQueueMicrotask=Ge(window,"queueMicrotask");window.csClearTimeout=Ge(window,"clearTimeout");window.csSetInterval=Ge(window,"setInterval");window.csClearInterval=Ge(window,"clearInterval");window.csFileReader=Ge(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function ch(){let s=document.createElement("iframe");s.id=pa,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function lh(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function hh(s,r,t){let e=lh(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function fa(s){var r,t;Object.keys(Ae.constructors).forEach(e=>{window[Ae.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),ph(s),("Prototype"in window||dh())&&(window.csMutationObserver=(t=(r=Ge(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),gs("csNode",Ae.nodeProperties,s.Node.prototype,"get"),gs("csElement",Ae.elementProperties,s.Element.prototype,"get"),gs("csElement",Ae.elementPropertiesValues,s.Element.prototype,"value",!1),gs("csHTMLImageElement",Ae.imageProperties,s.HTMLImageElement.prototype,"set"),gs("csEvent",Ae.eventProperties,s.Event.prototype,"get"),gs("csNavigator",Ae.navigatorProperties,s.navigator,"value")}function gs(s,r,t,e,i=!0){r.forEach(n=>{let a=typeof n!="string"&&"binding"in n,c=a?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=hh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function ga(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function uh(){try{let s=ch();return s?(window.CSPureWindow=s,fa(window.CSPureWindow),!0):!1}catch(s){return ga("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!uh())try{fa(bt)}catch(s){ga("Critical",`failed to copy references from window: ${s.message}`)}function dh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ph(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function jr(s){return ma(csString.prototype.toLowerCase.call(s.localName))}function fh(s){let r=s.getAttribute("id");return r&&ma(r)}function ma(s){return csString.prototype.replace.call(s,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function se(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function bs(s){return s===parseInt(s,10)}function $(s){return Z(s)&&(typeof s=="string"||s instanceof csString)}function Kn(s){return typeof s=="boolean"}function As(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function Nt(s){return Z(s)&&s!==null}function gh(s,r,t){return bs(s)&&s>=r&&s<=t}function mh(s){for(let r in s)return!1;return!0}function Be(s){return typeof s=="function"}function hi(s){return s instanceof Element}function Fe(s){return s instanceof Error}function yh(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function nt(s){return s.nodeType===1}function Bi(s){return s.nodeType===3}function Eh(s){return s.nodeType===8}function ya(s){return nt(s)&&s.localName==="link"}function Sh(s){return nt(s)&&s.localName==="source"}function Ea(s){return nt(s)&&s.localName==="a"}function Sa(s){return ya(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function vh(s){return nt(s)&&s.localName==="img"}function sn(s){return nt(s)&&s.localName==="style"}function Yi(s){return nt(s)&&s.localName==="input"}function rn(s){return nt(s)&&s.localName==="textarea"}function Xi(s){return nt(s)&&s.localName==="script"}function _h(s){return nt(s)&&s.localName==="button"}function Ps(s){return nt(s)&&"ownerSVGElement"in s}function nn(s){return nt(s)&&s.localName==="select"}function wh(s){return nt(s)&&s.localName==="details"}function bh(s){return nt(s)&&s.localName==="summary"}function Ah(s){return Ps(s)&&s.localName==="image"}function Th(s){return Ps(s)&&s.localName==="use"}function Rh(s){return Ps(s)&&s.localName==="feImage"}function Ch(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Ih(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Fi(s){return s.nodeType===9}function ri(s){return Ch(s)&&"host"in s&&"mode"in s}function va(s){return nt(s)&&!!csElementshadowRoot.apply(s)&&ri(csElementshadowRoot.apply(s))}var Ph=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Oh(s){return nt(s)&&Nt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Ph,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var ui="detached";function _a(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return $i(r)&&csArray.prototype.push.call(t,ui),{ancestors:t,selectionRoot:r}}function Nh(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Ea(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return $i(r)&&csArray.prototype.push.call(t,ui),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function $i(s){return ue.isValidElement(s)}var ss=(()=>{var s,r;return(r=(s=bt.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Xt=ss.matches||ss.matchesSelector||ss.mozMatchesSelector||ss.msMatchesSelector||ss.oMatchesSelector||ss.webkitMatchesSelector,Jn=ss.closest,wa=9;function Mh(s,r){return r?csArray.prototype.some.call(r,t=>Xt.call(s,t)):!1}function kh(s,r,t){if(s===ui||s.nodeType===wa)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=jr(r),a=0,c=r.previousElementSibling;for(;c;)(jr(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Mh(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;return a}function Dh(s,r,t){if(s===ui||s.nodeType===wa)return 0;let e=0,i=r.previousElementSibling;for(;i;)Xt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Lh=[/\d{4}/,/^ember\d+$/],xh="@",on="data-cs-override-id",Vh="data-cs-dynamic-id";function ba(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,a=jr(s);if(n&&n.test(s.localName)&&(a=csString.prototype.replace.call(a,n,`$1${xh}`)),Hh(s,t)){let y=an(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${on}="${y}"]`}}let c=Wh(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Uh(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let d=fh(s);if(Fh(s,d,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${d}`};let g=jh(s,e);if(g){let y=Dh(r,s,g);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${g}](${y})`}}let u=kh(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${u})`}}function Uh(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Xt.call(s,e)&&Gh(e,r))return e}}function jh(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Xt.call(s,t))return t}}function Hh(s,r){let t=an(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&cn(on,t,r)}function Bh(s){return an(s)!==null}function an(s){return s.getAttribute(on)}function Fh(s,r,t,e){return r&&!Bh(s)&&!$h(s,r,e)&&qh(r,t)}function $h(s,r,t){return s.hasAttribute(Vh)||zh(r,t)}function zh(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Lh,e=>e.test(s))||t)}function qh(s,r){return s&&cn("id",s,r)}function cn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Gh(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Wh(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&cn(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Hr=11;function zi(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Qn(e,t);let i=e,n=s[0],{elementSelector:a,hasUniqueIdentifier:c}=ba(i,n,r,t);if(!t.fullPath&&c){let d=s[s.length-1];return`${Qn(d,t)}${a}`}let l=zi(s,r,t);return`${l?`${l}>`:""}${a}`}function Qn(s,r){if(s===ui)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=_a(s.host);return`${zi(t,e,r)}|shadow-root|`}return s.nodeType===Hr?"|fragment|":""}var Aa=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Yh=(()=>{class s extends Aa{constructor(){super(...arguments),this.no=!1,this.oo=!1,this.Za=!1}jm(t,e){return this.no&&!(e===null&&$i(t))&&t.nodeType!==Hr&&!t.host}Hm(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.jm(t,e))return;let a=!1;e===null&&$i(t)&&(a=!0,this.done=!0);let c=this.oo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Za=!0,this.no=!1,this.oo=!1),!l&&e===null&&t.nodeType===Hr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.Hm(t))return;let d=e!=null?e:"detached",{elementSelector:g,hasUniqueIdentifier:u}=ba(t,d,i,this.options);u&&(this.oo=!0,this.no=!this.options.fullPath);let y=`${a?`|detached|${c}`:""}${this.no&&!u?"":g}`,v=!u&&this.oo&&!this.options.fullPath?"":this.path&&!this.Za?">":"";this.Za=!1,this.path=`${y}${v}${this.path}`}}return s})();function Yt(s,r=Mt.SHOW_ALL){let t=r|Mt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Zn(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(n){let d=n;return n=null,d}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Zn(c);if(r&Mt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(gr[c.nodeType]&r)!==0)return c}return null},visitAll(a){gr[s.nodeType]&r&&a(s);let c=this.nextNode();for(;c;){if((gr[c.nodeType]&r)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function Zn(s){return s&&va(s)?s.shadowRoot:null}var fr=(()=>{var s;return(s=bt.Node)!==null&&s!==void 0?s:{}})(),Mt=(()=>{var s;return(s=bt.NodeFilter)!==null&&s!==void 0?s:{}})(),gr={2:Mt.SHOW_ATTRIBUTE,4:Mt.SHOW_CDATA_SECTION,8:Mt.SHOW_COMMENT,11:Mt.SHOW_DOCUMENT_FRAGMENT,9:Mt.SHOW_DOCUMENT,10:Mt.SHOW_DOCUMENT_TYPE,1:Mt.SHOW_ELEMENT,[fr.ENTITY_NODE]:Mt.SHOW_ENTITY,[fr.ENTITY_REFERENCE_NODE]:Mt.SHOW_ENTITY_REFERENCE,[fr.NOTATION_NODE]:Mt.SHOW_NOTATION,7:Mt.SHOW_PROCESSING_INSTRUCTION,3:Mt.SHOW_TEXT},ct={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Xh(s){ct=s}var L=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return $e(n,a.bind(this))(...c)}}};function $e(s,r){return function(...t){try{let e=r.apply(this,t);return Z(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>ct.error(Fe(i)?i:new Error(i),s)):e}catch(e){try{ct.error(Fe(e)?e:new Error(e),s)}catch{}}}}var Os=(()=>{class s{constructor(){this.ao=0}get length(){return this.ao}get isEmpty(){return!this.Is}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ao++,this.Pr?this.Pr=this.Pr[1]=[t,void 0]:this.Pr=this.Is=[t,void 0]}pop(){if(!this.Is)return null;this.ao--;let t=this.Is[0];return this.Is=this.Is[1],this.Is||(this.Pr=void 0),t}forEach(t){let e=this.Is;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ao=0,this.Is=this.Pr=void 0}}return s})(),Ta=50,Ra=.1;function Kh(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let r="isPerformanceMeasureSupported",t=`${r}_a`;return performance.mark(t),performance.measure(r,t)!==void 0}var qi=!1,xi=new Os;function Jh(s=50,r=.1){qi=ct.isPerfLoggingActive()&&Kh(),qi&&(Ta=s,Ra=r)}var Br=[],mr=[];function Ca(s){csArray.prototype.push.call(Br,s),performance.mark(`${s}-start`)}function Ia(s){let r=performance.measure(s,`${s}-start`);if(!r)return;let t=r.duration;t>=Ra&&csArray.prototype.push.call(mr,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(Br),Br.length===0&&(t>Ta&&xi.push(mr),mr=[])}function cs(s,r){return function(...t){if(!qi)return s.apply(this,t);Ca(r);let e=s.apply(this,t);return Ia(r),e}}var kt=function(s){return function(r,t,e){let i=e.value;e.value=function(){if(!qi)return e.value=i,i.apply(this,arguments);Ca(s);let n=i.apply(this,arguments);return Ia(s),n}}};var os=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&va(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Yt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}r.getAllShadowHosts=cs(i,"getAllShadowHosts")}(s||(s={})),s})(),ft=(()=>{let s;return function(r){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function a(){let u=window.csScreen.width;return bs(u)&&u>0?u:window.screen.width}r.screenWidth=a;function c(){let u=window.csScreen.height;return bs(u)&&u>0?u:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function d(){return window.pageYOffset}r.windowOffsetY=d;function g(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}r.getRequestParameters=g}(s||(s={})),s})();function ni(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ue(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Qh(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let a=r(s[n]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Pa(s,r){let t=[];return Qh(s,r,e=>csArray.prototype.push.call(t,e)),t}function J(s,r){if(Zh(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Zh(s){return s.length>=0}function xe(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function tu(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Oa(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function eu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let a=0;a<s.length;a++)i[n++]=s[a];for(let a=0;a<r.length;a++)i[n++]=r[a];if(!t)return i;for(let a=0;a<t.length;a++)i[n++]=t[a];return i}function to(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Ns(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var yr=(()=>{var s;return(s=bt.Node)!==null&&s!==void 0?s:Object})(),ut=(()=>{let s;return function(r){let t="isConnected"in yr.prototype?S=>S.isConnected:S=>!S.ownerDocument||!(S.ownerDocument.compareDocumentPosition(S)&S.DOCUMENT_POSITION_DISCONNECTED);function e(S,P){for(let V=S;V;V=csNodenextSibling.apply(V))P(S)}r.forEachChild=e;function i(S){return t(S)}r.isConnected=i;function n(S,P){let V=[];for(let H of l(S,P))csArray.prototype.push.call(V,H);return V}r.getAncestors=n;let a=(S,P)=>{var V;return(V=csNodeparentNode.apply(S))!==null&&V!==void 0?V:P&&ri(S)?S.host:null};function c(S,P,V=!1){let H=S;for(;H;){if(P(H))return H;let tt=a(H,V);if(tt&&tt!==H)H=tt;else break}return null}r.findAncestor=c;function*l(S,P=!1){let V=S;for(;V;){yield V;let H=a(V,P);if(H&&H!==V)V=H;else break}}r.walkUp=l;function d(S,P){if(S===P||P.contains(S))return!0;let V=r.getParentElement(S);return V&&V!==S?d(V,P):!1}r.isDescendantOf=d;function g(S){var P;return S.parentElement?S.parentElement:r.getRootNode(S)?(P=r.getRootNode(S))===null||P===void 0?void 0:P.host:null}r.getParentElement=g;function u(S,P=document){let V=ni(window.csquerySelectorAll[P.nodeType].call(P,S)),H=os.getAllShadowHosts(P);for(let tt of H){let lt=os.getShadowRoot(tt);if(!lt)continue;let At=ni(window.csquerySelectorAll[lt.nodeType].call(lt,S));csArray.prototype.push.call(V,...At)}return V}r.findAllElements=u,r.getRootNode=(()=>{if("getRootNode"in yr.prototype)return(V,H)=>V.getRootNode(H);function S(V){let H=P(V);return ri(H)?S(H.host):H}function P(V){return csNodeparentNode.apply(V)!=null?P(csNodeparentNode.apply(V)):V}return(V,H)=>typeof H=="object"&&!!H.composed?S(V):P(V)})();function y(S){return S==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(S)}function E(S){let P=S.getBoundingClientRect();return P.right+ft.windowOffsetX()<0||P.bottom+ft.windowOffsetY()<0}function v(S){var P,V;if(((P=S.checkVisibility)===null||P===void 0?void 0:P.call(S,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!S.offsetParent){if(!S.getBoundingClientRect)return ct.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${S instanceof yr} Ctor: ${(V=S==null?void 0:S.constructor)===null||V===void 0?void 0:V.name}`),!1;let lt=S.getBoundingClientRect();if(lt.width==0&&lt.height==0)return!0}let H=window.getComputedStyle(S);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||y(H.color):!0}r.isHiddenByCSS=v;function T(S){if(v(S))return!0;let V=g(S);return V!=null&&T(V)}r.areAncestorsHiddenByCSS=T;function M(S){let P=null,V=S;do if(v(V))P=V;else break;while(V=g(V));return P}r.getTopAncestorHiddenByCSS=M;function R(S){let P=b(S);return P!==null&&!S.contains(P)&&!P.contains(S)}function b(S){let P=S.getBoundingClientRect(),V=P.left+.5*P.width,H=P.top+.5*P.height;return w(document,V,H)}r.getTopElement=b;function x(S){if(!S.getBoundingClientRect)return null;let P=S.getBoundingClientRect(),V=P.x+P.width/2,H=P.y+P.height/2;return r.getTopElementFromPoint(document,V,H)}r.getElementOnTop=x;function w(S,P,V){let H=S.elementFromPoint(P,V);if(!H)return null;let tt=os.getShadowRoot(H);return tt&&tt!=r.getRootNode(document.body)&&tt!==S?w(tt,P,V):H}r.getTopElementFromPoint=w;function k(S){return!E(S)&&!v(S)&&!R(S)}r.isVisibleInDocument=k;function U(S){return v(S)?!1:W(S)}r.isVisibleInViewportInForeground=U;function W(S){let P=b(S);return P===null?!1:S===P?!0:Et(S)?S.textContent!==""&&P.contains(S):S.contains(P)}r.isInViewPort=W;function ot(S,P,V){let H=S.getAttributeNS(P,V);return H===""?S.hasAttributeNS(P,V)?H:null:H}r.getAttributeNS=ot;function yt(S){return!!(S.hasAttribute("tabIndex")||S.getAttribute("contentEditable")==="true"||Ea(S)&&S.hasAttribute("href")||(nn(S)||rn(S)||Yi(S)||_h(S))&&!S.hasAttribute("disabled")||wh(S)||bh(S))}r.isElementFocusable=yt;function Et(S){return S.localName==="span"||S.localName==="a"||S.localName==="b"||S.localName==="i"||S.localName==="button"||S.localName==="input"||S.localName==="label"||S.localName==="cite"||S.localName==="small"||S.localName==="strong"||S.localName==="code"||S.localName==="abbr"||S.localName==="em"||S.localName==="dfn"||S.localName==="time"||S.localName==="output"||S.localName==="object"||S.localName==="sub"}r.isInlineElement=Et}(s||(s={})),s})(),su=(()=>{class s{constructor(t){this.Bm=t}run(t){let e=[...this.Bm],i=ut.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.Fm(e,a,c,n),this.$m(e),e.length===0)break;i.length===0&&a.host&&(i=ut.getAncestors(a.host,!1),n=i[i.length-1])}}Fm(t,e,i,n){for(let a of t)a.serializeElement(e,i,n)}$m(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),iu=(()=>{class s extends Aa{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.zm(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}zm(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.qm(t.id),t.classList&&(e+=this.Gm(csArray.from(t.classList))),t.attributes&&(e+=this.Wm(t)),e}qm(t){return t?`#${t};`:""}Gm(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Ym(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ps(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Yi(t)&&e==="value"}Xm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Km(t){let e={};for(let i of csArray.from(t.attributes))this.Ym(t,i.name)||(e[i.name]=i.value);return e}Wm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.Km(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.Xm(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),ue=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,d={fullPath:!1,dynamicIdRegex:null}){let g=a(c);if(g===document)return{path:"",hierarchy:""};if(!t(g))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let u=new Yh(d),y=new iu(l);return new su([u,y]).run(g),{path:u.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let d=a(c);if(d===document)return"";if(!t(d))return r.INVALID_ELEMENT;let{ancestors:g,selectionRoot:u}=_a(d);return zi(g,u,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let d=a(c);if(d===document)return{path:"",firstAnchorParent:null};if(!t(d))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:g,ancestors:u,selectionRoot:y}=Nh(d);return{path:zi(u,y,l),firstAnchorParent:g}}r.getElementPathAndFirstAnchorParent=n;function a(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||ue;var ru=Number.MAX_SAFE_INTEGER||9007199254740991;function eo(){}function ze(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function nu(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var ln=34164e6,Ts={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=ru){return Math.floor(Math.random()*s)}},Er=csSymbol("cachedJson");function ou(s){if(s[Er])return s[Er];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Rs(s[0]);for(let t=1;t<s.length;t++)r+=","+Rs(s[t]);return r+="]"}return s[Er]=csJSON.stringify(s)}var Rs=typeof window.Symbol!="undefined"?ou:csJSON.stringify;var it=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Na=["t.contentsquare.net","clicktale"],au=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Na,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,j.critical(t)}};window.addEventListener("error",au);var j=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Na,t)}static setStrategy(t){s.Vi=t}static computeIsActive(t){s.Le=Ts.boolean(t),s.Le?s.tc=Ts.boolean(10):s.tc=!1}static isLoggingActive(){return s.Le}static getStrategy(){return s.Vi}static debug(t,e=""){s.Le&&this.Vi.send(t,e,it.debug)}static warn(t,e=!0,i=""){var n;s.Le&&e&&this.Vi.send(t,i,it.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){s.Le&&this.Vi.send(t,e,it.implementation)}static error(t,e=""){var i;s.Le&&this.Vi.send(t,e,it.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.Vi.send(t,e,it.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(window.Promise)&&n instanceof window.Promise?n.then(a=>a,a=>s.error(Fe(a)?a:new Error(a),t)):n}catch(n){try{s.error(Fe(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.tc}}return s.Le=!1,s.tc=!1,s})();var cu=/^\d+\.\d+(?:\.\d+)?$/,lu=s=>{if(!cu.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},hu=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,uu=(s,r)=>hu(s,r)>=0,du=1,pu="f553e78fb58e051e51fe8074c4c6e73e",Fr=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),fu=(()=>{class s{constructor(t){var e,i,n,a,c,l,d;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||ln,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors={enabled:(i=t.apiErrorsEnabled)!==null&&i!==void 0?i:0,...t.apiErrors},this.customErrors={enabled:(n=t.customErrorsEnabled)!==null&&n!==void 0?n:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.sc(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.sc(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.sc(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((a=t.uxaDomain)===null||a===void 0?void 0:a.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(c=t.anonymizeDigits)!==null&&c!==void 0?c:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(l=t.recordTargetingRules)!==null&&l!==void 0?l:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(d=t.collectTargetText)!==null&&d!==void 0?d:Fr.Disabled}getTrackerUri(){return`${this.ls()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ls()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${pu}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ls()}://${this.malkaRecordingDomain}`}getLegacyQuotaUri(){return`${this.ls()}://${this.malkaQuotaServiceDomain}`}getLoggerUri(){return`${this.ls()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ls()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ls()}://${this.staticResourceManagerDomain}`}getQuotaUri(){return`${this.ls()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.ls()}://${this.paProxyDomainUri}`}ls(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===du}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,a]=i;this.Jm(n,a)}})}Jm(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="malkaQuotaServiceDomain"&&(this.malkaQuotaServiceDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e)}sc(t){return t?this.Qm(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}Qm(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,n]=e;return new csRegExp(`^${i}$`,n)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.Hu()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.Hu())return!0;let t=lu(this.getHeapVersion()||"");if(t&&t.major===4&&uu(t,{major:4,minor:23,patch:5}))return!0}return!1}Hu(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Fr.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),gu=(()=>{class s{constructor(t,e){this.co=t,this.Bu=e}init(){this.Fu=this.co!==this.co.top,this.$u=this.Bu.isWebView&&this.co===this.co.top,this.Bu.iframesTracking&&this.Fu||this.$u?this.zu=!1:this.zu=!0}isInIframeContext(){return this.Fu}isTopWindowTracker(){return this.zu}isInWebViewContext(){return this.$u}}return s})(),oi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Ma=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Cs=(()=>{class s extends Ma{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ic(t);let e=oi.toQuery(t);this.Zm(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Zm(t){let e=new window.Image(1,1);e.onload=eo,e.onerror=eo,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ic(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),mu=(()=>{class s{constructor(t,e){this.Ps=t,this.ty=e}init(){this.hs=new Cs(this.Ps.getLoggerUri()),this.hs.setRequestParametersProviders(this,this.ty)}send(t){this.lo=t,this.hs.send()}getRequestParameters(){return{a:this.lo.app,l:this.lo.level,m:this.lo.message,s:this.lo.stacktrace}}}return s})();function at(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var $r=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,at([L("Metric.aggregate")],s.prototype,"aggregate",null),s})(),xt=(()=>{class s extends $r{constructor(t,e=100){super(t),this.ey=e,this.Ce=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){$r.globalService&&(this.Ce&&window.csClearTimeout(this.Ce),this.Ce=window.csSetTimeout(()=>{this.aggregate(),this.Ce=null},this.ey))}}return s})();var rt={counters:{commandsFromIntegrations:new xt("commands-from-integrations"),commandsFromCSTC:new xt("commands-from-cstc"),commandsFromIframe:new xt("commands-from-iframe"),commandApplied:new xt("command-applied"),commandError:new xt("command-error"),commandMisuse:new xt("command-misuse"),CSTCSnippetUsed:new xt("cstc-snippet-used"),redactedPII:new xt("redacted-pii"),pageAnonymisation:new xt("page-anonymisation"),patchedNativeFunctions:new xt("patched-native-functions"),pureWindowState:new xt("pure-window-state"),sensitiveElements:new xt("sensitive-elements"),cspErrors:new xt("csp-errors"),networkRequests:new xt("network-requests")},setService(s){$r.setGlobalService(s)}},yu=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Eu=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Su="CS_ANONYMIZED_EMAIL",Sr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",vu=new csRegExp(`(ey${Sr}\\.ey${Sr}\\.${Sr})`,"g"),_u="CS_ANONYMIZED_JWT",wu=/[0-9]{4}/,bu=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Au="CS_ANONYMIZED_PII",Tu="\u2022",Ru=/\d/g,Cu=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Iu=/(?:\d{1,3}\.){3}\d{1,3}/,Pu=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Te=(()=>{let s;return function(r){function t(g){return csString.prototype.replace.call(g,yu,Su)}r.replaceEmail=t;function e(g){return csString.prototype.replace.call(g,vu,_u)}r.replaceJWT=e;function i(g,u){return csString.prototype.replace.call(g,bu,u)}r.replaceCreditCardNumber=i;function n(g){return csString.prototype.replace.call(g,Ru,Tu)}r.replaceDigits=n;function a(g){return Iu.test(g)||Pu.test(g)}r.mayHaveIPAddress=a;function c(g){return Cu.test(g)}r.mayHaveNumberSequence=c;function l(g){return wu.test(g)}r.mayHaveCreditCardNumber=l;function d(g){return Eu.test(g)}r.mayHaveEmail=d}(s||(s={})),s})(),di=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.sy(this.rc(t));return e===!0?i=this.iy(i):e===!1&&(i=this.ry(i)),i}anonymizePII(t){return this.rc(t)}anonymizeJwt(t){return Te.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.rc(t[i])}),t}rc(t){if(Te.mayHaveEmail(t)){let e=Te.replaceEmail(t);return e!==t&&rt.counters.redactedPII.count("email"),e}return t}iy(t){return Te.replaceDigits(t)}ry(t){return Te.mayHaveNumberSequence(t)?Te.replaceDigits(t):t}sy(t){return Te.mayHaveCreditCardNumber(t)?Te.replaceCreditCardNumber(t,(e,i,n,a,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let d=a.length?csArray.prototype.join.call(csString.prototype.split.call(n,a),""):n;if(!this.ny(d))return e;rt.counters.redactedPII.count("cc")}else rt.counters.redactedPII.count("cc-partial");return`${i}${Au}${c}`}):t}ny(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let a=parseInt(t[n]);n%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),ka="15.105.5";function hn(){return{v:ka}}function un(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function so(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Da(s){let r=self.atob(s);return un(r)}function zr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function io(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){ct.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Da(e[1]):un(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var La=typeof performance!="undefined"&&!!performance.now,ro=La?()=>performance.now():csDate.now,Ou=(()=>{var s;return La?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),O={now(){return Math.round(ro()+Ou)},elapsed(){return ro()}};function no(){return Math.floor(O.now()/1e3)}function xa(){return typeof window.Promise=="function"}function Nu(){var s;return typeof crypto!="undefined"&&Be((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function oo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function qe(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function pi(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Va=(()=>{class s{constructor(t,e){this.h=t,this.I=e}getRequestParameters(){return{d:`${O.now()}`,p:this.I.anonymizePII(window.location.href),...this.h.getRequestParameters(),...hn()}}}return s})(),Mu="uxa",ao=5,ku="No stacktrace",Ua="snippet-",ja="implementation-snippet-",co=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),vr={[it.debug]:0,[it.warn]:1,[it.implementation]:1,[it.error]:2,[it.critical]:3},Du=(()=>{class s{constructor(t,e,i){this.us=e,this.I=new di,this.qu=vr[it.warn],this.qu=vr[t.minLogLevel||it.warn],this.hs=i||new mu(t,new Va(t,this.I)),this.Gu={[it.debug]:[],[it.warn]:[],[it.implementation]:[],[it.error]:[],[it.critical]:[]},this.ho={implementation:{},dynamic:{}},this.hs.init()}send(t,e="",i=it.warn){if(!this.oy(i,e))return;csArray.prototype.push.call(this.Gu[i],e||"");let n={message:this.ay(t,e),stacktrace:this.cy(t),app:Mu,level:i};this.hs.send(n)}ay(t,e){let i=Fe(t)?this.I.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}cy(t){return Fe(t)?`${t.stack||ku} ${this.uo()}`:this.uo()}uo(){let t=this.us.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.us.getSessionService(),n=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(a)}oy(t,e){if(vr[t]<this.qu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,ja,0))===0)return this.Wu(e,co.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Ua,0))===0)return this.Wu(e,co.DYNAMIC);let i=this.Gu[t];return!(i.length>=ao||e&&csArray.prototype.some.call(i,n=>n===e))}Wu(t,e){return t in this.ho[e]?this.ho[e][t]>=ao?!1:(this.ho[e][t]+=1,!0):(this.ho[e][t]=1,!0)}}return s})(),_t=!li&&document.createElement("a"),Lu=/(:443|:80)$/;function je(s){return _t?(_t.href=s,_t.href):""}function xu(s,r){return new csURL(s,r).href}function Ha(s){let r=pn(s);return r===null?"":decodeURIComponent(r.hostname)}function dn(s,r){return csArray.prototype.some.call(r,t=>pi(s,`.${t}`)||s===t||t==="")}function Vu(s){return s[0]==="/"?s:`/${s}`}function lo(s){return csString.prototype.replace.call(s,Lu,"")}function pn(s){return!_t||!qe(s,"http://")&&!qe(s,"https://")?null:(_t.href=s,{hash:_t.hash,host:lo(_t.host),hostname:_t.hostname,href:_t.href,origin:_t.origin?_t.origin:lo(`${_t.protocol}//${_t.host}`),pathname:Vu(_t.pathname),port:_t.port,protocol:_t.protocol,search:_t.search})}var ho="CS_IFRAME_MESSAGE",Uu=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Zt=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),K=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),pt=(()=>{let s;return function(r){function t(l,d,g,u){let y={type:l,from:d,pid:g,signature:ho};return u!==void 0&&u>=0&&(y.id=u),y}r.buildBaseMessage=t;function e(l,d,g,u){let y=Ha(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===ho&&l.data.from===d&&l.data.pid===g&&dn(y,u)}r.isMessageValid=e;function i(l,d,g,u){u?l.postMessage(g,d,u):l.postMessage(g,d)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function a(l,d){l.postMessage(d)}r.sendChannelMessage=a;function c(l){l.close()}r.closeChannelPort=c}(s||(s={})),s})(),ju=(()=>{class s{constructor(t){this.h=t}send(t,e="",i=it.warn){let n={message:t,errorCode:e,level:i},a=pt.buildBaseMessage(K.ChildLogMessage,Zt.Child,this.h.projectId);a.content=n,pt.sendPostMessage(window.parent,"*",a)}}return s})(),Hu=(()=>{class s{setContext(t,e){this.R=t,this.w=e}getVisitorService(){return this.R}getSessionService(){return this.w}}return s})();function Bu(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function F(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Fu(){let s=new MutationObserver(r=>{r.forEach(t=>{J(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(rt.counters.pureWindowState.count("iframe-deletion"),ct.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function uo(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function $u(){(!uo(MutationObserver)||!uo(MutationObserver.prototype.observe))&&rt.counters.patchedNativeFunctions.count("MutationObserver")}function zu(){try{window.CSPureWindow&&Fu(),$u()}catch{}}var ht=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let g=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return g?decodeURIComponent(g[2]):null}r.get=t;function e(l,d,g,u,y,E){let v=encodeURIComponent(`${d}`),T=g===r.CURRENT_DOMAIN?void 0:g,M=i(u),R=M?`;expires=${M.toUTCString()}`:"",b=";path=/",x=Nt(T)?`;domain=${T}`:"",w=`${l}=${v}${R}${b}${x}`;return Z(y)&&y!==ke.NotSet&&(w=`${w};SameSite=${y}`),Z(E)&&E===le.Yes&&(w=`${w};Secure`),document.cookie=w,!0}r.set=e;function i(l){return se(l)?new csDate(O.now()+l):l}r.toExpireDate=i;function n(l,d){t(l)&&e(l,"",d,new csDate(0)),t(l)&&e(l,"",d,new csDate(0),ke.None,le.Yes)}r.remove=n;function a(){return document.cookie.length>0}r.isCookiePresent=a;function c(l,d){let g="_cs_root-domain",u=t(g);if(u!==null&&u!=="1")return u;let y=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(y);for(;y.length&&(u===null||u==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(y),E],"."),e(g,E,E,void 0,l,d),u=t(g);return n(g,E),E}r.getRootDomain=c}(s||(s={})),s})(),qu=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),ke=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),le=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Ki=(()=>{class s{constructor(t,e,i){this.h=t,this.A=e,this.oi=i,this.nc=!1,this.Yu=ke.NotSet,this.oc=le.No}getSameSiteFlag(){return this.Yu}getSecureFlag(){return this.oc}getDomain(){return this.ac}getRootDomain(){return this.Xu}init(){if(this.h.cookielessTrackingEnabled)return;let t=this.ly(),e=this.hy();this.nc=this.uy(t,e),this.nc?(this.Yu=t,this.oc=e):this.h.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.oc=le.Yes),this.Xu=this.dy(),this.ac=this.py(this.Xu)}uy(t,e){return qu.browserIsSafariV12()?!1:(ht.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),ht.get(s.COOKIE_TEST_FOR_SAME_SITE)?(ht.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}ly(){return this.A.getUrlProtocol()==="http:"?ke.Lax:this.oi.isSameSiteNoneSecureNeeded()||this.h.crossDomainTracking?ke.None:ke.Lax}hy(){return this.A.getUrlProtocol()==="http:"?le.No:this.h.secureCookiesEnabled||this.h.crossDomainTracking||this.oi.isSameSiteNoneSecureNeeded()?le.Yes:le.No}isSameSiteSupported(){return this.nc}set(t,e,i){let n=ht.toExpireDate(i);ht.set(t,e,this.ac,n,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ac;ht.remove(t,i)}dy(){let t=this.oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?ke.None:void 0,i=t?le.Yes:void 0;return ht.getRootDomain(e,i)}py(t){return this.h.allowSubdomains?t:ht.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),ms="_cs_t",po="1",Gu=(()=>{class s{constructor(t,e){this.mt=t,this.h=e,this.po=!1,this.fo=!1}init(){if(!this.h.cookielessTrackingEnabled&&this.mt.isTopWindowTracker()&&"cookie"in document){if(!this.mt.isInIframeContext()&&ht.isCookiePresent()){this.po=!0,this.fo=!1;return}if(ht.set(ms,po,ht.CURRENT_DOMAIN),ht.get(ms)!==null){this.po=!0,this.fo=!1,ht.remove(ms,ht.CURRENT_DOMAIN);return}ht.set(ms,po,ht.CURRENT_DOMAIN,void 0,ke.None,le.Yes),ht.get(ms)!==null&&(this.po=!0,this.fo=!0,ht.remove(ms,ht.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.po}isSameSiteNoneSecureNeeded(){return this.fo}}return s})();function Wu(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Yu=(()=>{class s{constructor(t,e){this.h=t,this.oi=e}canTrack(){return this.h.isProjectActive()&&this.fy()&&this.Ku()&&this.gy()}canTrackInChild(){return this.h.isProjectActive()&&this.my()&&(this.Ku()||this.yy())}gy(){return this.h.cookielessTrackingEnabled?Wu():this.oi.areCookiesEnabled()}Ku(){return dn(window.location.hostname,this.h.hostnames)}fy(){return!this.Ju()&&this.Ey()}my(){return!this.Ju()&&this.Sy()}yy(){return window.location.protocol==="about:"&&window.location.hostname===""}Ju(){return"visibilityState"in document&&document.visibilityState==="prerender"}Ey(){return this.Qu()&&this.vy()}Sy(){return this.Qu()}vy(){try{return!!window.localStorage}catch{return!1}}Qu(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Xu=(()=>{class s{constructor(t,e){this.cc=!1,this.Zu=new Map,this.td=new Map,this.sd=new Map,this.rd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach(t=>{this.queryParams[t]=e[t]})}removeQueryParams(e){e?e.forEach(e=>{delete this.queryParams[e]}):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,e=>null==a[e])?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,e=>this.doSend(c,a,e)):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach(e=>{r.setRequestHeader(e,this.headers[e])}),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach(e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))}),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach(e=>{this.save(e)}),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map(e=>{const t={};e.headers.forEach((e,s)=>{t[s]=e}),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then(e=>({metadata:t,events:e})):e.arrayBuffer().then(e=>({metadata:t,events:e}))}),r=await Promise.all(s);await Promise.all(t.map(e=>this.cache.delete(e))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,e=>{this.setRamStorageStrategy(e)})}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach(e=>{this.storageStrategy.save(e)})}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad(t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}),d.onError(t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout(()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)},r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)})}()})();`;try{this.ds=this._y(e||i),this.cc=!0,s.isTransferableStreamSupported()&&(this.nd=new ReadableStream({start:n=>{this.lc=n},cancel:()=>{this.lc=null}}),this.ds.postMessage(this.nd,[this.nd]))}catch(n){n.name==="SecurityError"&&rt.counters.cspErrors.count("network-worker"),this.cc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.rd,this.lc?this.lc.enqueue(t):this.ds.postMessage(t)}_y(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);j.whiteListFilename(c);let l=new n(c);return l.onmessage=d=>{let{type:g,endpoint:u,WORKER_SIGNATURE:y}=d.data;if(y===this.rd){if(g==="onLoad"){let{response:E}=d.data,v=this.Zu.get(u);v&&v(E)}else if(g==="onError"){let{response:E}=d.data,v=this.td.get(u);v&&v(E)}else if(g==="onTimeout"){let E=this.sd.get(u);E&&E()}}},l}registerOnLoadCallback(t,e){this.Zu.set(t,e)}registerOnErrorCallback(t,e){this.td.set(t,e)}registerOnTimeoutCallback(t,e){this.sd.set(t,e)}isSupported(){return this.cc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Ku=(()=>{class s{constructor(t){var e;this.qt={},this.Gt=t.endpoint,this.ye=t.networkWorker,this.wy=t.compressionOutputType,this.by=t.useRetry,this.ye.postMessage({type:"CreatePostRequest",endpoint:this.Gt,compressionOutputType:this.wy,useRetry:this.by,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.ye.postMessage({type:"SetQueryParams",endpoint:this.Gt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}getQueryParams(){return this.qt}removeQueryParams(t){this.ye.postMessage({type:"RemoveQueryParams",endpoint:this.Gt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.qt[e]})}send(t,e){this.ye.postMessage({type:"Send",endpoint:this.Gt,payload:t,queryParams:e})}abort(){this.ye.postMessage({type:"Abort",endpoint:this.Gt})}onLoad(t){this.ye.registerOnLoadCallback(this.Gt,t)}onError(t){this.ye.registerOnErrorCallback(this.Gt,t)}setRequestHeader(t,e){this.ye.postMessage({type:"SetHeader",endpoint:this.Gt,headerName:t,headerValue:e})}onTimeout(t,e){this.ye.registerOnTimeoutCallback(this.Gt,t),this.ye.postMessage({type:"SetTimeout",endpoint:this.Gt,timeout:e})}}return s})(),Ji=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Ba=(()=>{class s{constructor(t){this.onError=t}}return s})(),Ju=(()=>{class s{constructor(t){var e;this.qt={},this.hc={},this.od=i=>{for(let n of i){let{metadata:a,events:c}=n;this.send(c,a)}},this.Gt=t.endpoint,this.Or=t.compressionOpts,this.Wt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Wt&&this.Wt.recover(this.od)}setQueryParams(t){Object.keys(t).forEach(e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.qt[e]}):this.qt={}}send(t,e){let i=e||{...this.qt},n=!("ct"in i),a=typeof t!="string"&&!this.Ay(t);"ct"in i||(!this.Or||!n?i.ct=Ji.UNCOMPRESSED:i.ct=this.Or.compressionType);let c=a?JSON.stringify(t):t,l=Object.keys(i).map(g=>`${encodeURIComponent(g)}=${encodeURIComponent(i[g])}`).join("&"),d=`${this.Gt}?${l}`;if(tu(this.mandatoryParameters,g=>i[g]==null)){ct.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${d}`);return}this.Or&&n&&typeof c=="string"?this.Or.compressor(c,this.Or.compressionOutputType,g=>this.ad(d,i,g)):this.ad(d,i,c)}onLoad(t){this.Ui=t}onError(t){this.Nr=t}onTimeout(t,e){this.ai=t,this.Mr=e}abort(){this.cd&&this.cd()}setRequestHeader(t,e){this.hc[t]=e}getQueryParams(){return this.qt}Ay(t){return t&&t.byteLength!==void 0}ad(t,e,i){let n=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),n.onload=()=>{if(this.Wt&&this.Wt.recover(this.od),this.Ui){let c={params:e,responseText:n.responseText,status:n.status};this.Ui(c)}},n.onerror=()=>{this.Wt&&this.Wt.save({key:a,metadata:e,events:i}),this.Nr&&this.Nr({params:e})},this.Mr&&this.ai&&(n.timeout=this.Mr,n.ontimeout=()=>{this.ai()}),this.cd=()=>n.abort(),Object.keys(this.hc).forEach(c=>{n.setRequestHeader(c,this.hc[c])}),n.send(i)}}return s})(),Fa=(()=>{class s{constructor(t){this.pc=t,this.ye=new Xu(this.pc)}create(t,e,i,n,a=[]){if(this.ye.isSupported()&&e)return new Ku({networkWorker:this.ye,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:a});{let c=i?{compressor:this.pc.compress,compressionOutputType:i,compressionType:this.pc.algorithm}:void 0;return new Ju({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Qu=(()=>{class s{constructor(t,e,i,n,a){this.R=t,this.w=e,this.qe=i,this.vt=n,this.h=a}get(){return{exclusion:this.qe.getAppliedTrackingDraw(),visitor:this.R.getVisitor(),session:this.w.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.qe.exclude(this.h),this.R.removeVisitor(),this.w.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.qe.removeExclusion(),this.R.setVisitor(t.visitor),t.session?this.w.setSession(t.session):this.w.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),Qt="_cs_id",fo=".",Zu=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,go="x",td=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Yt.getItem(Qt):t=this.M.get(Qt),t?s.fromString(t):null}set(t){var e;let i=s.toString(t);if(this.h.cookielessTrackingEnabled)this.Yt.setItem(Qt,i);else{let n=new csDate(t.expires);this.M.set(Qt,i,n),(e=this.ci)===null||e===void 0||e.call(this,Qt,i,n)}}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(Qt):(this.M.delete(Qt),(t=this.li)===null||t===void 0||t.call(this,Qt))}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.h.allowSubdomains,this.h.allowSubdomains?this.M.delete(Qt,Ki.CURRENT_DOMAIN):this.M.delete(Qt,this.M.getRootDomain()),this.set(t))}static fromString(t){let[e,i,n,a,c,l,d,g,u]=csString.prototype.split.call(t,fo);return{id:e,creationTimestamp:Number(i),visitsCount:Number(n),hitTimestamp:Number(a),lastVisitTimestamp:Number(c),appliedTrackingDraw:Number(l),expires:Number(d),allowSubdomains:g===void 0?void 0:!!Number(g),identityPrint:u===void 0||u===go?null:u}}static toString(t){var e;return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0,(e=t.identityPrint)!==null&&e!==void 0?e:go],fo)}static isValidVisitorString(t){return Zu.test(t)}}return s})(),I=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Ct=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),He=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Rt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Wt="_cs_s",Vi=18e5,mo=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,zs=".",ed=13,Ci=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),_r=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i,this.Xt=null,this.fc=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?s.fromString(e):null}getRawSession(t){if(t){let g=this.gc();return s.mc(g)}let{sessionString:e,status:i}=this.Ty(),n=s.mc(e);if(i!==Ci.EXPIRED)return n;if(this.h.cookielessTrackingEnabled)return null;let a=this.gc();if(!a)return null;let c=csString.prototype.split.call(a,zs);if(!s.ld(c))return a;let l=c[c.length-1],d=parseInt(l,10);return isNaN(d)||this.Ry(d),n}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}set(t,e=Vi){var i;let n=O.now()+e,a=this.toString(t);a+=`${zs}${n}`,this.Cy(a,n),this.h.cookielessTrackingEnabled?this.Yt.setItem(Wt,a):(this.M.set(Wt,a,e),(i=this.ci)===null||i===void 0||i.call(this,Wt,a,e))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(Wt):(this.M.delete(Wt),(t=this.li)===null||t===void 0||t.call(this,Wt)),this.Iy()}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.h.allowSubdomains?this.M.delete(Wt,Ki.CURRENT_DOMAIN):this.M.delete(Wt,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&s.isValidSessionString(t)}toString(t){return csArray.prototype.join.call([t.pageNumber,t.collectState,t.etrState,t.etrStatus],zs)}Cy(t,e){this.Xt={sessionString:t,expires:e}}Ty(){return this.Xt?this.Xt&&O.now()<=this.Xt.expires?{sessionString:this.Xt.sessionString,status:Ci.FOUND}:{sessionString:this.Xt.sessionString,status:Ci.EXPIRED}:{sessionString:this.gc(),status:Ci.NOT_FOUND}}Iy(){this.Xt=null}Ry(t){this.Xt&&(this.Xt.expires=t,this.fc=!0)}isCacheRefreshed(){return this.fc}resetCacheRefreshed(){this.fc=!1}gc(){if(this.h.cookielessTrackingEnabled){let e=this.Yt.getItem(Wt);return!e||this.ud(e)?null:e}let t=this.M.get(Wt);return!t||this.ud(t)?null:t}ud(t){let e=csString.prototype.split.call(t,zs);if(!s.ld(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static ld(t){return t[t.length-1].length===ed}static mc(t){var e;if(!t)return null;let i=(e=csString.prototype.match.call(t,mo))===null||e===void 0?void 0:e[1];return i!=null?i:null}static fromRawString(t){let e=s.mc(t);return e!==null?s.fromString(e):null}static fromString(t){var e,i;let[n,a,c,l]=csString.prototype.split.call(t,zs);return{collectState:a,etrState:(e=c)!==null&&e!==void 0?e:Ct.ETR_OFF,etrStatus:(i=l)!==null&&i!==void 0?i:Rt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(n,10)}}static isValidSessionString(t){return mo.test(t)}}return s})();var ae="_cs_ex",yo=2592e6,sd=/^[0-9]+$/,id=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?Number(this.Yt.getItem(ae)):Number(this.M.get(ae))}set(t){var e;this.h.cookielessTrackingEnabled?this.Yt.setItem(ae,t):(this.M.set(ae,t,yo),(e=this.ci)===null||e===void 0||e.call(this,ae,t,yo))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(ae):(this.M.delete(ae),(t=this.li)===null||t===void 0||t.call(this,ae))}static isValidExclusionString(t){return sd.test(t)}}return s})(),Re="_cs_cvars",rd=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?this.Yt.getItem(Re):this.M.get(Re)}set(t){var e;this.h.cookielessTrackingEnabled?this.Yt.setItem(Re,t):(this.M.set(Re,t),(e=this.ci)===null||e===void 0||e.call(this,Re,t))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(Re):(this.M.delete(Re),(t=this.li)===null||t===void 0||t.call(this,Re))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var nd="spki",Eo="RSA-OAEP",od="SHA-256",So="AES-CTR",ad="SHA-1",vo=190,Ks=(()=>{let s;return function(r){var t;let e=!1,i=null,n,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=bt.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function d(){return i}r.getCryptoKey=d;function g(){var w,k;return((k=(w=bt.self.crypto)===null||w===void 0?void 0:w.subtle)===null||k===void 0?void 0:k.encrypt)!=null&&bt.self.CryptoKey!=null}r.isSupported=g;async function u(w){n=r.crypto.importKey(nd,Da(w),{name:Eo,hash:od},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||ct.warn(`Fail to import public key '${w}'`)}r.importKey=u;async function y(w){if(!g()||e)return null;await n;let k=un(w);k.byteLength>vo&&(k=k.slice(0,vo));try{let U=await r.crypto.encrypt({name:Eo},i,k);return so(U)}catch{return null}}r.asymmetricEncrypt=y;async function E(w,k){if(!g()||e)return null;let U={counter:k.initializationVector,name:So,length:64},W=a.encode(w);try{let ot=await r.crypto.encrypt(U,k.cryptoKey,W);return so(ot)}catch{return null}}r.symmetricEncrypt=E;async function v(w){let k=await T(w);if(!k)throw new Error("Export secret failed");let U=await y(k);if(!U)throw new Error("Encrypt secret failed");return U}r.encryptSecret=v;async function T(w){var k;if(!g())return null;try{return(k=(await r.crypto.exportKey("jwk",w)).k)!==null&&k!==void 0?k:null}catch{return null}}async function M(){if(!g()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:So,length:128},!0,["encrypt","decrypt"]),initializationVector:bt.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=M;function R(w){c=w}r.setDigestSalt=R;async function b(w){w=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(w)),c&&(w=`${w}:${c}`);let k=a.encode(w);try{let U=await r.crypto.digest(ad,k);return zr(U)}catch{return null}}r.digest=b;function x(){return bt.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=x}(s||(s={})),s})();function cd(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=hd(r);return t===""||(r=ud(r,t),r.length===0)?"":$a(r[0])}function ld(s){return csString.prototype.indexOf.call(s,"@")!==-1}function hd(s){return s.length>0?$a(s[0]):""}function ud(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function $a(s){let r="",t;ld(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var dd=s=>s;function pd(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let a=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let d=Reflect.get(c,l);return typeof d=="function"?d.bind(c):d},set:(c,l,d)=>{let g=c[l],u=Reflect.set(c,l,d);return e.forEach(y=>y(this,d,g,"subproperty")),u}}):this[i]=a,this[i])},set(){var n;let a=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,a);delete this[i];try{e.forEach(d=>d(this,a[0],c,"property"))}catch(d){ct.error(d)}return l}})}function fd(s,r,t){let e=gd(s,r);if(!e)return null;let i=(n,a,c,l)=>t(n,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function gd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,pd(s,r,i,e),e):(ct.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ct.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function md(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ct.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ns(i),g=>g(c))}catch(g){ct.error(g)}let d=n.apply(this,c);try{for(let g=0;g<l.length;g++)l[g]({result:d,context:this,args:c})}catch(g){ct.error(g)}return d};Ed(a,n),s[r]=a}return i}function is({target:s,methodName:r,hook:t,hookPrepareArgs:e=dd,options:i}){let n=md(s,r);if(!n)return null;let a=c=>{let l=e(c),d=i!=null&&i.withCallerName?{callerName:cd()}:{};return g=>t({...g,...d,args:l})};return{activate:()=>{n.add(a)},deactivate:()=>{n.delete(a)}}}function yd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let a=arguments,c=this[r],l=(n=i.set)===null||n===void 0?void 0:n.apply(this,a);try{e.forEach(d=>d(this,a[0],c,"property"))}catch(d){ct.error(d)}return l}}),e):(ct.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function qr(s,r,t){let e=yd(s,r);if(!e)return null;let i=(n,a,c)=>t(n,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Ed(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Ms=(()=>{var s;class r{static My(e){this.Os.forEach(i=>{e(i,"initial")})}static kr(e){if(this.P||(this.P=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&J(n.addedNodes,this.ky),J(n.removedNodes,this.Dy)})),csArray.prototype.push.call(this.Se,e),!this.B){this.B=!0,this.P.observe(document,this.Dr);for(let i of os.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Os.add(n),this.P.observe(n,this.Dr)}this._c||(this._c=is({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.gd(i.result)})),this._c.activate()}this.My(e)}static Lr(e){var i,n;this.Se=csArray.prototype.filter.call(this.Se,a=>a!==e),this.Se.length===0&&(this.Se=[],this.B=!1,(i=this.P)===null||i===void 0||i.disconnect(),(n=this._c)===null||n===void 0||n.deactivate(),this.Os.clear())}constructor(e){this.S=e,this.S=$e("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Ns(s.Os)}takeRecords(){var e,i;return(i=(e=s.P)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){os.isSupported()&&s.kr(this.S)}disconnect(){os.isSupported()&&s.Lr(this.S)}}return s=r,r.Se=[],r.Os=new Set,r.B=!1,r.Dr={childList:!0,subtree:!0},r.gd=t=>{s.Os.has(t)||(s.P.observe(t,s.Dr),s.Os.add(t),J(s.Se,e=>e(t,"added")))},r.ky=t=>{Yt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.gd)},r.Dy=t=>{t.isConnected||Yt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Os.has(e)&&(s.Os.delete(e),J(s.Se,i=>i(e,"removed")))})},at([L()],r.prototype,"observe",null),at([L()],r.prototype,"disconnect",null),r})(),za=!0;function Pt(s,r=za){s.boundElement.addEventListener(s.type,s.listener,r)}function Ot(s,r=za){s.boundElement.removeEventListener(s.type,s.listener,r)}function Vt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var _o=!1;function wt(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&_o||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&_o||e.call(this,i,n)}}}}function Qi(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],a=null,c=0,l,d=()=>{c=O.now(),a=null,l=s.apply(i,n),n=[],i=null},g=function(...u){if(i=this!==null&&this!==void 0?this:window,n=[...u],e==="trailing")return a||(a=window.csSetTimeout(d,t)),l;let y=O.now(),E=t-(y-c);return E<=0||E>t?(c=y,l=s.apply(i,n),a?(window.csClearTimeout(a),a=null):n=[]):a||(a=window.csSetTimeout(d,E)),l};return g.cancel=()=>{a&&(window.csClearTimeout(a),c=0,a=null,n=[])},g.flushPending=()=>{a&&(window.csClearTimeout(a),d())},g}var fn=s=>(r,t,e)=>{e.value=Qi(e.value,s)};function Sd(s){return s.nodeType===1}function gt(s){let r=csEventtarget.apply(s);return r&&Sd(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function vd(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function _d(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(gt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function wd(s){if(!$(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var bd=!!window.chrome,wo="data-cs-scroll-container";function Ad(s){try{if(Nt(csEventtarget.apply(s)))return!0}catch{}return!1}var vs=(()=>{let s;return function(r){function t(i){return!!(Nt(i)&&Ad(i)&&hi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(wo)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${wo}]`)}r.getScrollContainer=e}(s||(s={})),s})();function Td(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Ui=Td(),G=(()=>{let s;return function(r){function t(l,d,g){var u;l instanceof Node?Ui.set(l,d,g):((u=l.props)!==null&&u!==void 0||(l.props={}),l.props[d]=g)}r.setProperty=t;function e(l,d){var g;return l instanceof Node?Ui.get(l,d):(g=l.props)===null||g===void 0?void 0:g[d]}r.getProperty=e;function i(l){return l instanceof Node?Ui.getStore(l):l.props}r.getProperties=i;function n(l,d){let g=null;return a(l,(u,y,E)=>d(u)&&(g=u)&&!!E()),g}r.findDescendant=n;function a(l,d){c(l,void 0,d)}r.traverse=a;function c(l,d,g){let u=!1;if(g(l,d,()=>u=!0),u)return;let E=l.shadowRoot;E&&c(E,l,g);let v=l.children;if(v!=null&&v.length){for(let T of v)if(T&&(c(T,l,g),u))break}}}(s||(s={})),s})(),qa=1,Js=csSymbol("nodeIdentifier");function Rd(s=!1){s&&(qa=1),Js=csSymbol("nodeIdentifier")}function Cd(s){return G.getProperty(s,Js)}function et(s){let r=G.getProperty(s,Js);return r!=null?r:(G.setProperty(s,Js,qa++),G.getProperty(s,Js))}var wr;function Qs(s){if(wr||(wr=document.createElement("div")),!(!!s&&$(s)))return ct.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Xt.call(wr,s),!0}catch{return ct.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Gr(s,r){if(Jn)return Jn.call(s,r);let t=s;do{if(Xt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var N=(()=>{let s;return function(r){let t;(function(R){R[R.NotMasked=0]="NotMasked",R[R.Parent=1]="Parent",R[R.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(R){return As(R)&&"Attributes"in R&&"PIISelectors"in R?R.Attributes instanceof Array&&R.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(R){if(!As(R)||R===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in R||(R.Attributes=[]),"PIISelectors"in R||(R.PIISelectors=[]),R}r.sanitizeSelectorUserInput=i;function n(R){var b;return(b=G.getProperty(R,r.maskedProp))!==null&&b!==void 0?b:{state:t.NotMasked}}r.getMaskedElementDetails=n;function a(R){var b;return(b=G.getProperty(R,r.maskedAttributeProp))!==null&&b!==void 0?b:{attributes:[]}}r.getMaskedAttributeDetails=a;function c(R){let b=G.getProperty(R,r.maskedProp);return(b==null?void 0:b.state)===t.Parent}r.isMaskedElement=c;function l(R){let b=G.getProperty(R,r.maskedProp);return(b==null?void 0:b.state)===t.Child}r.isMaskedElementChild=l;function d(R,b){let x=G.getProperty(R,r.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,b))>-1}r.isMaskedAttribute=d;function g(R,b){G.setProperty(R,r.maskedProp,b)}r.setMaskedElementProperty=g;function u(R){G.setProperty(R,r.maskedProp,void 0)}r.unsetMaskedElementProperty=u;function y(R,b){G.setProperty(R,r.maskedAttributeProp,b)}r.setMaskedAttributeProperty=y;function E(R,b){let x=csArray.prototype.filter.call(R.PIISelectors,U=>Qs(U));b.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(b.elementSelector,","));let w=M([...x]),k={elementSelector:csArray.prototype.join.call(w,","),attrSelector:b.attrSelector,attrSelectors:b.attrSelectors};return csArray.prototype.forEach.call(R.Attributes,U=>{U!=null&&U.attrName&&(U!=null&&U.selector)&&Qs(U.selector)&&!v(k.attrSelectors,U)&&csArray.prototype.push.call(k.attrSelectors,U)}),k.attrSelector=T(k.attrSelectors),k}r.getComputedSelectorSettings=E;function v(R,b){return csArray.prototype.some.call(R,x=>x.selector===b.selector&&x.attrName===b.attrName)}function T(R){let b="";return csArray.prototype.forEach.call(R,x=>{let w=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(w,k=>{Qs(k)&&(b&&(b+=","),b+=k)})}),b}function M(R){if(R.length<=1)return R;let b=[];for(let x of R){let w=csString.prototype.split.call(x,",");for(let k of w)csArray.prototype.indexOf.call(b,k)===-1&&csArray.prototype.push.call(b,k)}return b}}(s||(s={})),s})(),D=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var qs=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),_s=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),Id=33,Pd=(()=>{class s{constructor(){this.eventType="user",this.wc=[],this.Ly=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.xy=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.go=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.bc=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=wd(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.bc,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ie=new Ms((e,i)=>{switch(i){case"initial":case"added":this.hi(e);break;case"removed":this.pi(e);break}})}init(){this.Vy(),this.Uy(),this.Ac()}onEvent(t){csArray.prototype.push.call(this.wc,t)}Kt(t,e=!1){csArray.prototype.forEach.call(this.wc,i=>i(t,e))}start(){this.Tc(),this.hi(document),this.ie.observe()}stop(){this.pi(document),this.ie.disconnect(),this.wc=[]}Uy(){this.jy()&&csArray.prototype.push.call(this.go,...this.Ly)}Vy(){this.Hy()&&csArray.prototype.push.call(this.go,...this.xy)}hi(t){Fi(t)?csArray.prototype.forEach.call(this.go,e=>Pt(e)):csArray.prototype.forEach.call(this.bc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Pt(i)})}pi(t){Fi(t)?csArray.prototype.forEach.call(this.go,e=>Ot(e)):csArray.prototype.forEach.call(this.bc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ot(i)})}jy(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Hy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Tc(){this.By()}By(){let t=vs.getScrollContainer()||document,e=et(t),i=this.md(t);if(i.top!==0||i.left!==0){let n={type:D.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(n,!0)}}md(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(N.isMaskedElement(t)||N.isMaskedElementChild(t))return;let e=et(t),i=this.md(t),n={type:D.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(n)}mouseOverListener(t){if(N.isMaskedElementChild(t.target))return;let e=et(t.target),i={type:D.MOUSE_OVER,args:[e],date:O.now()};this.Kt(i)}clickListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.CLICK,args:[i],date:O.now()};this.Kt(n)}keyUpListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.D[t.key];if(n===void 0)return;let a={type:D.KEY_UP,args:[i,n],date:O.now()};this.Kt(a)}keyDownListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.D[t.key];if(n===void 0)return;let a={type:D.KEY_DOWN,args:[i,n],date:O.now()};this.Kt(a)}copyListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.CLIPBOARD_COMMAND,args:[i,_s.COPY],date:O.now()};this.Kt(n)}cutListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.CLIPBOARD_COMMAND,args:[i,_s.CUT],date:O.now()};this.Kt(n)}pasteListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.CLIPBOARD_COMMAND,args:[i,_s.PASTE],date:O.now()};this.Kt(n)}pointerUpListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.POINTER_UP,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1),i,t.button],date:O.now()};this.Kt(n)}pointerMoveListener(t){let e={type:D.POINTER_MOVE,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1)],date:O.now()};this.Kt(e)}pointerDownListener(t){let e=gt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:D.POINTER_DOWN,args:[t.pointerId,t.pointerType,Vt(t.clientX,1),Vt(t.clientY,1),i,t.button,{pageX:Vt(t.pageX,1),pageY:Vt(t.pageY,1)}],date:O.now()};this.Kt(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:D.TOUCH_START,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:O.now()};this.Kt(a)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:D.TOUCH_MOVE,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:O.now()};this.Kt(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:t.type==="touchend"?D.TOUCH_END:D.TOUCH_CANCEL,args:[n.identifier,Vt(n.clientX,1),Vt(n.clientY,1)],date:O.now()};this.Kt(a)}}Ac(){this.D={},this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Backspace=q.BACKSPACE,this.D.Enter=q.ENTER,this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,this.D.Tab=q.TAB,this.D.Escape=q.ESCAPE,this.D.Esc=q.ESCAPE,this.D.End=q.END,this.D.Alt=q.ALT,this.D.Control=q.CTRL,this.D.Meta=q.META}}return F([kt("RecordingPageEvents.start")],s.prototype,"start",null),F([L("scroll")],s.prototype,"scrollListener",null),F([L("mouseOver"),wt(),_d()],s.prototype,"mouseOverListener",null),F([L("click"),wt()],s.prototype,"clickListener",null),F([L("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([L("Event handler type: keydown")],s.prototype,"keyDownListener",null),F([L("Event handler type: copy")],s.prototype,"copyListener",null),F([L("Event handler type: cut")],s.prototype,"cutListener",null),F([L("Event handler type: paste")],s.prototype,"pasteListener",null),F([L("Event handler type: pointerup"),wt()],s.prototype,"pointerUpListener",null),F([L("Event handler type: pointermove"),wt(),fn({wait:Id})],s.prototype,"pointerMoveListener",null),F([L("Event handler type: pointerdown"),wt()],s.prototype,"pointerDownListener",null),F([L("Event handler type: touchstart"),wt()],s.prototype,"touchStartListener",null),F([L("Event handler type: touchmove"),wt()],s.prototype,"touchMoveListener",null),F([L("Event handler type: touchend-cancel"),wt()],s.prototype,"touchEndCancelListener",null),s})(),Od=2,gn=(()=>{class s{constructor(t){this.Fy=t,this.mo=0}addString(t){this.mo+=t.length*Od}addArrayBuffer(t){this.mo+=t.byteLength}isThresholdReached(){return this.mo>this.Fy}reset(){this.mo=0}}return s})(),Nd=2*1e3*1024,Md=200,kd=(()=>{class s{constructor(t=[],e=Nd){this.Nt=t,this.Rc=new gn(e)}addEvent(t){this.Rc.addString(Rs(t)),csArray.prototype.push.call(this.Nt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Nt.length&&!(this.Nt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Nt,e,0,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Rc.reset(),this.Nt=[]}isFull(){return this.eventsCount()>=Md}isThresholdReached(){return this.Rc.isThresholdReached()}getEvents(){return this.Nt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Nt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Nt=i,e}stringifyEvents(){return Rs(this.Nt)}cC(t){t.type===D.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return F([kt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Dd=(()=>{class s{constructor(){this.yo=1}getCurrentIndex(){return this.yo}increment(){this.yo+=1}reset(){this.yo=1}getRequestParameters(){return{ri:`${this.yo}`}}}return s})(),Ga=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.$y}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.zy();if(i===null)return null;let{bubbles:n=!1,cancelable:a=!1,detail:c}=e;return i.initCustomEvent(t,n,a,c),i}static zy(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.$y="cs.tracking.",s})(),Dt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),ji="null",De=null,Wa=[],Ld=()=>{var s;return li||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!li&&Ld()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],De=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Wr({type:"UXA_EVENT",event:s.detail})}),De.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===ji)return;ji=s.data.sessionId,csArray.prototype.forEach.call(Wa,r=>r()),De==null||De.postMessage({type:"CONNECTED",sessionId:ji})}}));function xd(s){li||(ji!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Wa,s)))}function Wr(s){De==null||De.postMessage(s)}var Zi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ts=(()=>{class s extends Zi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var bo=(()=>{class s extends Zi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),br=(()=>{class s extends Zi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=O.elapsed();t(),this.count++,this.total+=O.elapsed()-e}asyncMeasure(){let t=O.elapsed();return()=>{this.count++,this.total+=O.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),ie={general:{category:"General",nbEvents:new ts("Nb of Events"),pendingTasks:new ts("Pending Tasks"),pendingEvents:new ts("Pending Tasks"),nbOfMutationObservers:new bo("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new br("Initial DOM"),pendingMutations:new ts("Nb of Mutations scheduled"),serializedMutations:new br("Serialized Mutations"),count:new ts("Mutation Count"),elementMutationObserved:new bo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new br("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ts("Nb of Hidden Elements "),nbElements:new ts("Nb of  Elements")}},Ao=null;xd(()=>{let s=i=>Object.keys(i),r=csArray.prototype.map.call(s(ie),i=>ie[i]),t=csArray.prototype.map.call(r,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),n=>i[n]),n=>n instanceof Zi));Wr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(r,(i,n)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[n],a=>({name:a.name,format:a.format}))}))}),!Ao&&(Ao=csSetInterval(()=>{let i=Pa(Ue(t,n=>Ue(n,a=>a.getData())),n=>n);Wr({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});function de(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Bt(s){return qe(s,"data:")}function Vd(s){return qe(s,"#")}function Ud(s){return!!s&&(pi(s,".css")||qe(s,"https://fonts.googleapis.com/css"))}var To=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function jd(s){To.lastIndex=0;let r,t=0,e=[];for(;(r=To.exec(s))!==null;){let i=r.index,n=r.index+r[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let a=csString.prototype.slice.call(s,i,n);csArray.prototype.push.call(e,{content:a,isUrl:!0}),t=n}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}function mn(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Hd(r);return e?(pi(t,",")||(e=Bd(e)),[Ro(t),...mn(e)]):[Ro(t)]}function Hd(s){return csString.prototype.split.call(s,/\s(.+)/)}function Ro(s){return csString.prototype.split.call(s,/,$/)[0]}function Bd(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Fd=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function $d(s,r){return csString.prototype.replace.call(s,Fd,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],a=qd((i||n).trim()),c=i?"@import ":"",l=r(a)||a;return`${c}url(${zd(l)})`})}function zd(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Zs(s){let r=new Set;return $d(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ns(r)}function qd(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\uFFFD":csString.fromCodePoint(a)})}var Co=new Map,Ar=!li&&document.implementation.createHTMLDocument("");function Ya(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Gd(s){if(!sn(s))return null;let r=Xa(s);if(r===null||r.length===0)return null;let t="";if(yh(s.textContent))J(r,e=>t+=e.cssText);else{let e=Wd(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,a=0;n<r.length;n+=1,a+=1)i[a]=r[n];J(i,n=>t+=n.cssText)}return t}function Wd(s){if(!Ar)return 0;let r=Co.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Ar.head.appendChild(t);let e=Xa(t);return r=e?e.length:0,Co.set(s.textContent,r),Ar.head.removeChild(t),r}function Xa(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var Ws=s=>s instanceof HTMLFormElement?"form":s.localName;var ls=(()=>{class s{constructor(t){this.csId=et(t),this.props=Ui.getStore(t)}}return s})(),Ka=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),ws=(()=>{class s extends ls{constructor(t){var e;super(t),this.attributes=[],this.nodeType=1,this.localName=Ws(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let i=Gd(t);if(i){this.children=new csArray(csNodechildNodes.apply(t).length);let n=document.createTextNode(i),a=new Ka(n);csArray.prototype.push.call(this.children,a)}Ps(t)&&G.setProperty(this,"SVG",!0)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return xe(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),yn=(()=>{class s{constructor(t){this.type="asyncEvent",this.Cc=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Cc)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ns=t,this.Cc=!0,this.S&&this.S(this.Ns)}complete(t){this.Cc&&t(this.Ns),this.S=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function Yd(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var Yr=csQueueMicrotask||csSetTimeout,Ii=new Os,Gs=new Os,Io=1;function $t(s,r="high"){let t=Io;Ii.isEmpty&&Gs.isEmpty&&Ja(()=>{if(Io!==t)return;let n=cs(()=>{for(;!Gs.isEmpty;)Gs.pop()();for(;!Ii.isEmpty;)Ii.pop()();Gs.isEmpty||n()},"groupMicrotask.run");n()});let e=s.name||s.toString(),i=$e(`groupMicrotask:${r}:${e}`,s);r==="high"?Gs.push(i):Ii.push(i)}function Ja(s,r=10){Yr(r===0?s:()=>Ja(s,r-1))}async function Qa(s=1){for(let r=0;r<s;r++)await new Promise(t=>$t(t))}function tr(){let s=new Set;return{add(r){s.add(r),s.size===1&&csSetTimeout(()=>{s.clear()})},has(r){return s.has(r)},del(r){s.delete(r)},clear(){s.clear()},values(){return Ns(s)},get count(){return s.size}}}function er(s,r=!1){let t=tr();return{push(e){t.count===0&&(r?$t:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var rs=csSymbol(),En=(()=>{class s{constructor(t){var e,i,n,a,c,l,d,g,u,y,E,v;this.S=t,this.Ic=null,this.Pc=null,this.Oc=null,this.Nc=null,this.qy=er(T=>this.processUpdateRulesInATick(T)),this.Mc=null,this.kc=null,this.Dc=null,this.S=T=>$t(()=>t(T)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Ic=is({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:T,args:M})=>{this.processInsertRule(T,M)}})),typeof((a=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.Pc=is({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:T,args:M})=>{this.processDeleteRule(T,M)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Oc=is({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:T})=>this.processUpdateRule(T)})),typeof((g=(d=window.CSSGroupingRule)===null||d===void 0?void 0:d.prototype)===null||g===void 0?void 0:g.deleteRule)=="function"&&(this.Nc=is({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:T})=>this.processUpdateRule(T)})),typeof((y=(u=window.CSSStyleDeclaration)===null||u===void 0?void 0:u.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Mc=is({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:T})=>{let M=T.parentRule;M instanceof CSSStyleRule&&this.processUpdateRule(M)}})),typeof((v=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||v===void 0?void 0:v.removeProperty)=="function"&&(this.kc=is({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:T})=>{let M=T.parentRule;M instanceof CSSStyleRule&&this.processUpdateRule(M)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Dc=fd(window.CSSStyleRule.prototype,"style",T=>{this.processUpdateRule(T)}))}observe(){var t,e,i,n,a,c,l;(t=this.Ic)===null||t===void 0||t.activate(),(e=this.Pc)===null||e===void 0||e.activate(),(i=this.Oc)===null||i===void 0||i.activate(),(n=this.Nc)===null||n===void 0||n.activate(),(a=this.Mc)===null||a===void 0||a.activate(),(c=this.kc)===null||c===void 0||c.activate(),(l=this.Dc)===null||l===void 0||l.activate()}disconnect(){var t,e,i,n,a,c,l;(t=this.Ic)===null||t===void 0||t.deactivate(),(e=this.Pc)===null||e===void 0||e.deactivate(),(i=this.Oc)===null||i===void 0||i.deactivate(),(n=this.Nc)===null||n===void 0||n.deactivate(),(a=this.Mc)===null||a===void 0||a.deactivate(),(c=this.kc)===null||c===void 0||c.deactivate(),(l=this.Dc)===null||l===void 0||l.deactivate()}processInsertRule(t,[e,i]){if(t[rs]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.S(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.qy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(ni(i.cssRules),e);if(n===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.S(a)}}processDeleteRule(t,[e]){if(t[rs]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.S(i)}}return at([L()],s.prototype,"observe",null),at([L()],s.prototype,"disconnect",null),at([L()],s.prototype,"processInsertRule",null),at([L()],s.prototype,"processUpdateRule",null),at([L()],s.prototype,"processUpdateRulesInATick",null),at([L()],s.prototype,"processDeleteRule",null),s})(),Xd=(()=>{class s{constructor(t){this.Gy=1,this.Eo=new Set,this.Lc=null,this.xc=null,this.Vc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Wy=e=>{let i=e.sheet;if(this.Eo.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[rs],rule:e.rule,index:e.index};this.S(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[rs],index:e.index};this.S(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[rs],rule:e.rule,index:e.index};this.S(n)}}},this.S=e=>$t(async()=>{await Qa(2),t(e)}),this.ie=new Ms(this.Vc),"adoptedStyleSheets"in Document.prototype&&(this.Lc=qr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.xc=qr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.yd=new En(this.Wy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ie.observe(),(t=this.Lc)===null||t===void 0||t.activate(),(e=this.xc)===null||e===void 0||e.activate(),this.yd.observe()}disconnect(){var t,e;this.Eo.clear(),this.ie.disconnect(),(t=this.Lc)===null||t===void 0||t.deactivate(),(e=this.xc)===null||e===void 0||e.deactivate(),this.yd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Yy(e);let i=Ue(e,a=>a[rs]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.S(n)}Yy(t){J(t,e=>{if(this.Eo.has(e))return;let i=this.Gy++;e[rs]=i,this.Eo.add(e);let n=this.Xy(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n};this.S(a)})}Xy(t){let e=[];try{e=Ue(t.cssRules,i=>i.cssText)}catch{}return e}}return at([L()],s.prototype,"observe",null),at([L()],s.prototype,"disconnect",null),at([L()],s.prototype,"setStyleSheets",null),s})(),Kd=cs(tp,"optimizeMutations"),Jd=csSymbol.for("ignoreNextSerialization");function Qd(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,a=new Map,c=new Set,l=new Set,d=new Map,g=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){g.delete(u),s.add(u)},isDetachedMove(u){return!!ut.findAncestor(u,y=>g.has(y),!0)},isAddedNode(u){let y=ut.findAncestor(u,E=>r.has(E)||l.has(E)||s.has(E),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!ut.findAncestor(u,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(u){g.delete(u),l.delete(u),r.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!ut.findAncestor(u,y=>t.has(y),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,y){let E=y==="previous"?n:i;return u&&E.has(u)?E.get(u)||null:u},getSiblings(u){let y=u.addedNodes.length,E=this.getPlaceholder(u.previousSibling,"previous"),v=this.getPlaceholder(u.nextSibling,"next");if(y){let T=E,M=v,R=u.previousSibling!==E,b=u.nextSibling!==v;for(let x=0;x<y;x++){let w=u.addedNodes[x],k=u.addedNodes[y-x-1];this.isLatestNodeMutation(w,u)?(n.delete(w),u.previousSibling&&R&&(i.set(u.previousSibling,w),R=!1),T=w):n.set(w,T),this.isLatestNodeMutation(k,u)?(i.delete(k),u.nextSibling&&b&&(n.set(u.nextSibling,k),b=!1),M=k):i.set(k,M)}}else u.previousSibling&&u.previousSibling!==E&&i.set(u.previousSibling,v),u.nextSibling&&u.nextSibling!==v&&n.set(u.nextSibling,E);return{previousSibling:E,nextSibling:v}},setAttributeMutation(u,y){let E=a.get(u)||new Set;E.add(y),a.set(u,E)},isAttributeMutated(u,y){var E;return!!(!((E=a.get(u))===null||E===void 0)&&E.has(y))},setLatestNodeMutation(u,y){d.set(u,y)},isLatestNodeMutation(u,y){return d.get(u)===y},markAsFutureAddedNode(u){d.has(u)||g.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function Zd(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function tp(s){let r=Qd(),t=[];for(let e of s)e.type==="childList"&&Zd(e,r);for(let e of s)switch(e.type){case"attributes":sp(e,r,t);break;case"characterData":ep(e,r,t);break;case"childList":np(e,r,t);break}return t}function ep(s,r,t=[]){let e=s.target;return ut.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!rp(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function sp(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ut.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var ip=30;function rp(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=O.now(),n=s[e];return n&&i<n?!0:(s[e]=i+ip,!1)}function np(s,r,t=[]){let e=ut.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),a=r.getSiblings(s),c=a.nextSibling,l=a.previousSibling,d=null,g=()=>{if(d){let{childListType:E,movedNodes:v,...T}=d;csArray.prototype.push.call(t,E==="added"?T:{...T,movedNodes:v}),d=null}},u=E=>E===(d==null?void 0:d.childListType)?d:(g(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let v=s.addedNodes[E];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(d=u("moved"),csArray.prototype.push.call(d.movedNodes,v)):(r.markAsAddedNode(v),n||(d=u("added"),csArray.prototype.push.call(d.addedNodes,v))),l=v):ut.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}g()}let y=Oa(s.removedNodes,E=>{if(ut.isConnected(E)){if(!i&&!r.isPendingInsert(E)){if(r.isDetachedMove(E))return!0;r.markAsMovedNode(E),r.isMovedNodeIntoAddedNode(E)&&(E[Jd]=!0)}return!1}return r.isUselessNode(E)?!1:(r.markAsRemovedNode(E),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Po={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},We=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Uc(e){if(s.shadowRootFilters.length>0&&ri(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Po)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,$t(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,Po)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(os.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Uc(document),this.shadowRootObserver=new Ms(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,J(this.shadowRootObserver.shadowRoots,n=>{this.Uc(n)}))}static disconnect(e,i){var n,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.S=e,this.Ed=i;let n=er(a=>e(a,this),!0);this.S=$e("DocumentMutationObserver:callback",a=>{J(a,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?eu(i,n):i!=null?i:n}observe(){s.observe(this.S,this.Ed)}disconnect(){s.disconnect(this.S,this.Ed)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{ie.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{J(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Uc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,at([L()],r.prototype,"observe",null),at([L()],r.prototype,"disconnect",null),r})(),op=(()=>{class s{constructor(t){this.S=t,this.Ky=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.S({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"&&this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}))},this.S=e=>$t(()=>t(e)),this.Sd=new En(e=>$t(async()=>{await Qa(),this.Ky(e)})),"adoptedStyleSheets"in Document.prototype&&(this.vd=new Xd(t))}observe(){var t;this.P=new We(e=>this.Jy(e),(e,i)=>{i==="added"&&this.Qy(e)}),this.P.observe(),this.Sd.observe(),(t=this.vd)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.P)===null||t===void 0||t.disconnect(),this.Sd.disconnect(),(e=this.vd)===null||e===void 0||e.disconnect()}Jy(t){let e=Kd(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ct.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:ct.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ut.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.S(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.S(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.S(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ni(t.addedNodes)};this.S(a)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let a={type:"nodesRemoved",target:t.target,nodes:Ue(t.removedNodes,c=>c)};this.S(a)}}Qy(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.S(e)}}return at([L()],s.prototype,"processAttributeChanged",null),at([L()],s.prototype,"processCharacterDataChanged",null),at([L()],s.prototype,"processChildListChanged",null),s})(),ap=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),cp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),lp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),hp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),up=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),dp=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let a=e[n];i[n]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&Sa(t)&&(i[n].value=Ya(t))}return i}}return s})(),Oo={workTime:40,async:!0,initialDOM:!0};var ti=csSymbol("InitialDom"),No=csSymbol.for("ignoreNextSerialization");function Za(s){return s[No]?(delete s[No],!0):!1}function pp(s=Oo){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Oo.workTime);let n=$e("serialize:callback",y=>e(y)),a=new Os,c=(y,E)=>{y.hasChildNodes()&&a.push({node:y,serializedNode:E});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let T=E.shadowRoot=ei(v);s.async&&s.initialDOM&&G.setProperty(v,ti,!0),c(v,T)}},l,d=!0,g=8,u=$e("work",()=>{var y;if(d)l=ei(t),s.async&&s.initialDOM&&G.setProperty(t,ti,!0),c(t,l),d=!1;else if(a.isEmpty)return;let E=mp(100);for(;!a.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--g<=0&&csSetTimeout(u);return}let{node:v,serializedNode:T}=a.pop(),M=(y=T.children)!==null&&y!==void 0?y:[];if(Xi(v))continue;let R=0;for(let b=csNodefirstChild.apply(v);b;b=csNodenextSibling.apply(b)){if(Za(b))continue;let x=ei(b);s.async&&s.initialDOM&&G.setProperty(b,ti,!0),M[R++]=x,c(b,x)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let y=0;y<g;y++)csSetTimeout(u,1)}}function fp(s){let r=ei(s),t=r;if(Xi(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Za(n)||(t.children[e++]=Xr(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Xr(i)),r}var Xr=cs(fp,"serializeSync");function ei(s){let r,t;switch(s.nodeType){case 1:t=r=new ws(s),r.attributes=yp(s);break;case 3:t=new Ka(s);break;case 4:t=new ap(s);break;case 8:t=new cp(s);break;case 10:t=new lp(s);break;case 9:t=new hp(s);break;case 11:t=new up(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function gp(){ti=csSymbol("InitialDom")}function mp(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=performance.now();return{started:t,elapsed(){return++r%s===0&&(t=performance.now()),t-this.started}}}function yp(s){return Xi(s)?[]:dp.create(s)}var ne=(()=>{class s{constructor(){this.re=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:O.now(),t.timestamp==null&&(t.timestamp=O.now()),csArray.prototype.forEach.call(this.re,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.re=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{let e=csArray.prototype.indexOf.call(this.re,t);csArray.prototype.splice.call(this.re,e,1)}}}return s})(),Ep=pp(),Sp=(()=>{class s extends ne{constructor(){super(...arguments),this.So=!1}onStart(){this.So=!0,this.S=Yd(this.Zy,this),this.F=new op(this.S),this.F.observe();let t=ie.mutations.initialDOM.asyncMeasure(),e=()=>{this.So=!1,gp(),t()};this.produceEvent(new yn(i=>Ep(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.So=!1,(t=this.S)===null||t===void 0||t.cancel(),(e=this.F)===null||e===void 0||e.disconnect()}ne(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=et(e.target),i.targetProps=G.getProperties(e.target)),[e,i]}Zy(t){if(!this.tE(t))switch(t.type){case"attributeChanged":{let[e,i]=this.ne(t.type,t);i.attribute=e.attribute,i.isSvg=Ps(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Ws(e.target),i.linkRel=ya(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Ws(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.ne(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?Ws(e.target.parentElement):null,i.parentProps=e.target.parentElement?G.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.ne(t.type,t);i.targetLocalName=nt(e.target)?Ws(e.target):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.previousSibling=e.previousSibling?et(e.previousSibling):null,ie.mutations.serializedMutations.measure(()=>{i.nodes=Ue(e.nodes,Xr)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.ne(t.type,t);i.previousSibling=e.previousSibling?et(e.previousSibling):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.nodesIds=Ue(e.nodes,et),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.ne(t.type,t);i.nodesIds=Ue(e.nodes,et),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.ne(t.type,t);i.shadowRoot=ei(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.ne(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.ne(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.ne(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.ne(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.ne(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.ne(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.ne(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.ne(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}}}vo(t){return this.So&&!G.getProperty(t,ti)}tE(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.vo(t.target)||N.isMaskedElement(t.target)||N.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.vo(e)||N.isMaskedElement(e)||N.isMaskedElementChild(e))}case"attributeChanged":return this.vo(t.target)||N.isMaskedElementChild(t.target)||N.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":return this.vo(t.target)||N.isMaskedElementChild(t.target);default:return!1}}}return s})(),fi=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),ks=(()=>{class s{constructor(){this.re=[]}start(){}stop(){this.re.length=0,this.re=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.re;csSetTimeout(()=>{let n=$e("Processor:processEvent",a=>this.processEvent(a))(t);n!=null&&csArray.prototype.forEach.call(e,a=>a(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.re,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{this.re=csArray.prototype.filter.call(this.re,e=>e!==t)}}emitEvent(t){$t(()=>csArray.prototype.forEach.call(this.re,e=>e(t)))}}return s.pendingEvents=0,s})(),It=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(n){return csString.prototype.replace.call(n,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(n,a,c){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(n,a,c);let l=new csRegExp(t(a),"g");return csString.prototype.replace.call(n,l,c)}r.stringReplaceAll=e;function i(n,a,c=""){return n.length<=a?n:csString.prototype.slice.call(n,0,a-c.length)+c}r.truncate=i}(s||(s={})),s})(),Mo=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.eE(t);if(!n)return null;let a=await s._d(n),c=Bt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let a=await s.sE(t,n),c=je(t),l=a.get(c);if(!l)return null;let d={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(d.nestedResources=[],a.forEach(g=>{g&&csArray.prototype.push.call(d.nestedResources,{hash:g.hash,data:g.data})})),d}static async _d(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.xr,e);return zr(i)}static async eE(t){let e;if(!Bt(t))e=await(await window.fetch(t)).blob();else{let i=io(t);if(!i)return null;e=i}return e}static async sE(t,e){let i=new Map,n=je(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Bt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=Zs(l.data));let u=!1,y=!1;for(let E of l.nestedResources){let v=Bt(E)?E:l.resourceAbsolutePath?xu(E,l.resourceAbsolutePath):je(E),T=i.get(v);if(T!==void 0){if(T!==null){let R=s.iE(T,E);l.data=It.stringReplaceAll(l.data,E,R)}continue}xe(c,R=>R.resourceAbsolutePath===v)!==void 0||(u=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:v}))}if(!u){let E=await s.rE(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let u;if(!Bt(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let E=io(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}u=E}let y=await s._d(u);i.set(l.resourceAbsolutePath,{hash:y,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static iE(t,e){let i=`cs://resources/${t.hash}`;return Bt(e)||(i+=`?${s.jc}=${e}`),i}static async rE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.xr,i);return{data:e,hash:zr(n)}}}return s.xr="SHA-256",s.jc="original-resource-name",s})(),Kr=(()=>{class s extends ks{constructor(){super(),this._o="cssrm://",this.oe=0,this.ps=!1}isListening(t){return!s.isSupported()||!fi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.nE(t);break;case"attributeChanged":this.oE(t);break;case"characterDataChanged":this.aE(t);break}return t}disableOnlineAssets(){this.ps=!1}enableOnlineAssets(){this.ps=!0}isOnlineAssetsActivated(){return this.ps}nE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)G.traverse(i,(n,a)=>{if(n.nodeType===3&&a){this.cE(n,a.localName);return}if(!ws.isElement(n))return;let c=xe(n.attributes,l=>l.name==="style");if(c&&(c.value=this.wo(c.value)),this.lE(n)||this.hE(n,a)){let l=xe(n.attributes,g=>g.name==="src");l&&l.value&&(l.value=this.wd(l.value));let d=xe(n.attributes,g=>g.name==="srcset");if(d){d.value=this.bd(d.value);return}}if(this.uE(n)&&this.ps){let l=xe(n.attributes,d=>d.name==="href");if(!l||!l.value)return;this.oe++,this.ji(je(l.value),this.oe,!0),this.dE(n,l,this.oe)}})}dE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this._o+i}cE(t,e){if(!t||e!=="style")return;let i=this.wo(t.data);i!==null&&(t.data=i)}aE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.wo(t.newValue);e!==null&&(t.newValue=e)}oE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.wo(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.wd(t.newValue)),i&&(t.newValue=this.bd(t.newValue)))}wd(t){return Bt(t)||this.ps?(this.oe++,this.ji(t,this.oe,!1,O.now()),this._o+this.oe):t}bd(t){if(!this.ps)return t;let e=t,i=mn(t),n=O.now();for(let a of i)this.oe++,this.ji(je(a),this.oe,!1,n),e=csString.prototype.replace.call(e,a,this._o+this.oe);return e}wo(t){let e=Zs(t),i=t,n=O.now();for(let a of e){let c=Bt(a);if(!(c||this.ps)||this.pE(a))continue;this.oe++,i=csString.prototype.replace.call(i,a,this._o+this.oe);let l=Ud(a);c?this.ji(a,this.oe,!1,n):this.ps&&(l?this.ji(a,this.oe,!0,n):this.ji(je(a),this.oe,!1,n))}return i}ji(t,e,i,n=O.now()){let a=i?Mo.toCSSStaticResourceEvent:Mo.toStaticResourceEvent,c=new yn(async l=>{try{let d=await a(t,e,n,this.ps);l(d||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(d){l({type:"warning",message:d})}});this.emitEvent(c)}lE(t){return t.localName==="img"}hE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}uE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return xa()&&Nu()&&!!csArray.from}pE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return de([kt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ft=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),tc=(()=>{class s{constructor(){this.N=!1,this.Ms=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Jt(Ft.Hidden):this.Jt(Ft.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Jt(Ft.PagehideHidden):this.Jt(Ft.PagehideVisible);case"blur":return this.Jt(Ft.Blur);case"navigate":return this.fE(t)?this.Jt(Ft.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.N||(this.N=!0,this.Hc(),this.gE(),this.mE(),oo()&&this.yE())}stop(){this.N&&(this.N=!1,this.Bc(),this.EE(),this.SE(),oo()&&this.vE())}onEvent(t){this.Jt=t}yE(){window.navigation.addEventListener("navigate",this.Ms)}vE(){window.navigation.removeEventListener("navigate",this.Ms)}Hc(){document.addEventListener("visibilitychange",this.Ms)}Bc(){document.removeEventListener("visibilitychange",this.Ms)}gE(){window.addEventListener("pagehide",this.Ms)}EE(){window.removeEventListener("pagehide",this.Ms)}mE(){window.addEventListener("blur",this.Ms)}SE(){window.removeEventListener("blur",this.Ms)}fE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),Tt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),vp=(()=>{class s{constructor(t,e,i=[]){this.Hi=t,this.Fc=e,this._E=i,this.bo=null,this._t=Tt.Active,this.Q=[]}reset(){this.bo=null,this.Q=[],this._t=Tt.Active}disconnect(){this._t=Tt.Stopped}wE(){this.Fc(Tt.Paused),this._t=Tt.Paused,csSetTimeout(()=>{this._t===Tt.Paused&&this.$c()},s.STOP_TIMEOUT)}bE(){this.Fc(Tt.Active),this._t=Tt.Active,J(this.Q,this.Hi),this.Q=[]}$c(){this.Q=[],this.Fc(Tt.Stopped),this._t=Tt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.bo=t.date,this._t!==Tt.Active)){this.bE(),this.Hi(t);return}if(this.AE(t)){this.Hi(t);return}switch(this._t){case Tt.Active:if(this.TE(t,e)){this.wE(),csArray.prototype.push.call(this.Q,t);return}this.Hi(t);break;case Tt.Paused:csArray.prototype.push.call(this.Q,t);break;case Tt.Stopped:break}}TE(t,e){return!e.isUserEvent&&this.bo!==null&&t.date-this.bo>s.INACTIVITY_TIMEOUT}AE(t){return csArray.prototype.indexOf.call(this._E,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),_p=2e3,wp=(()=>{class s extends Dt{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,T,M=[],R,b,x,w,k){super(),this.h=t,this.j=e,this.RE=i,this.xe=n,this.X=a,this.w=c,this.ae=l,this.ut=d,this.Ie=g,this.tt=u,this.V=y,this.Ct=E,this.yt=v,this.Pe=T,this.Oe=M,this.Ad=R,this.xt=b,this.Vr=x,this.Ge=w,this.We=k,this.ks=0,this.Ds=new Ga,this.Bi={allowFromQuotaService:!0,allowFromSerialization:!0},this.Td=Qi(()=>{this.j.eventsCount()>0&&this.Rd()},_p),this.fs=U=>this.processBrowserEvent(U),this.Ur=U=>this.It(U),this.Cd=0,this.Ao=0,this.Ve=new tc,this.zc=!1,this.Id=50*1024,this.fi=!1,this.jr=!1,this.gi=[],this.To=new vp(U=>this.G(U),U=>{switch(U){case Tt.Active:this.CE();break;case Tt.Stopped:this.IE();break}},[D.RESOURCE_HASHES,D.TEXT_VISIBILITY]),this.Pd=U=>{this.Ct.removeBatchInProgress(`${U.params.sn}.${U.params.pn}.${U.params.ri}`)}}init(){this.qc(),this.V.onLoad(this.Pd),this.V.onError(this.Pd)}CE(){csArray.prototype.forEach.call(this.Ad,t=>t.start())}IE(){csArray.prototype.forEach.call(this.Ad,t=>t.stopForInactivity())}qc(){var t,e,i;this.Pe.onEvent(this.fs,this.Ur),(t=this.tt)===null||t===void 0||t.onInputNodeToEncrypt(this.Ur),(e=this.tt)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.Od(n)}),(i=this.tt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.fs),this.Ve.onEvent(n=>{if(csSetTimeout(()=>this.mi("page-state",n)),n!==Ft.Visible){if(n===Ft.Blur)return this.Nd();if(!this.zc)return this.zc=!0,csSetTimeout(()=>{this.zc=!1}),n===Ft.Hidden?this.Nd():this.PE()}})}isRecording(){return this.w.hasValidSession()&&this.isStarted}Nd(){if(!this.canSendEvents())return;this.Pe.flush(),this.Ct.saveBatchesInProgress(),J(this.Oe,a=>{var c,l;return J((l=(c=a.getPendingEvents)===null||c===void 0?void 0:c.call(a))!==null&&l!==void 0?l:[],d=>this.j.addEvent(d))});let t=this.j.getEvents();if(t.length===0)return;this.mi("pending-events",this.Pe.pendingEvents);let e=this.V.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.xe.getCurrentIndex();e.ri=i.toString(),this.yt.removeQueryParams(),this.yt.setQueryParams(e),this.Ao=t[t.length-1].date;let n=this.j.stringifyEvents();if(n.length>this.Id){let a=this.Md();if(a.length>0){let c=Rs(a);this.yt.send(c)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}if(this.j.eventsCount()>0){e.ri=this.xe.getCurrentIndex().toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(n)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:n}),this.xe.increment();this.yt.removeQueryParams(),this.j.clearEvents()}PE(){if(!this.canSendEvents())return;this.Pe.flush();let t=this.V.getQueryParams();this.Ct.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.yt.removeQueryParams(),J(this.Oe,n=>{var a,c;return J((c=(a=n.getPendingEvents)===null||a===void 0?void 0:a.call(n))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();return}this.mi("pending-events",this.Pe.pendingEvents),this.Ao=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.yt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Id){let n=this.Md();if(n.length>0){let a=Rs(n);this.yt.send(a)||this.Ct.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,delete t.rst,delete t.ri,this.yt.removeQueryParams(),this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.xe.getCurrentIndex();t.ri=a.toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(i)||(this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.xe.increment());this.yt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!0}canSendEvents(){return this.Bi.allowFromQuotaService&&this.Bi.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ae&&this.Ge){(e=this.ae)===null||e===void 0||e.anonymize(t);let i=this.Ge.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.fs(i)}}onIframeCustomError(t){if(this.We){let e=this.We.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.fs(e)}}onIframeDetailedApiError(t){this.kd(t)}onIframeRecordingUserEvent(t){for(let e of t)this.It(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.X.isCurrentPageviewValid()&&this.To.pushEvent(t,{isUserEvent:!1})}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.To.pushEvent(t,{isUserEvent:!0})}G(t){ie.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.Td(),this.Dd(t)}Dd(t){this.h.emitDebugEvents&&this.Ds.emit("recordingEvent",{...t,typeName:D[t.type]})}onStart(){var t;this.mi("tag-version","15.105.5"),this.mi("page-state",document.visibilityState),this.To.reset(),this.Ve.start(),this.initStates(),this.Pe.start(),this.ut&&this.Ie&&this.ut.subscribe(s.Mt,e=>this.kd(e),{detailedEvent:!0}),this.h.emitDebugEvents&&this.Ds.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.gi,e=>this.Ld(e)),this.gi=[],this.fi&&((t=this.xt)===null||t===void 0||t.enableOnlineAssets(),this.fi=!1)}onStop(){var t;this.Ve.stop(),this.ut&&this.ut.unsubscribe(s.Mt),this.Pe.stop(),this.To.disconnect(),(t=this.xt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Pe.flush(),this.Td.cancel(),this.pushEvents(),this.V.removeQueryParams()}initStates(){this.Cd=O.now(),this.xe.reset(),this.ks=0,this.V.setQueryParams(this.RE.getRequestParameters())}pushEvents(){J(this.Oe,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.Rd():this.j.clearEvents())}Rd(){if(!this.canSendEvents())return;let t=this.j.getEvents();this.Ao=t[t.length-1].date;let e=this.xe.getCurrentIndex();this.V.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.V.getQueryParams();this.Ct.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.V.getQueryParams(),t),this.V.send(t),this.xe.increment(),this.j.clearEvents(),this.xd&&this.xd()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Dd(t)}kd(t){if(this.Vr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Vr.truncate(t),this.tt){this.tt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Od(t)}Od(t){if(this.ks<s.OE){let e={type:D.API_ERROR,date:O.now(),args:[this.Ie.anonymize(t)]};this.fs(e),this.ks=this.ks+1,rt.counters.networkRequests.count("collected")}}NE(t){t===He.ETR_SESSION?this.V.setQueryParams({[s.ME]:s.Vd}):t===He.ETR_PAGE&&this.V.setQueryParams({[s.kE]:s.Vd})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Ge)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.fs(i)}onCustomErrorEvent(t){var e;let i=(e=this.We)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.fs(i)}onPageEvent(t){this.Ud(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.h.encryptionPublicKeyId};(e=this.tt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Ld({eventName:t,eventType:e}):csArray.prototype.push.call(this.gi,{eventName:t,eventType:e})}Ld(t){this.NE(t.eventType),this.Ud(t.eventName),this.pushEvents()}Ud(t){let e={type:D.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.DE)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:D.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:D.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.mi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.mi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.jr=!0}getStaticResourceManagerStatus(){return this.xt?{isStarted:this.h.useStaticResourceManager&&Kr.isSupported(),onlineAssets:{activated:this.xt.isOnlineAssetsActivated(),enabledOnNextPageview:this.jr}}:null}resetOnlineAssetsOnPageview(){this.fi=!1,this.jr=!1}updateOnlineAssetsOnPageview(){this.xt&&this.jr&&(this.fi=!0,this.jr=!1)}onRecordingRequestSent(t){this.xd=t}getRecordingStartTimestamp(){return this.Cd.toString()}getRecordingLastEventTimestamp(){return this.Ao.toString()}onOptOut(){J(this.Oe,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}mi(t,e){if(!this.h.emitRecordInfoEvents)return;let i={date:O.now(),type:D.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}Md(){return this.j.extractEvents(D.API_ERROR,D.JAVASCRIPT_ERROR,D.CUSTOM_ERROR,D.TEXT_VISIBILITY,D.POINTER_DOWN)}}return s.Mt="RecordingService",s.DE=255,s.OE=20,s.kE="etrp",s.ME="etrs",s.Vd="1",F([kt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),bp=(()=>{class s extends Dt{constructor(t,e,i){super(),this.Wt=t,this.yt=e,this.V=i,this.Gc=!1,this.Hr={},this.LE=n=>{if(n.length!==0)for(let a of n){let{metadata:c,events:l}=a;this.xE(c.rt)&&this.V.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Hr={}}onStop(){}recover(){this.Wt.recover(this.LE)}addBatchInProgress(t,e,i){this.Hr[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Hr[t]}blockSendingLastMessage(){this.Gc=!1}allowSendingLastMessage(){this.Gc=!0}sendLastMessageBeacon(){if(this.Gc){let{ri:t,rst:e,let:i,...n}=this.V.getQueryParams();n.hlm="true",this.yt.setQueryParams(n),this.yt.send()}}xE(t){return!!t&&csString.prototype.indexOf.call(t,I.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Hr),t=>{let{metadata:e,events:i}=this.Hr[t];this.Wt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Wt.save(t)}}return F([L("RecordingRecovery")],s.prototype,"recover",null),s})(),ai=(()=>{class s{constructor(...t){this.jd=t}addProvider(t){csArray.prototype.push.call(this.jd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.jd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Ap=(()=>{class s{constructor(t,e){this.Rt=t,this.I=e,this.Ls=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.O=t}start(){this.hi(),this.triggerInitialEvents()}stop(){this.pi()}hi(){csArray.prototype.forEach.call(this.Ls,t=>Pt(t))}pi(){csArray.prototype.forEach.call(this.Ls,t=>Ot(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:D.HASH_CHANGE,args:[this.I.anonymizePII(this.Rt.href)],date:O.now()};this.O(t)}visibilityChangeListener(){let t={type:D.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.O(t)}}return F([L("hashChange")],s.prototype,"hashChangeListener",null),F([L("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Tp=(()=>{class s{constructor(){}onScannedAsset(t){this.Ro=t}scanCssString(t){this.Wc(Zs(t))}scanElement(t,e){N.getMaskedElementDetails(t).state!==N.MaskedElementState.NotMasked||e&&N.isMaskedAttribute(t,e)||(sn(t)?this.VE(t):Sa(t)?this.UE(t,e):(this.jE(t,e),this.HE(t,e),this.BE(t,e)))}UE(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:Ya(t)};this.Ro({type:"stylesheet",asset:a})}}VE(t){var e;let i=new Set;if(t.textContent)for(let a of Zs(t.textContent))i.add(a);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||j.error(a.message)}if(n)for(let a=0;a<n.length;a++){let c=n.item(a).cssText;for(let l of Zs(c))i.add(l)}this.Wc(Ns(i))}Yc(t){return!this.FE(t)&&!Bt(t)&&!Vd(t)}jE(t,e){if(vh(t)||Sh(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Yc(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Ro({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.$E(t.srcset)}}HE(t,e){if(t.nodeType!==1){ct.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}$E(t){this.Wc(mn(t))}BE(t,e){if((Ah(t)||Th(t)||Rh(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Yc(i)){let n={assetId:je(i),assetRawPath:i,assetBasePath:window.location.href};this.Ro({type:"asset",asset:n})}}}Wc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Yc(e)),e=>({rawUrl:e,absoluteUrl:je(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Ro({type:"asset",asset:i})})}FE(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Rp=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.xs=[],this.Q=[],this.zE=t}next(t){this.Q.length===this.zE&&csArray.prototype.shift.call(this.Q),csArray.prototype.push.call(this.Q,t),this.Q.length===1&&csSetTimeout(()=>this.clear());for(let e of this.xs)e(t)}subscribe(t){if(xe(this.xs,i=>t===i))return()=>{this.xs=csArray.prototype.filter.call(this.xs,i=>i!==t)};csArray.prototype.push.call(this.xs,t);for(let i of this.Q)t(i);return()=>{this.xs=csArray.prototype.filter.call(this.xs,i=>i!==t)}}clear(){this.Q=[]}hasObservers(){return this.xs.length>0}}return s})(),ec=(()=>{var s;class r{constructor(e){this.S=e}observe(){this.qE=s.Br.subscribe(e=>this.S(e)),s.Co||(s.Co=!0,s.Fr.observe(),Yt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.gs.add(i),s.Br.next(i)}))}disconnect(){s.Co&&(this.qE(),s.Br.hasObservers()||(s.Co=!1,s.Fr.disconnect(),s.Br.clear(),s.gs.clear()))}}return s=r,r.gs=tr(),r.Br=new Rp,r.GE=cs(t=>{$t(()=>{for(let e of t)e.type==="childList"&&J(e.addedNodes,i=>{Yt(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.gs.has(a)||(s.gs.add(a),s.Br.next(a))})})})},"ElementObserver.findAllElements"),r.Co=!1,r.Fr=new We(s.GE),at([L()],r.prototype,"observe",null),at([L()],r.prototype,"disconnect",null),r})(),Cp=1,Ip=0,sc=(()=>{class s{constructor(t,e=Cp,i=Ip){this.WE=t,this.YE=e,this.XE=i,this.Ue=new Os,this.Le=!1,this.Xc=0,this.Hd=()=>{for(this.Xc=0;this.Ue.length;){if(this.Xc>=this.YE){csSetTimeout(this.Hd,this.XE);return}let n=O.elapsed(),a=this.Ue.pop();if(!a)break;this.runTask(a);let c=O.elapsed()-n;this.Xc+=c}this.Le=!1}}schedule(t,e=!1){if(!this.WE||e){t();return}ie.general.pendingTasks.increase(),this.Ue.push(t),this.KE()}KE(){this.Le||(this.Le=!0,csSetTimeout(()=>{this.Hd()}))}runTask(t){ie.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ue.forEach(t=>{this.runTask(t)}),this.Ue.clear()}clearQueue(){ie.general.pendingTasks.clear(),ie.mutations.pendingMutations.clear(),this.Ue.clear()}isEmpty(){return this.Ue.length===0}}return F([L("TaskScheduler"),kt("runTask")],s.prototype,"runTask",null),F([kt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Pp=(()=>{class s{constructor(){this.B=!1,this.Bd=new En(t=>t.type==="cssRuleInserted"&&this.JE(t)),this.QE=er(t=>{this.B&&t.length>0&&this.C.schedule(()=>J(t,e=>this.$r.scanElement(e)))}),this.ZE=({type:t,asset:e})=>{var i,n,a;t==="stylesheet"&&((i=this.tS)===null||i===void 0||i.call(this,e)),(n=this.eS)===null||n===void 0||n.call(this,e);let c={date:O.now(),type:D.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.O)===null||a===void 0||a.call(this,c)},this.C=new sc(!0,30,0),this.zr=new ec(t=>this.sS(t)),this.P=new We(t=>this.Io(t)),this.$r=new Tp,this.$r.onScannedAsset(this.ZE)}onEvent(t){this.O=t}onAsset(t){this.eS=t}onStyleSheetFound(t){this.tS=t}start(){this.B||(this.B=!0,this.Bd.observe(),this.zr.observe(),this.P.observe())}stop(){this.B&&(this.Bd.disconnect(),this.zr.disconnect(),this.P.disconnect(),this.B=!1)}JE(t){!t.rule||!this.B||this.$r.scanCssString(t.rule)}sS(t){this.B&&N.getMaskedElementDetails(t).state===N.MaskedElementState.NotMasked&&this.QE.push(t)}Io(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.$r.scanElement(e.target,e.attributeName);break;case"characterData":this.iS(e.target);break;case"childList":}})}iS(t){Bi(t)&&csNodeparentNode.apply(t)&&sn(csNodeparentNode.apply(t))&&this.$r.scanCssString(t.data)}}return s})(),ic=(()=>{class s{constructor(t){this.Fd=[],this.$d=[],this.qt={},this.Gt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.qt[e]}):this.qt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Fd,t)}onBeaconFailure(t){csArray.prototype.push.call(this.$d,t)}send(t){let e=oi.toQuery({...this.qt,ct:Ji.UNCOMPRESSED}),i=this.rS(e,t);return i?csArray.prototype.forEach.call(this.Fd,n=>n()):csArray.prototype.forEach.call(this.$d,n=>n(this.qt)),i}rS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Gt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Gt}?${t}`,e||"")}}return s})(),Op=(()=>{class s{constructor(t){this.Po={},this.ve=new gn(t)}save({key:t,metadata:e,events:i}){this.ve.isThresholdReached()||(this.ve.addString(t),typeof i=="string"?this.ve.addString(i):this.ve.addArrayBuffer(i),!this.ve.isThresholdReached()&&(this.Po[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.nS(),i=>{let n=this.Po[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.oS(i))}),e.length!==0&&(t(e),this.ve.reset())}nS(){return Object.keys(this.Po)}oS(t){delete this.Po[t]}}return s})(),Ce=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Np=(()=>{class s{constructor(t,e,i){this.Fi=t,this.aS=i,this.yi=Ce.NOT_STARTED,this.Oo=[],this.Kc=0,this.cS=self.origin,this._e=typeof window=="object"?"":"worker-",this.ve=new gn(e),this.Jc()}async Jc(){await this.zd(),this.yi===Ce.READY?this.lS():this.aS(this.Oo)}lS(){csArray.prototype.forEach.call(this.Oo,t=>{this.save(t)}),this.Oo=[]}async save(t){try{if(this.yi===Ce.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Oo,t);return}if(this.yi!==Ce.READY||this.ve.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.ve.addString(e),typeof n=="string"?this.ve.addString(n):this.ve.addArrayBuffer(n),this.ve.isThresholdReached())return;await this.Xt.put(`${this.cS}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.Xt&&(await this.zd(),this.yi!==Ce.READY)||this.hS(t)}async zd(){try{this.yi=Ce.OPEN_IN_PROGRESS,this.Xt=await self.caches.open(`${this._e}${this.Fi}`),this.yi=Ce.READY}catch{this.yi=Ce.OPEN_FAILED}}async hS(t){try{if(this.Kc++,this.Kc>1)return;let e=await this.Xt.keys();if(e.length===0)return;let i=await this.Xt.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((g,u)=>{l[u]=g}),delete l["content-type"];let d=l.datatype;return delete l.datatype,d==="json"||d==="base64"?c.text().then(g=>({metadata:l,events:g})):c.arrayBuffer().then(g=>({metadata:l,events:g}))}),a=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.Xt.delete(c))),t(a),this.ve.reset()}catch{}finally{this.Kc--}}}return s})(),Mp=(()=>{class s{constructor(t){try{this.uS(t)}catch{this.Qc()}}uS(t){self.caches?this.dS(t):this.Qc()}save(t){this.Mo.save(t)}recover(t){this.Mo.recover(t)}dS(t){this.Mo=new Np(t,s.qd,e=>{this.Qc(e)})}Qc(t){this.Mo=new Op(s.qd),t&&csArray.prototype.forEach.call(t,e=>{this.Mo.save(e)})}}return s.qd=1024*1024*16,s})(),Tr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var kp=(()=>{class s extends ks{isListening(t){return fi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof ws){let c=N.getMaskedAttributeDetails(n);n.attributes=this.Do(n,c)}if(N.getMaskedElementDetails(n).state===N.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}G.traverse(n,c=>{if(c instanceof ws){let l=N.getMaskedAttributeDetails(c);c.attributes=this.Do(c,l);let d=N.getMaskedElementDetails(c);d.state===N.MaskedElementState.Parent&&(this.tl(c,d),e++)}})}return e>0&&rt.counters.sensitiveElements.count("masked-elements",e),t}Do(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}tl(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),ws.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return de([kt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),he=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return G.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){G.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){G.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Dp=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Lp="\uFF41",xp=/[^\s]/g,Vp="a";function Rr(s){let r=csString.prototype.replace.call(s,Dp,Lp);return csString.prototype.replace.call(r,xp,Vp)}var Up=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],rc=s=>{let r=new Set(Up);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},jp=["svg","slot"],Hp=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(jp,s)>-1,nc={href:new Set(["a"]),src:new Set(["iframe"])},Bp=s=>nc.hasOwnProperty(s),Fp=(s,r,t)=>{var e;return((e=nc[r])===null||e===void 0?void 0:e.has(s))&&!Bt(t)},$p=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value",zp=(()=>{class s{constructor(t,e,i,n=null){this.Ye=t,this.vS=e,this.I=i,this.Lo=n,this._S=rc(this.vS)}sanitize(t,e){return G.traverse(t,(i,n)=>{if(i.anonymized=this.Ye,i.nodeType===3){let{anonymizedValue:a,withAnonymization:c}=this.getAnonymizedValue(i.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?G.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=c,i.data=a;return}if(ws.isElement(i))return this.wS(i);if(i.nodeType===4){i.data=this.Ye?Rr(i.data):this.I.checkAndAnonymizePII(i.data,this.Lo);return}}),t}setAnonymization(t){this.Ye=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[he.ANONYMIZED_TEXT_STATUS_PROP])===he.WHITELISTED_STATUS;return this.Ye&&!n?{anonymizedValue:Rr(t),withAnonymization:!0}:{anonymizedValue:this.I.checkAndAnonymizePII(t,this.Lo),withAnonymization:!1}}wS(t){if(G.getProperty(t,"SVG"))return;let e=xe(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Ye,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){return this.bS(t,e,n)?i:Bp(e)?Fp(t,e,i)?this.I.anonymizePII(i):i:this.Ye&&$p(t,e,n)?Rr(i):this.Ye?"":this.I.checkAndAnonymizePII(i,null)}bS(t,e,i){return Hp(t,e,i)||this._S.has(e)}}return s})();var qp=()=>(s,r,t)=>{t.value=Wp(t.value)},Gp=csQueueMicrotask||csSetTimeout;function Wp(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let a=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,a[r])return;a[r]=!0,Gp(()=>{a[r]=!1,s.apply(a,t)})};return i.oncePerTickSymbol=r,i}qp.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var Yp=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return G.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){G.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){G.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),Me=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return G.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){G.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){G.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var ko=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Xp=(()=>{class s extends ks{constructor(t,e,i,n=null){super(),this.I=i,this.Lo=n,this.jo=new zp(t,e,i,n)}setAnonymization(t){this.jo.setAnonymization(t)}isListening(t){return ko.isTextVisibilityEvent(t)||fi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(ko.isTextVisibilityEvent(t))return t.text=this.I.checkAndAnonymizePII(t.text,this.Lo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ol(t);break;case"attributeChanged":this.PS(t);break;case"characterDataChanged":this.OS(t);break}return t}ol(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.jo.sanitize(n,i)}PS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.jo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}OS(t){t.newValue=this.jo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return de([kt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Kp=(()=>{class s extends ks{constructor(t){super(),this.K=t}isListening(t){return fi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.K.anonymizeUrl(t.initialDOM.baseURI)),t}}return de([kt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Cr="textarea",Jp=(()=>{class s extends ks{isListening(t){return fi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.MS(t);break;case"nodesAdded":this.kS(t);break;case"characterDataChanged":this.DS(t);break}return t}MS(t){G.traverse(t.initialDOM,(e,i)=>{(this.Qd(e,i)||this.Zd(e))&&(e.data=this.al(e.data))})}kS(t){for(let e of t.nodes)G.traverse(e,(i,n)=>{(this.LS(i,n,t)||this.Zd(i))&&(i.data=this.al(i.data))})}DS(t){var e;(t.parentLocalName===Cr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.al(t.newValue))}al(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}LS(t,e,i){return this.xS(t,i)||this.Qd(t,e)}xS(t,e){return t.nodeType===3&&e.targetLocalName===Cr}Qd(t,e){return t.nodeType===3&&Z(e)&&e.localName===Cr}Zd(t){return t.nodeType===3&&Me.isEditableNode(t)}}return de([kt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Qp=(()=>{class s{constructor(t){this.S=t,this.Vt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.S=t}observe(){Pt(this.Vt),this.Tc()}Tc(){this.resizeListener()}disconnect(){Ot(this.Vt)}resizeListener(){let t={width:ft.windowWidth(),height:ft.windowHeight()};this.S(t)}}return at([L("resize")],s.prototype,"resizeListener",null),s})(),Oe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Pi=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Oi=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Zp=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=bt.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in bt;function e(){return Oe.LANDSCAPE}function i(){var c;switch((c=bt.screen.orientation)===null||c===void 0?void 0:c.type){case Pi.PORTRAIT_PRIMARY:case Pi.PORTRAIT_SECONDARY:return Oe.PORTRAIT;case Pi.LANDSCAPE_PRIMARY:case Pi.LANDSCAPE_SECONDARY:return Oe.LANDSCAPE;default:return Oe.PORTRAIT}}function n(){switch(window.orientation){case Oi.PORTRAIT:case Oi.PORTRAIT_REVERSE:return Oe.PORTRAIT;case Oi.LANDSCAPE:case Oi.LANDSCAPE_REVERSE:return Oe.LANDSCAPE;default:return Oe.PORTRAIT}}function a(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=a}(s||(s={})),s})(),tf=(()=>{class s extends ne{constructor(){super(...arguments),this.cl=null,this.ll=null,this.js=new Qp(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Zp.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.VS(t);if(e!==this.cl||i!==this.ll){this.cl=e,this.ll=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}VS(t){let e,i,n=ft.screenWidth(),a=ft.screenHeight();return t===Oe.PORTRAIT?(e=n,i=a):(e=Math.max(n,a),i=Math.min(n,a)),{screenWidth:e,screenHeight:i}}onStart(){this.js.observe()}onStop(){this.cl=null,this.ll=null,this.js.disconnect()}}return s})();function ef(s){let r=csEventtarget.apply(s);return r&&nt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Is=(()=>{class s{get selectors(){return this.He===""?null:this.He}constructor(t,e={closest:!1}){this.S=t,this.Et=e,this.He="",this.Xr=tr(),this.Io=cs(i=>{if(this.He==="")return;let n=[];for(let a of Pa(i,c=>c.addedNodes)){if(!(Ih(a)||this.Et.closest&&Bi(a)))continue;let c=this.Et.closest?this.US(a,this.He):this.findMatchingElements(a,this.He);to(c,n)}n.length&&this.S(n,"added")},"SelectorObserver.processMutations"),this.jS=(i,n)=>{if(this.He===""||n!=="added")return;let a=this.findMatchingElements(i,this.He);a.length&&this.S(a,"added")},this.F=new We(this.Io,this.jS)}observe(t){this.He===""?this.F.observe():this.He+=",",this.He+=t;let e=this.findMatchingElements(document,t);for(let i of this.F.shadowRoots){let n=this.findMatchingElements(i,t);to(n,e)}e.length&&(J(e,i=>{this.Xr.add(i)}),this.S(e,"initial"))}processPendingMutations(){this.Io(this.F.takeRecords())}disconnect(){this.F.disconnect(),this.Xr.clear(),this.He=""}US(t,e){let i=[];if(Bi(t)){if(t.parentElement){let n=Gr(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Xr.has(n)===!1)}else{if(hi(t)){let n=Gr(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,a=>this.Xr.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ni(window.csquerySelectorAll[t.nodeType].call(t,e));return nt(t)&&Xt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Xr.has(n)===!1)}}return at([L()],s.prototype,"observe",null),at([L()],s.prototype,"disconnect",null),at([kt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),sf=(()=>{class s extends ne{constructor(){super(),this.tp=t=>{let e=ef(t);e&&this.ul(e,t.type)},this.ie=new Ms((t,e)=>{switch(e){case"initial":case"added":this.ep(t);break;case"removed":this.sp(t);break}}),this.U=new Is((t,e)=>{(e==="initial"||e==="added")&&this.HS(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ut.isConnected(t)&&!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.ep(document),this.ie.observe(),this.U.observe("video")}onStop(){this.sp(document),this.ie.disconnect(),this.U.disconnect()}ul(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=et(t),a={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),Yr(()=>this.produceEvent(a))}}HS(t){for(let e of t)this.ul(e,"seeked"),s.isPlaying(e)&&this.ul(e,"play")}ep(t){for(let e of["play","pause","seeked"])Pt({type:e,listener:this.tp,boundElement:t})}sp(t){for(let e of["play","pause","seeked"])Ot({type:e,listener:this.tp,boundElement:t})}}return s})();function rf(s){return s.nodeName==="SELECT"}function Sn(s){return s.nodeName==="INPUT"}function nf(s){return s.nodeName==="TEXTAREA"||Sn(s)&&!oc(s)&&!ac(s)}function oc(s){return Sn(s)&&s.type==="number"}function ac(s){return Sn(s)&&(s.type==="checkbox"||s.type==="radio")}var of=(()=>{class s extends ne{constructor(t){super(),this.tt=t,this.dl=tr(),this.$i=e=>this.inputHandler(e),this.Ei=[],this.BS(),this.FS(),this.U=new Is(e=>{for(let i of e)this.pl(i)&&$t(()=>{this.gl(i,et(i))},"low")}),this.ie=new Ms((e,i)=>{switch(i){case"initial":case"added":Pt({type:"change",listener:this.$i,boundElement:e});break;case"removed":Ot({type:"change",boundElement:e,listener:this.$i});break}})}onStart(){Pt({type:"keyup",boundElement:document,listener:this.$i}),Pt({type:"change",boundElement:document,listener:this.$i}),J(this.Ei,t=>t.activate()),this.U.observe(csArray.prototype.join.call(s.$S,",")),this.ie.observe()}onStop(){Ot({type:"keyup",boundElement:document,listener:this.$i}),Ot({type:"change",boundElement:document,listener:this.$i}),J(this.Ei,t=>t.deactivate()),this.U.disconnect(),this.ie.disconnect(),this.dl.clear()}gl(t,e){var i,n,a;if(this.dl.has(t))return;if(this.dl.add(t),rf(t)){let d={type:"InputEvent",inputType:"select",target:et(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(d);return}if(ac(t)){let d={type:"InputEvent",inputType:"checkable",target:et(t),checked:t.checked,timestamp:O.now()};this.produceEvent(d);return}let c=nf(t),l=oc(t);if(c||l){let d=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.tt)===null||n===void 0)&&n.shouldEncrypt(t)){(a=this.tt)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:d,date:O.now()});return}let g=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:et(t),value:csString.prototype.replace.call(d,/\S/g,g),timestamp:O.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=gt(t),i=et(e);!i||!this.pl(e)||ut.isConnected(e)&&$t(()=>{this.gl(e,i)},"low")}BS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}FS(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=qr(t.prototype,e,(a,c,l)=>{if(l!==c&&ut.isConnected(a)){let d=i?a.parentElement:a;this.zS(d)}});n&&csArray.prototype.push.call(this.Ei,n)}pl(t){return!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)&&(Yi(t)||nn(t)||rn(t))}zS(t){if(this.isStarted&&ut.isConnected(t)){let e=et(t);e&&this.pl(t)&&$t(()=>{this.gl(t,e)},"low")}}}return s.$S=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],de([wt()],s.prototype,"inputHandler",null),de([L()],s.prototype,"trackChanges",null),s})();var af=(()=>{class s extends ne{constructor(){super(),this.ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.qS=$e("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)N.isMaskedElement(i)||N.isMaskedElementChild(i)||Oh(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=er(this.qS);this.zr=new ec(e=>t.push(e)),this.Us=new Set}onStart(){this.ms&&this.zr.observe()}onStop(){this.Us.clear(),this.zr.disconnect()}async register(t){this.Us.has(t)||(this.Us.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return de([L()],s.prototype,"register",null),s})(),Do=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static ip(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.GS(t))}static GS(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Si=i,s.zi(i))}static kr(t){this.WS(t),this.Si&&t(this.Si),this.Ne||this.YS()}static WS(t){this.Pt.add(t)}static XS(t){this.Pt.delete(t)}static YS(){if(this.Kr||(this.Kr=this.ip()),!this.Kr){this.Si||(this.Si={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.zi(this.Si);return}this.Kr.observe({type:"navigation",buffered:!0}),this.Ne=!0}static zi(t){this.Pt.forEach(e=>e(t))}static Lr(t){this.XS(t),this.Pt.size===0&&this.Gr()}static Gr(){var t;this.Ne&&((t=this.Kr)===null||t===void 0||t.disconnect(),this.Ne=!1,this.Si=null,this.Kr=this.ip())}constructor(t){this.S=t}observe(){s.kr(this.S)}disconnect(){s.Lr(this.S)}}return s.Ne=!1,s.Pt=new Set,s.Si=null,s})(),cf=(()=>{class s extends ne{constructor(){super(...arguments),this.Ho=null,this.rp=new Do(t=>{if(this.Ho)return;let e=this.KS(t);e&&(this.Ho=e,this.produceEvent(e))})}onStart(){if(this.Ho){this.produceEvent(this.Ho);return}this.rp.observe()}onStop(){this.rp.disconnect()}KS(t){let e=Do.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),mt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Ni=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),lf=(()=>{class s{compute(t,e){let i=this.Hs(e.x)-this.Hs(t.x),n=this.Hs(e.y)-this.Hs(t.y),a=e.time-t.time;return{duration:a,distance:this.np(i,n),direction:this.JS(i,n),velocity:this.QS(i,n,a)}}computePinchMetrics(t,e){let i=this.Hs(e.x)-this.Hs(t.x),n=this.Hs(e.y)-this.Hs(t.y);return{duration:e.time-t.time,distance:this.np(i,n)}}getScale(t,e){return Math.abs(e/t-1)}Hs(t){return t/window.devicePixelRatio}np(t,e){return Math.round(Math.sqrt(t*t+e*e))}QS(t,e,i){let n=i/1e3,a=t/n,c=e/n;return Math.round(Math.abs(a)+Math.abs(c))}JS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Ni.RIGHT:Ni.LEFT:e>0?Ni.DOWN:Ni.UP}}return s})(),cc=typeof performance!="undefined"&&!!performance.now,Lo=cc?()=>performance.now():csDate.now,hf=(()=>{var s;return cc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Mi={now(){return Math.round(Lo()+hf)},elapsed(){return Lo()}};function xo(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var uf=1e3,df=100,pf=.1,Jr=(()=>{class s{constructor(){this.Ut={},this.ml=()=>{},this.Bo=new lf,this.we()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.ml=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.ZS(t))return;this.sv(t)&&this.we();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Mi.now()};if(t.touches.length===1)this.Ut.startPinchTime=e.time,this.Ut.firstTouch=e;else if(t.touches.length===2&&(this.Ut.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Mi.now()},this.Ut.firstTouch&&this.Ut.secondTouch)){let i=this.Bo.computePinchMetrics(this.Ut.firstTouch,this.Ut.secondTouch);this.qi=i.distance}csArray.prototype.push.call(this.Jr,e),this.Fo=gt(t)}processActionMove(){this.yl=!0}processActionUp(t){if(this.iv(t)){if(csArray.prototype.push.call(this.Jr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Mi.now()}),this.rv(t)&&this.Ut.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ut.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Mi.now()};this.Ut.firstTouch&&(this.Ut.firstTouch=e,this.Ut.secondTouch=i),this.nv(t)}this.qi||this.ov()&&this.av(t)}}we(){this.Jr=[],this.Fo=null,this.yl=!1,this.qi=null,this.Qr=!0}av(t){let e=this.Bo.compute(this.Jr[0],this.Jr[1]);this.Qr=t.isTrusted;let i=this.yl?this.cv(e):this.lv(e);if(this.hv(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=xo(n.pageX,1),i.pageY=xo(n.pageY,1)}this.ml(i,t)}nv(t){if(!(this.Ut.firstTouch&&this.Ut.secondTouch))return;let e=this.Bo.computePinchMetrics(this.Ut.firstTouch,this.Ut.secondTouch);this.Qr=t.isTrusted;let i=this.uv(e);i&&this.ml(i,t)}uv(t){return!this.qi||this.Bo.getScale(this.qi,t.distance)<pf?void 0:{type:this.qi>t.distance?mt.PINCH_IN:mt.PINCH_OUT,target:this.Fo,distance:t.distance,isTrusted:this.Qr}}cv(t){return{type:t.velocity<df?mt.DRAG:mt.FLICK,target:this.Fo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Qr}}lv(t){return{type:t.duration<uf?mt.TAP:mt.LONG_PRESS,target:this.Fo,isTrusted:this.Qr}}hv(t,e){return t===mt.TAP&&e&&e.length===1}sv(t){return t.touches.length===1}ov(){return this.Jr.length===2}ZS(t){return t.touches.length>0}iv(t){return t.changedTouches.length>0}rv(t){return this.yl&&!!this.qi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),ff="touchstart",gf="touchmove",mf="touchend",yf=(()=>{class s{constructor(t){this.S=t}observe(){s.op&&s.El(this.S)}disconnect(){s.op&&s.Sl(this.S)}static pv(t,e){csArray.prototype.forEach.call(Ns(s.Pt),i=>i(t,e))}static El(t){s.Pt.has(t)||(s.Pt.add(t),s.Pt.size===1&&(s.Zr.onGesture(s.pv),csArray.prototype.forEach.call(s.Ls,e=>Pt(e))))}static Sl(t){s.Pt.delete(t),s.Pt.size===0&&csArray.prototype.forEach.call(s.Ls,e=>Ot(e))}static vl(t){if(s.Zr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Zr.processActionDown(t);break;case"touchmove":s.Zr.processActionMove();break;case"touchend":s.Zr.processActionUp(t);break}}}return s.Ls=[{boundElement:bt.document,type:ff,listener:r=>s.vl(r)},{boundElement:bt.document,type:gf,listener:r=>s.vl(r)},{boundElement:bt.document,type:mf,listener:r=>s.vl(r)}],s.op=Jr.isGestureDetectionSupported(),s.Pt=new Set,s.Zr=new Jr,s})(),Ef=(()=>{class s extends ne{constructor(){super(),this.tn=new yf(this._l.bind(this))}onStart(){this.tn.observe()}onStop(){this.tn.disconnect()}_l(t){let e=this.fv(t);e&&this.produceEvent(e)}fv(t){if(!this.gv(t))return null;let e=Cd(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}gv(t){return t.target!==null&&!(nt(t.target)&&N.isMaskedElementChild(t.target))}}return s})(),lc=(()=>{class s{constructor(t){this.S=t,this.Bs=!1,this.Vt={boundElement:bt,type:"error",listener:e=>this.mv(e)}}observe(){Pt(this.Vt,this.Bs)}disconnect(){Ot(this.Vt,this.Bs)}mv(t){this.S(t)}}return s})(),Sf=(()=>{class s extends ne{constructor(){super(...arguments),this.ap=new lc(t=>this.$o(t))}$o({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Bt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.ap.observe()}onStop(){this.ap.disconnect()}}return s})(),vf=(()=>{class s extends ks{constructor(t){super(),this.yv=t,this.wl=1024,this.bl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=It.truncate(t.message,this.wl,It.ELLIPSIS),t.filename=It.truncate(t.filename,this.bl,It.ELLIPSIS),this.yv(t)}}return s})();var Es=[],Qr=!1,hc=cs(wf,"executeTasks");function _f(s){if(csArray.prototype.push.call(Es,s),!Qr){for(let r=0;r<3;r++)csSetTimeout(hc);Qr=!0}}function wf(){let s=csDate.now();for(let r=0;r<Es.length;r++)if(Es[r](),csDate.now()-s>=35){Es=csArray.prototype.slice.call(Es,r+1),csSetTimeout(hc);return}Es=[],Qr=!1}var Ie=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),uc=(()=>{class s{constructor(){this.bt=new Os,this._t=Ie.Stopped,this.S=null,this.lp=t=>{this._t===Ie.Stopped||!t||(this.S(t),this.hp())}}get queueLength(){return this.bt.length}start(t){if(this.S)throw new Error("callback already set");this._t=Ie.Started,this.S=t}push(t){this.bt.push(t),this.Cl()}stop(){this.S=null,this._t=Ie.Stopped,this.bt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(d=>{c.pushEvent(d)}),csArray.prototype.push.call(n,l),J(i,d=>d.subscribe(g=>l.push(g))),i=[c]}let a=new bf(n);return J(i,c=>c.subscribe(l=>a.push(l))),a}up(){return this._t===Ie.Stopped}Xe(){return this._t===Ie.Processing}hp(){if(!this.up()){if(this.bt.isEmpty){this._t=Ie.Completed;return}this._t=Ie.Processing,_f(()=>{let t=this.bt.pop();t instanceof yn?t.complete(this.lp):this.lp(t)})}}Cl(){this.up()||this.Xe()||this.hp()}}return s})(),bf=(()=>{class s extends uc{constructor(t){super(),this.dp=t}get queueLength(){return csArray.prototype.reduce.call(this.dp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),J(this.dp,t=>t.stop())}}return s})(),Af=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.B=!1,this.Pt=[]}get pendingEvents(){var t,e;return(e=(t=this.bt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.B)throw new Error("Recording is already started.");let t=this.Pt;this.bt=uc.pipe(this.producers,this.processors),this.bt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),J(this.producers,e=>e.start()),J(this.processors,e=>e.start()),this.B=!0}stop(){this.bt.stop(),this.Pt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.B=!1,this.Pt=[]}subscribe(t){if(this.B)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Pt,t),()=>this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}return s})(),Tf=(()=>{class s extends ne{constructor(t){super(),this.Oe=t}subscribe(t){return super.subscribe(t)}onStart(){J(this.Oe,t=>{t.onEvent(e=>{var i;return this.Hi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),J(this.Oe,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){J(this.Oe,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function Rf(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:D.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:D.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:D.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:D.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:a,newValue:c}=s;r({type:D.MUTATION_ATTRIBUTE,date:e,args:[i,n,a,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:D.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:D.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:D.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:a}=s;r({type:D.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,a]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:D.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n}=s;r({type:D.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:D.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:D.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:D.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:a}=s,c=[i,n,a];r({type:D.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}default:j.error("translateDOMEvent: DOMEvent not supported");break}}function Cf(s){let r=If(s.data);return{type:D.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function If(s){let r={type:Pf(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Pf(s){switch(s){case mt.DRAG:case mt.FLICK:return qs.SWIPE;case mt.LONG_PRESS:return qs.LONG_PRESS;case mt.TAP:return qs.TAP;case mt.PINCH_IN:return qs.PINCH_IN;case mt.PINCH_OUT:return qs.PINCH_OUT}}function Of(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var Nf=20;function Mf(s){return Of(r=>{let t={visibleInViewPort:r},e={type:D.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:Nf,autoFlushDelay:1e3})}function kf(s){return{type:D.PERFORMANCE_TIMINGS,args:[{performanceTiming:Tr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Tr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Tr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Df(s){switch(s.inputType){case"text":return{type:D.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:D.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:D.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Lf=500,Ir=0;function xf(){return{processEvent(s,r){if(s.originalEvent.type===D.PERFORMANCE_RESOURCE_TIMING)return Ir>=Lf?null:(Ir+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Ir=0}}}function Vf(s){switch(s.videoEventType){case"play":return{type:D.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:D.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:D.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Uf=(()=>{class s{get pendingEvents(){return this.zo.pendingEvents}constructor(t,e,i,n,a){this.zo=t,this.E=e,this.be=i,this.Ge=n,this.We=a,this.Qt=()=>{},this.qo=()=>{},this.pp=Mf(c=>this.Qt(c))}start(){var t,e;this.fp=xf(),this.zo.subscribe(i=>{var n,a,c,l,d,g;let u=i,{timestamp:y}=u;switch(u.type){case"Legacy":{let E=u.eventType==="user"?(n=this.qo)!==null&&n!==void 0?n:()=>{}:this.Qt;this.fp.processEvent(u,E)}break;case"CustomElementRegistration":{this.Qt({type:D.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[u.tagName]});break}case"DomEvent":{Rf(u,this.Qt,this.E);break}case"InputEvent":{let E=Df(u);(a=this.qo)===null||a===void 0||a.call(this,E);break}case"encryptedCharacterDataChanged":{let{target:E,rawData:v,encryptedData:T,encryptionMetadata:M}=u;this.Qt({type:D.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[E,v,T,M]});break}case"StaticResource":{let{url:E}=u;this.Qt({type:D.STATIC_RESOURCE_URL,date:y,args:[E]});break}case"ResizeMaskedElement":{let{target:E,width:v,height:T}=u;this.Qt({type:D.MUTATION_ATTRIBUTE,date:y,args:[E,"","style",`width:${v}px !important;height:${T}px !important;`]});break}case"Gesture":{let E=Cf(i);(c=this.qo)===null||c===void 0||c.call(this,E);break}case"TextVisibility":{this.pp.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.be)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:E,height:v}=u,T={type:D.SCREEN_RESIZE,date:y,args:[E,v]};this.Qt(T);break}case"viewportResize":{let{width:E,height:v}=u,T={type:D.RESIZE,date:y,args:[E,v]};this.Qt(T);break}case"PerformanceTiming":{this.Qt(kf(u));break}case"CustomError":{let E=(d=this.We)===null||d===void 0?void 0:d.translate(u);E&&this.Qt(E);break}case"JSError":{let E=(g=this.Ge)===null||g===void 0?void 0:g.translate(u);E&&this.Qt(E);break}case"VideoEvent":{let E=Vf(u);E&&this.Qt(E);break}case"warning":{j.warn(u.message);break}default:j.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.E.emitInitialDomStart(),(t=this.Ge)===null||t===void 0||t.start(),(e=this.We)===null||e===void 0||e.start(),this.zo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.zo.stop(),(t=this.be)===null||t===void 0||t.flushEvents(),(e=this.Ge)===null||e===void 0||e.stop(),(i=this.We)===null||i===void 0||i.stop()}flush(){this.pp.flush()}onEvent(t,e){var i;this.Qt=t,this.qo=e,(i=this.be)===null||i===void 0||i.onEvent(n=>this.Qt(n))}reset(){this.fp.reset()}}return s})(),jf=(()=>{class s{constructor(t=100){this._v=t,this.Go={},this.rn=null,this.jc="original-resource-name"}onEvent(t){this.wv=t}processEvent(t){this.bv(t.resourceId,t.resource.hash,t.originalResourceName),this.Av(t)}flushEvents(){this.rn&&csClearTimeout(this.rn),this.gp()}onSendStaticResource(t){this.Av=t}gp(){if(!Object.keys(this.Go).length)return;let t={type:D.RESOURCE_HASHES,date:O.now(),args:[this.Go]};this.rn=null,this.Go={},this.wv(t)}bv(t,e,i){let n=e;i&&(n+=`?${this.jc}=${i}`),this.Go[t]=n,!this.rn&&(this.rn=window.csSetTimeout(()=>this.gp(),this._v))}}return s})(),Hf=(()=>{class s{constructor(t,e,i){this.E=t,this.w=e,this.Tv=i,this.nn=Rt.ETR_DISABLED,this.Wo=Rt.ETR_PENDING,this.Yo=!0}getEtrStatus(t){t===void 0&&(t=this.w.getSession());let e=t==null?void 0:t.etrStatus;return this.Il()&&e===Rt.ETR_SAVED_SESSION?e:this.nn}onEventTriggerRecording(t,e){switch(e){case He.ETR_PAGE:this.mp(Rt.ETR_SAVED_PAGE);break;case He.ETR_LEGACY:case He.ETR_SESSION:this.mp(Rt.ETR_SAVED_SESSION);break}}handleCollectStateChange(t){this.Yo=!1,t?this.an(this.Wo):this.an(Rt.ETR_DISABLED)}handleArtificialPageview(){this.Tv?(this.Yo=!0,this.an(Rt.ETR_DISABLED)):this.Il()&&this.an(Rt.ETR_PENDING)}handleSessionRenewal(){this.Yo=!0,this.an(Rt.ETR_DISABLED)}an(t){this.nn=t,this.Wo=Rt.ETR_PENDING,this.yp(t),this.E.emitRecordingContextChange()}mp(t){this.Yo?Number(t)>Number(this.Wo)&&(this.Wo=t):this.Il()&&Number(t)>Number(this.nn)&&(this.nn=t,this.yp(t),this.E.emitRecordingContextChange())}yp(t){let e=this.w.getSession();e!==null&&e.etrStatus===Rt.ETR_NOT_SAVED_SESSION&&t===Rt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.w.setSession(e))}Il(){return this.nn!==Rt.ETR_DISABLED}}return s})();function Zr(s,r){let t,e,i,n,a=null,c=d=>{let g=O.elapsed();if(!d&&a!==null){let y=r-(g-a);if(y>0){e=window.csSetTimeout(c,y);return}}let u=g-i;e=null,a=null,i=null,n=s(u,...t)},l=(...d)=>{if(t=[...d],i){a=O.elapsed();return}return i=O.elapsed(),e=window.csSetTimeout(c,r),n};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{a=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var Bf=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Ff=8*1024*1024,$f=(()=>{class s extends Dt{constructor(t,e,i){super(),this.be=t,this.Ep=e,this.Z=i,this.Pl={},this.Sp=new Set,this.Xe=!1}initState(){xa()&&(this.Me=this.Z.getRequestParameters(),this.Rv=`${this.Ep}/exist?${oi.toQuery(this.Me)}`,this.Cv=`${this.Ep}/putTag?${oi.toQuery(this.Me)}`,this.vp=Zr(async()=>{if(this.Xe){this.vp();return}this.Xe=!0;try{await this.Iv()}finally{this.Xe=!1}},300),this.be.onSendStaticResource(t=>{this._p(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this._p(t)}_p(t){this.wp(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.wp(e.hash,e.data)})}wp(t,e){this.Sp.has(t)||(this.Sp.add(t),this.Pl[t]=e,this.vp())}async Iv(){let t=this.Pl;this.Pl={};let e=await this.Pv(t);if(!e.length)return;let i=this.Ov(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.Cv,{method:"POST",body:n})))}async Nv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Me.pid,filter:Bf.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.Rv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Pv(t){let e=[],i=await this.Nv(t);return csArray.prototype.forEach.call(i,n=>{let a=t[n];a?csArray.prototype.push.call(e,{hash:n,data:a}):j.warn("SRM: received unknown hash: "+n)}),e}Ov(t){let e=0,i=[new FormData];for(let n of t){let{data:a,hash:c}=n,l=i.length-1;if(e=e+a.size,e<Ff)i[l].append("",a,c);else{let d=new FormData;d.append("",a,c),e=a.size,csArray.prototype.push.call(i,d)}}return i}}return s})(),zf=(()=>{class s{constructor(t){this.Xo=t,this.mn=20,this.vi=0,this.N=!1}translate(t){if(this.vi>=this.mn)return this.Xo.stop(),null;this.vi+=1;let{filename:e,message:i,lineno:n,colno:a,timestamp:c}=t;return{type:D.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:a}]}}start(){this.N||(this.vi=0,this.N=!0)}stop(){this.N=!1}}return s})(),qf=(()=>{class s{constructor(){this.mn=20,this._i=0,this.N=!1}translate(t){if(this._i>=this.mn)return null;this._i+=1;let{message:e,attributes:i,timestamp:n}=t;return{type:D.CUSTOM_ERROR,date:n,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.N||(this._i=0,this.N=!0)}stop(){this.N=!1}}return s})(),Gf="csPersisted",Vo="v2/recording",Wf=["isRecording"],Yf=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Xf=["replay:resourceManager:getStatus","cssrm:getStatus"],Kf=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,T,M,R,b,x,w,k,U,W){this.Fs=t,this.w=e,this.h=i,this.Me=n,this.f=a,this.I=c,this.X=l,this.jt=d,this.ae=g,this.ut=u,this.Ie=y,this.ft=E,this.E=v,this.$s=T,this.bp=M,this.Zt=R,this.At=b,this.K=x,this.Vr=w,this.nt=k,this.lC=U,this.tt=W}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new kp),this.yn=new Xp(this.nt.shouldUseAnonymization(),this.h.whitelistedAttributes,this.I,this.h.anonymizeDigits),this.wi();let a=new Mp(Gf);this.Mv(a);let c=new Dd;this.j=new kd;let l=new Pp;csArray.prototype.push.call(i,l),this.h.useStaticResourceManager&&Kr.isSupported()&&(this.xt=new Kr,this.be=new jf,this.Ap=new $f(this.be,this.h.getStaticResourceManagerUri(),this.Me),this.bp.addListener(this.Ap),csArray.prototype.push.call(n,this.xt));let d=new ai(c,this.Me,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")})}),g=new ic(`${this.h.getRecordingUri()}/${Vo}`);csArray.prototype.push.call(n,this.yn),csArray.prototype.push.call(n,new Kp(this.K)),csArray.prototype.push.call(n,new Jp),this.bi=new Pd,this.bi.init(),csArray.prototype.push.call(i,this.bi),this.Ct=new bp(a,g,this.V),csArray.prototype.push.call(i,new Ap(window.location,this.I));let u=new Sp,y=new tf,E=new sf,v=new of(this.tt),T=new af,M=[y,this.jt,u,new Tf(csArray.prototype.filter.call(i,w=>w)),T,new cf,new Ef,v,E];this.h.jsErrorsEnabled&&(this.Xo=new Sf,this.Dv=new vf(w=>this.ae.anonymize(w)),this.Ge=new zf(this.Xo),csArray.prototype.push.call(M,this.Xo),csArray.prototype.push.call(n,this.Dv)),!((e=this.h.customErrors)===null||e===void 0)&&e.enabled&&(this.We=new qf);let R=new Af(M,n),b=new Uf(R,this.E,this.be,this.Ge,this.We),x=[u,y,E,v,T];this.recordingService=new wp(this.h,this.j,d,c,this.X,this.w,this.ae,this.ut,this.Ie,this.tt,this.V,this.Ct,g,b,i,x,this.xt,this.Vr,this.Ge,this.We),this.$s.addListener(this.recordingService),this.bp.addListener(this.recordingService),this.recordingService.init(),this.f.register(Wf,()=>this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()),this.f.register(Yf,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.E.emitRecordingContextChange()}),this.f.register(Xf,()=>this.recordingService.getStaticResourceManagerStatus()),this.Ai=new Hf(this.E,this.w,this.h.malkaUrlEnabled),this.$s.addListener(this.Ai),this.Fs.enableRecordingContext(this.recordingService,this.w,this.Ai),this.Ol()}onAfterNaturalPageView(){var t;this.Zt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ap)===null||t===void 0||t.initState()}onStartTracking(){this.Ct.recover(),this.wi(),this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Nl())}onArtificialPageViewEnd(){this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&!this.w.isTemporarilyRecorded()&&this.Ct.sendLastMessageBeacon(),this.recordingService.clearStates()}onBeforeArtificialPageView(){this.Ai.handleArtificialPageview()}onAfterArtificialPageView(){this.wi(),this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()?(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Lv()):(this.recordingService.resetOnlineAssetsOnPageview(),this.Gi())}onBeforeSessionRenewal(){this.Ai.handleSessionRenewal(),this.recordingService.clearStates(),this.Gi()}onOptout(){this.Gi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.wi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.E.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.wi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.E.emitRecordingContextChange()}onCollectStateChange(t,e){if(t===I.QUOTA_REACHED||t===I.ANALYTICS_ONLY&&e===Ct.ETR_OFF)this.recordingService.clearEvents(),this.Gi();else{this.V.setQueryParams({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents();let i=t===I.ANALYTICS_ONLY&&e===Ct.ETR_ON;this.Ai.handleCollectStateChange(i)}}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ct.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ct.allowSendingLastMessage(),this.bi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Nl(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Gi())}Ol(){var t,e,i,n;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(n=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;J(a,c=>{Qs(c)&&We.setShadowRootFilter(l=>{try{return Xt.call(l.host,c)}catch{return!1}})})}}Nl(){this.recordingService.start(),this.Ct.start(),this.E.emitRecordingContextChange()}Gi(){Rd(),this.recordingService.stop(),this.Ct.stop(),this.E.emitRecordingContextChange()}Lv(){this.Gi(),this.Nl()}Mv(t){let e="byteArray";this.V=this.At.create(`${this.h.getRecordingUri()}/${Vo}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}wi(){var t;let e=this.nt.shouldUseAnonymization();this.yn.setAnonymization(e),(t=this.kv)===null||t===void 0||t.setAnonymization(e)}}return F([kt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),F([kt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),ki=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ve=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===I.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Jf=(()=>{class s{constructor(t,e,i,n){this.R=t,this.w=e,this.h=i,this.Ke=n,this.Tp=!1}isNaturalPageViewSent(){return this.Tp}setNaturalPageViewSent(t){this.Tp=t}getTrackingContext(){let t=this.w.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.h.projectId,n=this.h.uxaDomain,a=t.pageNumber,c=this.Ke.getPageViewType(),l=this.w.isReplayRecorded(),d=this.xv(t);return{projectId:i,sessionKey:e,pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:d,...this.h.smbConfig}}getSessionKey(){let t=this.R.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}xv(t){return Ve.isReplayConsentNeeded(this.h)?t.collectState===I.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?ki.NOT_EXPRESSED:t.collectState===I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?ki.WITHDRAWN:ki.GRANTED:ki.NOT_NEEDED}}return s})(),Qf=(()=>{class s{constructor(t){this.St=t,this.te=[]}handleCommand(t){if(Be(t)&&(this.En(t),this.St.isNaturalPageViewSent())){let e=this.St.getTrackingContext();e!==null&&this.kt(t,e)}}En(t){csArray.prototype.push.call(this.te,t)}executeRegisteredCallbacks(){let t=this.St.getTrackingContext();t!==null&&csArray.prototype.map.call(this.te,e=>this.kt(e,t))}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Zf=(()=>{class s{constructor(t){this.St=t,this.Ti=[]}handleCommand(t){if(this.St.isNaturalPageViewSent())return this.Uv(t);this.Sn(t)}Uv(t){let e=this.St.getSessionKey();return this.Rp(t)&&e!==null&&this.kt(t.callback,e),e}Sn(t){this.Rp(t)&&csArray.prototype.push.call(this.Ti,t.callback)}flushPendingCallbacks(){let t=this.St.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ti,e=>{this.kt(e,t)}),this.Ti=[]}Rp(t){return t&&typeof t.callback=="function"}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),tg=(()=>{class s{constructor(t,e){this.Y=t,this.St=e}onTrackingContextRequestCallback(t){let e=this.St.getTrackingContext();e!==null&&this.Y.sendToChildren(K.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.St.isNaturalPageViewSent())return;let e=this.St.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(K.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.St.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:Uu.AfterPageView};this.Y.sendToChildren(K.IntegrationCallback,e)}}return s})();function eg(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:a,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),d;if(t&&l){let[,g,u]=l;n?d=`${c}/sites/${n}/player?uu=${g}&sn=${u}&pn=${e}`:d=`${a}/quick-playback/index.html?pid=${i}&uu=${g}&sn=${u}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(d+=`&t=${O.now()-r.recordingStartTimestamp}`)}return{replayLink:d,isRecording:t}}var sg=(()=>{class s{constructor(t){this.St=t}handleCommand(t,e){As(t)&&Be(e)&&this.kt(t,e)}kt(t,e){csSetTimeout(()=>{let i=this.St.getTrackingContext();if(i){let n=eg(i,t);e(n)}})}}return s})(),ig=(()=>{class s{constructor(){this.te=new Set}handleCommand(t,e){return!Be(t)||this.te.has(t)?null:(this.te.add(t),e&&(this._e=e,this.Cp(t,e)),()=>this.te.delete(t))}executeCallbacks(t){this.jv(t)&&(this._e=t,this.te.forEach(e=>this.Cp(e,t)))}Cp(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}jv(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:a,collectState:c}=t;return this._e&&(this._e.isRecording!==e||this._e.recordingStartTimestamp!==i||this._e.etrState!==n||this._e.etrStatus!==a||this._e.collectState!==c)}}return s})(),rg=["afterPageView"],ng=["getSessionKey"],og=["onRecordingContextChange","onRecordingStateChange"],ag=["replay:link:generate"],cg=(()=>{class s{constructor(t,e,i,n,a,c,l,d){this.R=t,this.w=e,this.f=i,this.ot=n,this.Y=a,this.h=c,this.Ke=l,this.Fs=d}init(){this.St=new Jf(this.R,this.w,this.h,this.Ke),this.Ml=new Qf(this.St),this.Ip=new Zf(this.St),this.vn=new ig,this.Hv=new sg(this.St),this.kl=new tg(this.Y,this.St),this.ot.addListener(this.kl),this.f.register(ng,t=>this.Ip.handleCommand(t)),this.f.register(rg,t=>this.Ml.handleCommand(t)),this.f.register(og,t=>this.vn.handleCommand(t,this.Fs.getRecordingContext())),this.f.register(ag,(t,e)=>{this.Wi&&this.Hv.handleCommand({...t,recordingStartTimestamp:this.Fs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.St.setNaturalPageViewSent(!0),this.Ip.flushPendingCallbacks(),this.Ml.executeRegisteredCallbacks(),this.kl.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Ml.executeRegisteredCallbacks(),this.kl.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.vn.executeCallbacks(this.Fs.getRecordingContext())}setRecordingService(t){this.Wi=t}}return F([fn({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),lg=512,hg=255,Pr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,lg),this.value=$(e)?csString.prototype.slice.call(e,0,hg):e}static isKeyValid(t){return $(t)}static isValueValid(t){return $(t)||bs(t)}}return s})(),ug=(()=>{class s extends Dt{constructor(t,e){super(),this.Ht=t,this.I=e,this.Dl=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>this.Pp(t.key,t.value)),this.Dl=[]}onStop(){}Pp(t,e){let i=this.I.anonymizePII(t),n=bs(e)?e:this.I.anonymizePII(e);this.Ht.add(new Pr(i,n))}trackDynamicVariable(t,e){if(Pr.isKeyValid(t)&&Pr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Dl,{key:t,value:e});return}this.Pp(t,e)}else throw new Error(`Command misuse: ${dc[0]}`)}}return s})(),dg=(()=>{class s{constructor(t){this.ce=t,this.Ht=[]}add(t){csArray.prototype.push.call(this.Ht,t),this.setBatchReadyCall()}clear(){this.Ht=[]}onBatchReady(t){this.Bv=t}getRequestParameters(){let t={};for(let e of this.Ht)t[e.key]=e.value;return{dv:this.ce.compressSync(csJSON.stringify(t),"base64"),ct:this.ce.algorithm}}setBatchReadyCall(){this.Bv()}}return F([fn({wait:0,mode:"trailing"}),L("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),pg="dvar",dc=["trackDynamicVariable"],fg=(()=>{class s{constructor(t,e,i,n,a,c){this.f=t,this.w=e,this.h=i,this.Me=n,this.ce=a,this.I=c,this.hs=new Cs(this.h.getTrackerUri(),pg),this.Ht=new dg(this.ce),this.Je=new ug(this.Ht,this.I)}init(){this.hs.setRequestParametersProviders(this.Me,this.Ht),this.w.setDynamicVariablesService(this.Je),this.Ht.onBatchReady(()=>this.hs.send()),this.hs.after(()=>this.Ht.clear()),this.f.register(dc,({key:t,value:e}={})=>{this.Je.trackDynamicVariable(t,e)})}onStartTracking(){this.Je.start()}}return s})(),Uo=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),$(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Nt(t)&&se(t.revenue)&&$(t.currency)&&t.currency.length<=10&&(!Nt(t.id)||$(t.id))}}return s})(),pc=100,gg=100,mg=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Ll(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,pc)),e}static Ll(t){return Nt(t)&&$(t.id)&&$(t.name)&&se(parseFloat(t.price))&&bs(parseInt(t.quantity,10))&&(!Z(t.sku)||$(t.sku))&&(!Z(t.category)||$(t.category))&&(!Z(t.merchant)||$(t.merchant))}}return s})(),yg=(()=>{class s extends Dt{constructor(t,e,i){super(),this.I=t,this.Op=e,this.X=i,this.xl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.xl,t=>{this.le=t.transaction,this._n=t.transactionItems,this.sendTransaction()}),this.xl=[]}onStop(){}addTransaction(t){let e=this.I.anonymizeFields(t,["id"]);this.le=Uo.from(e)}getTransaction(){return this.le}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.xl,{transaction:this.le,transactionItems:[...this._n]}),this.clear();return}if(!(this.Op===null||this.X===null)&&(this.X.refreshSession(),!!this.X.isSessionValid())){if(!this.le.hasValidRevenue()){j.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Op.send()}}addItem(t){if(Be(t))throw new Error(`Command misuse: ${fc[1]}`);let e=this.I.anonymizeFields(t,["id","name","sku","category"]),i=mg.from(e);i!==null&&csArray.prototype.push.call(this._n,i)}getItems(){return this._n}clear(){this.le=Uo.from({revenue:NaN}),this._n=[]}getRequestParameters(){let t={id:this.le.id?`${this.le.id}`:"",revenue:`${this.le.revenue}`};return Z(this.le.tax)&&(t.tax=`${this.le.tax}`),Z(this.le.shipping)&&(t.shipping=`${this.le.shipping}`),Z(this.le.currency)&&(t.cu=`${this.le.currency}`),t.items=window.csJSON.stringify(this._n),t}}return s})(),Eg=(()=>{class s extends Dt{constructor(t,e){super(),this.Fv=t,this.X=e,this.Ae=null,this.Vl=[]}onStart(){csArray.prototype.forEach.call(this.Vl,t=>{this.Ae=t,this.Np()}),this.Vl=[]}onStop(){}addToCart(t){let e={};$(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,gg)),$(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,pc)),(e.sku||e.merchant)&&(this.Ae=e,this.Np())}getCartItem(){return this.Ae}Np(){if(!this.isStarted&&this.Ae!==null){csArray.prototype.push.call(this.Vl,this.Ae),this.clear();return}this.X.refreshSession(),this.X.isSessionValid()&&this.Fv.send()}clear(){this.Ae=null}getRequestParameters(){if(!this.Ae)return{};let t={};return $(this.Ae.sku)&&this.Ae.sku.length>0&&(t.sku=this.Ae.sku),$(this.Ae.merchant)&&this.Ae.merchant.length>0&&(t.me=this.Ae.merchant),t}}return s})(),Sg=["ecommerce:addToCart","ec:cart:add"],vg=["ecommerce:addTransaction","ec:transaction:create"],fc=["ecommerce:addItem","ec:transaction:items:add"],_g=["ecommerce:send","ec:transaction:send"],wg=(()=>{class s{constructor(t,e,i,n,a,c,l){this.h=t,this.Z=e,this.R=i,this.f=n,this.I=a,this.X=c,this.A=l}init(){let t=new Cs(this.h.getTrackerUri(),"transaction"),e=new Cs(this.h.getTrackerUri(),"addtocart");this.Qe=new yg(this.I,t,this.X),this.Ko=new Eg(e,this.X);let i=new ai(this.Z,this.R,this.A,this.Qe);t.setRequestParametersProviders(i),t.after(()=>{this.Qe.clear()});let n=new ai(this.Z,this.R,this.A,this.Ko);e.setRequestParametersProviders(n),e.after(()=>{this.Ko.clear()}),this.f.register(vg,a=>{this.Qe.addTransaction(a)}),this.f.register(fc,a=>this.Qe.addItem(a)),this.f.register(_g,()=>this.Qe.sendTransaction()),this.f.register(Sg,a=>{this.Ko.addToCart(a)})}onStartTracking(){this.Qe.start(),this.Ko.start()}}return s})(),bg=(()=>{class s{constructor(t){this.Jo=t.performance}getRequestParameters(){if(this.$v())return{};let t=this.zv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}zv(){let t=this.Jo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}$v(){return!(this.Jo&&this.Jo.timing&&this.Jo.timing.loadEventEnd>0)}}return s})(),Ut=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,a)=>a.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Or=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})();function Ag(s){return s.tgtHM!==void 0}function gc(s){return s.tgt!==void 0}function Tg(s){return s.tgtLk!==void 0}function Rg(s){return s.x!==void 0&&s.y!==void 0}function Cg(s){return s===Or.SUCCESS||s===Or.FAILURE||s===Or.ATTEMPT}var Ig=(()=>{class s{constructor(t,e,i){this.ee=t,this.Dt=e,this.Et=i}processGesture(t,e){switch(t.type){case mt.TAP:this.qv(e);break;case mt.FLICK:this.Gv(t,e);break;case mt.DRAG:this.Wv(t,e);break;default:break}}qv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Ut.build(t,e,this.ee);i.tgt!==ue.INVALID_ELEMENT&&this.O(i)}Wv(t,e){var i,n;let a={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Et)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Ut.build(e,a,this.ee);c.tgt!==ue.INVALID_ELEMENT&&this.O(c)}Gv(t,e){var i,n;let a={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Et)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Ut.build(e,a,this.ee);c.tgt!==ue.INVALID_ELEMENT&&this.O(c)}onEvent(t){this.O=t}start(){this.Dt.subscribe(s.Mp,(t,e)=>this.processGesture(t,e))}stop(){this.Dt.unsubscribe(s.Mp)}}return s.Mp="AnalysisGestureTracker",F([wt()],s.prototype,"processGesture",null),s})(),Pg=(()=>{class s{constructor(t,e,i,n=["submit"]){this.ee=t,this.lt=e,this.Lt=i,this.Yv=n,this.kp="select, select *, input, textarea",this.Xv="select, select *, input, textarea",this.Dp="a, a *, button, button *, select, select *, input, textarea",this.wn="input, select, textarea",this.Kv="form",this.Qo=150,this.Jv=400,this.Lp=!1,this.bn=Zr((a,c)=>this.scrollListener(a,c),this.Qo),this.xp=Zr(a=>this.resizeListener(a),this.Qo),this.Qv=Qi(a=>this.mouseMoveListener(a),this.Jv),this.Zv=[{boundElement:window,type:"resize",listener:()=>this.xp()},{boundElement:document,type:"scroll",listener:a=>this.bn(a)},{boundElement:window,type:"mousemove",listener:a=>{this.Qv(vd(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.Vp=[{type:"change",listener:this.Lt.on(this.Xv,a=>this.changeListener(a))},{type:"submit",listener:this.Lt.on(this.Kv,a=>this.submitListener(a))}],this.t_=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.Dp,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.Dp,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.kp,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.kp,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.wn,a=>this.keyUpListener(a))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.wn,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.Lt.on(this.wn,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.Lt.on(this.wn,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.Lt.on(this.wn,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.Vp,a=>({...a,boundElement:document}))],this.D={},this.Vc=(a,c)=>{switch(c){case"initial":case"added":this.hi(a);break;case"removed":this.pi(a);break}},this.ie=new Ms(this.Vc),this.Ac()}hi(t){if(Fi(t)){let e=this.Up();csArray.prototype.forEach.call(e,i=>Pt(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{Pt({...i,boundElement:t})})}}pi(t){if(Fi(t)){let e=this.Up();csArray.prototype.forEach.call(e,i=>Ot(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{Ot({...i,boundElement:t})})}}onEvent(t){this.O=t}start(){this.ie.observe(),this.hi(document),this.resizeListener()}stop(){this.pi(document),this.ie.disconnect()}flushPendingDebouncedListeners(){this.bn.flushPending(),this.xp.flushPending()}Hp(t){return csArray.prototype.some.call(this.Yv,e=>e===t)}jp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Vp,t=>!this.Hp(t.type)):(j.warn("Element.matches is not implemented yet"),[])}Up(){let t=[];return csArray.prototype.push.call(t,...this.Zv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.t_):j.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Hp(e.type))}resizeListener(t){let e=vs.getScrollContainer(),i=hi(e);i&&(this.Lp=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:ft.windowWidth(),y:i?e.clientHeight:ft.windowHeight()};t!==void 0&&(n.d=t),this.O(n)}scrollListener(t,e){let i=vs.isEventOnScrollContainer(e);!this.Lp&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:ft.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:ft.windowOffsetY(),d:t},a=Ut.build(e,n,this.ee);this.O(a)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ut.build(t,e,this.ee);this.O(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.lt.getEventTargetPath(t)},i=Ut.build(t,e,this.ee);this.he(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.lt.getEventTargetPath(t)},i=Ut.build(t,e,this.ee);this.he(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.lt.getEventTargetPath(t)},i=Ut.build(t,e,this.ee);this.he(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Ut.build(t,e,this.ee);this.he(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:_s.COPY};this.he(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:_s.CUT};this.he(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:_s.PASTE};this.he(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.lt.getEventTargetPath(t),key:this.Bp(t)};this.he(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.lt.getEventTargetPath(t),key:this.Bp(t)};this.he(e)}Bp(t){let e=this.D[t.key];return e===void 0?q.ALPHANUMERICAL:e}he(t){gc(t)&&t.tgt!==ue.INVALID_ELEMENT&&this.O(t)}Ac(){this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Enter=q.ENTER,this.D.Backspace=q.BACKSPACE,this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,this.D.Tab=q.TAB}}return F([L("Event handler type: resize")],s.prototype,"resizeListener",null),F([L("Event handler type: scroll")],s.prototype,"scrollListener",null),F([L("Event handler type: mouseMove"),wt()],s.prototype,"mouseMoveListener",null),F([L("Event handler type: mouseDown"),wt()],s.prototype,"mouseDownListener",null),F([L("Event handler type: mouseUp"),wt()],s.prototype,"mouseUpListener",null),F([L("Event handler type: click"),wt()],s.prototype,"clickListener",null),F([L("Event handler type: mouseOver"),wt()],s.prototype,"mouseOverListener",null),F([L("Event handler type: mouseOut"),wt()],s.prototype,"mouseOutListener",null),F([L("Event handler type: focusIn")],s.prototype,"focusInListener",null),F([L("Event handler type: focusOut")],s.prototype,"focusOutListener",null),F([L("Event handler type: change")],s.prototype,"changeListener",null),F([L("Event handler type: submit"),wt()],s.prototype,"submitListener",null),F([L("Event handler type: copy")],s.prototype,"copyListener",null),F([L("Event handler type: cut")],s.prototype,"cutListener",null),F([L("Event handler type: paste")],s.prototype,"pasteListener",null),F([L("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([L("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Og=(()=>{class s{constructor(){this.Fp=100,this.An=0,this.Tn=ft.documentHeight(),this.$p={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.An=this.Ul(vs.getScrollContainer()).maxScrollRate}onEvent(t){this.O=t}start(){Pt(this.$p)}stop(){Ot(this.$p)}reset(){let t=vs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ul(t);this.Tn=i,this.An=e,this.O()}Ul(t){let e=0,i=0;if(t===null)i=ft.documentHeight(),e=this.e_(i);else{let n=this.s_(t);i=this.zp(t,n),e=this.i_(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;vs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Ul(e);(i>this.An||n>this.Tn)&&(this.An=i,n>this.Tn&&(this.Tn=n),this.O())}e_(t){let e=Math.round(this.r_()/t*100);return Math.min(e,this.Fp)}r_(){let t=ft.windowHeight();return ft.windowOffsetY()+t}i_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.zp(t,e),a=Math.round(i/n*100);return Math.min(a,this.Fp)}s_(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}zp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.An}`,mdh:`${this.Tn}`}}}return F([L("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var Ng=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,T,M,R,b,x,w,k,U){this.h=t,this.zs=e,this.Dt=i,this.Yi=n,this.jl=a,this.Be=c,this.Ze=l,this.qp=d,this.X=g,this.Wt=u,this.W=y,this.Hl=E,this.Ve=v,this.V=T,this.Zo=M,this.ys=R,this.Es=b,this.Bl=x,this.Ri=w,this.Ci=k,this.Ii=U,this.Ds=new Ga,this.ta=!1}init(){var t,e,i,n,a,c,l;this.zs.onEvent(d=>this.It(d)),this.Dt.onEvent(d=>this.It(d)),this.Yi.onEvent(()=>{let d=this.Yi.getRequestParameters();this.V.setQueryParams(d),this.Ze.setQueryParams(d)}),this.Hl.onEvent(d=>this.Fe(d)),this.Fl(),(t=this.Zo)===null||t===void 0||t.onEvent(d=>this.It(d)),(e=this.Ri)===null||e===void 0||e.onEvent(d=>this.It(d)),(i=this.ys)===null||i===void 0||i.onEvent(d=>this.It(d)),(n=this.Es)===null||n===void 0||n.onEvent(d=>this.It(d)),this.n_(),(a=this.Bl)===null||a===void 0||a.onEvent(d=>this.Fe(d)),(c=this.Ci)===null||c===void 0||c.onEvent(d=>this.Fe(d)),(l=this.Ii)===null||l===void 0||l.onEvent(d=>this.Fe(d))}n_(){this.Ze.onBeaconSuccess(()=>{this.Be.clearEvents()}),this.Ze.onBeaconFailure(t=>{this.o_(t)})}initStates(){let t=this.qp.getRequestParameters(),e=this.jl.getRequestParameters(),i=this.Yi.getRequestParameters();this.V.setQueryParams(t),this.V.setQueryParams(e),this.V.setQueryParams(i),this.Ze.setQueryParams(t),this.Ze.setQueryParams(e),this.Ze.setQueryParams(i),this.$l()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.zl(),this.sendLastMessageBeacon()):this.sendEvents(),this.Yi.reset(),this.V.removeQueryParams()}start(t){var e,i,n,a,c,l,d;t||(e=this.Bl)===null||e===void 0||e.start(),this.Ve.start(),this.zs.start(),this.Yi.start(),this.Dt.start(),(i=this.Zo)===null||i===void 0||i.start(),(n=this.Es)===null||n===void 0||n.start(),t||this.Hl.start(),(a=this.ys)===null||a===void 0||a.start(),(c=this.Ri)===null||c===void 0||c.start(),(l=this.Ci)===null||l===void 0||l.start(),(d=this.Ii)===null||d===void 0||d.start()}collectInitialEvents(){var t;(t=this.Zo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Fe(t)}onIframeAnalysisUserEvent(t){this.It(t)}onExternalEvent(t){this.G(t)}Fe(t){this.X.isCurrentPageviewValid()&&this.G(t)}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.G(t)}G(t){this.Be.addEvent(this.a_(t)),this.Be.isFull()&&this.sendEvents(),this.h.emitDebugEvents&&this.Ds.emit("analysisEvent",{...t,typeName:z[t.type]})}a_(t){return t.ts=this.Pi(),t}zl(){this.Ze.setQueryParams({hlm:"true"}),this.ta=!0}sendLastMessageBeacon(){this.Ze.setQueryParams(this.jl.getRequestParameters()),this.Ze.send(this.Be.stringifyEvents()),this.Ze.removeQueryParams(["hlm"]),this.ta=!1}sendEvents(){this.Be.isEmpty()||(this.V.setQueryParams(this.qp.getRequestParameters()),this.V.setQueryParams(this.jl.getRequestParameters()),this.V.send(this.Be.getEvents()),this.Be.clearEvents())}stop(){var t,e,i,n,a,c,l;this.Ve.stop(),this.zs.stop(),this.Yi.stop(),this.Dt.stop(),this.Hl.stop(),(t=this.Zo)===null||t===void 0||t.stop(),(e=this.ys)===null||e===void 0||e.stop(),(i=this.Es)===null||i===void 0||i.stop(),(n=this.Ri)===null||n===void 0||n.stop(),this.Be.empty(),(a=this.Bl)===null||a===void 0||a.stop(),(c=this.Ci)===null||c===void 0||c.stop(),(l=this.Ii)===null||l===void 0||l.stop()}$l(){this.es=O.now()}Pi(){return O.now()-this.es}Fl(){this.Ve.onEvent(t=>{var e,i;t!==Ft.Visible&&((e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Ft.PagehideVisible?this.zl():t===Ft.PagehideHidden?(this.zl(),this.sendLastMessageBeacon()):(!this.Be.isEmpty()||this.ta)&&this.sendLastMessageBeacon())})}o_(t){try{(!this.Be.isEmpty()||this.ta)&&this.Wt.save({requestParameters:t,events:this.Be.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Cg(t)||!hi(e))throw new Error(`Command misuse: ${Rc}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.W.getElementPath(e)};i.tgt!==ue.INVALID_ELEMENT&&this.Fe(i)}}return s})(),Mg=(()=>{class s{constructor(t,e){this.Wt=t,this.V=e,this.Gp=()=>{document.visibilityState==="visible"&&this.Wp()}}start(){this.Wp(),this.Hc()}stop(){this.Bc()}getRecoveryStorage(){return this.Wt}Wp(){let t=this.Wt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.V.send(i,e)}}Hc(){document.addEventListener("visibilitychange",this.Gp)}Bc(){document.removeEventListener("visibilitychange",this.Gp)}}return s})(),kg=(()=>{class s{constructor(t){this.Fi=t}save(t){localStorage.setItem(this.Fi,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Fi)}recover(){let t=localStorage.getItem(this.Fi);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{j.error(`Invalid item in localStorage.
         (key:${this.Fi}; value:${t})`)}finally{this.clear()}return e}}return s})(),Dg=(()=>{class s{constructor(t){this.Xi=t,this.Ki=e=>this.processMetric(e),this.N=!1}onEvent(t){this.O=t}start(){this.N||(this.N=!0,this.Xi.onFCP(this.Ki),this.Xi.onCLS(this.Ki),this.Xi.onFID(this.Ki),this.Xi.onLCP(this.Ki),this.Xi.onTTFB(this.Ki),this.Xi.onINP(this.Ki))}stop(){this.N=!1}processMetric(t){if(!this.N)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.O(e)}}return F([L("Performance metric handler")],s.prototype,"processMetric",null),s})(),Le,si,mc,Gi,tn,yc=-1,hs=function(s){addEventListener("pageshow",function(r){r.persisted&&(yc=r.timeStamp,s(r))},!0)},vn=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},sr=function(){var s=vn();return s&&s.activationStart||0},zt=function(s,r){var t=vn(),e="navigate";return yc>=0?e="back-forward-cache":t&&(document.prerendering||sr()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r===void 0?-1:r,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:e}},Ds=function(s,r,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var e=new PerformanceObserver(function(i){Promise.resolve().then(function(){r(i.getEntries())})});return e.observe(Object.assign({type:s,buffered:!0},t||{})),e}}catch{}},qt=function(s,r,t,e){var i,n;return function(a){r.value>=0&&(a||e)&&((n=r.value-(i||0))||i===void 0)&&(i=r.value,r.delta=n,r.rating=function(c,l){return c>l[1]?"poor":c>l[0]?"needs-improvement":"good"}(r.value,t),s(r))}},_n=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},ir=function(s){var r=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||s(t)};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},wn=function(s){var r=!1;return function(t){r||(s(t),r=!0)}},Ss=-1,jo=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Wi=function(s){document.visibilityState==="hidden"&&Ss>-1&&(Ss=s.type==="visibilitychange"?s.timeStamp:0,Lg())},Ho=function(){addEventListener("visibilitychange",Wi,!0),addEventListener("prerenderingchange",Wi,!0)},Lg=function(){removeEventListener("visibilitychange",Wi,!0),removeEventListener("prerenderingchange",Wi,!0)},bn=function(){return Ss<0&&(Ss=jo(),Ho(),hs(function(){setTimeout(function(){Ss=jo(),Ho()},0)})),{get firstHiddenTime(){return Ss}}},gi=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},Bo=[1800,3e3],Ec=function(s,r){r=r||{},gi(function(){var t,e=bn(),i=zt("FCP"),n=Ds("paint",function(a){a.forEach(function(c){c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<e.firstHiddenTime&&(i.value=Math.max(c.startTime-sr(),0),i.entries.push(c),t(!0)))})});n&&(t=qt(s,i,Bo,r.reportAllChanges),hs(function(a){i=zt("FCP"),t=qt(s,i,Bo,r.reportAllChanges),_n(function(){i.value=performance.now()-a.timeStamp,t(!0)})}))})},Fo=[.1,.25],xg=function(s,r){r=r||{},Ec(wn(function(){var t,e=zt("CLS",0),i=0,n=[],a=function(l){l.forEach(function(d){if(!d.hadRecentInput){var g=n[0],u=n[n.length-1];i&&d.startTime-u.startTime<1e3&&d.startTime-g.startTime<5e3?(i+=d.value,n.push(d)):(i=d.value,n=[d])}}),i>e.value&&(e.value=i,e.entries=n,t())},c=Ds("layout-shift",a);c&&(t=qt(s,e,Fo,r.reportAllChanges),ir(function(){a(c.takeRecords()),t(!0)}),hs(function(){i=0,e=zt("CLS",0),t=qt(s,e,Fo,r.reportAllChanges),_n(function(){return t()})}),setTimeout(t,0))}))},Ys={passive:!0,capture:!0},Vg=new Date,$o=function(s,r){Le||(Le=r,si=s,mc=new Date,vc(removeEventListener),Sc())},Sc=function(){if(si>=0&&si<mc-Vg){var s={entryType:"first-input",name:Le.type,target:Le.target,cancelable:Le.cancelable,startTime:Le.timeStamp,processingStart:Le.timeStamp+si};Gi.forEach(function(r){r(s)}),Gi=[]}},Ug=function(s){if(s.cancelable){var r=(s.timeStamp>1e12?new Date:performance.now())-s.timeStamp;s.type=="pointerdown"?function(t,e){var i=function(){$o(t,e),a()},n=function(){a()},a=function(){removeEventListener("pointerup",i,Ys),removeEventListener("pointercancel",n,Ys)};addEventListener("pointerup",i,Ys),addEventListener("pointercancel",n,Ys)}(r,s):$o(r,s)}},vc=function(s){["mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return s(r,Ug,Ys)})},zo=[100,300],jg=function(s,r){r=r||{},gi(function(){var t,e=bn(),i=zt("FID"),n=function(l){l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),t(!0))},a=function(l){l.forEach(n)},c=Ds("first-input",a);t=qt(s,i,zo,r.reportAllChanges),c&&ir(wn(function(){a(c.takeRecords()),c.disconnect()})),c&&hs(function(){var l;i=zt("FID"),t=qt(s,i,zo,r.reportAllChanges),Gi=[],si=-1,Le=null,vc(addEventListener),l=n,Gi.push(l),Sc()})})},_c=0,Nr=1/0,Di=0,Hg=function(s){s.forEach(function(r){r.interactionId&&(Nr=Math.min(Nr,r.interactionId),Di=Math.max(Di,r.interactionId),_c=Di?(Di-Nr)/7+1:0)})},wc=function(){return tn?_c:performance.interactionCount||0},Bg=function(){"interactionCount"in performance||tn||(tn=Ds("event",Hg,{type:"event",buffered:!0,durationThreshold:0}))},qo=[200,500],bc=0,Go=function(){return wc()-bc},ee=[],Mr={},Wo=function(s){var r=ee[ee.length-1],t=Mr[s.interactionId];if(t||ee.length<10||s.duration>r.latency){if(t)t.entries.push(s),t.latency=Math.max(t.latency,s.duration);else{var e={id:s.interactionId,latency:s.duration,entries:[s]};Mr[e.id]=e,ee.push(e)}ee.sort(function(i,n){return n.latency-i.latency}),ee.splice(10).forEach(function(i){delete Mr[i.id]})}},Fg=function(s,r){r=r||{},gi(function(){var t;Bg();var e,i=zt("INP"),n=function(c){c.forEach(function(g){g.interactionId&&Wo(g),g.entryType==="first-input"&&!ee.some(function(u){return u.entries.some(function(y){return g.duration===y.duration&&g.startTime===y.startTime})})&&Wo(g)});var l,d=(l=Math.min(ee.length-1,Math.floor(Go()/50)),ee[l]);d&&d.latency!==i.value&&(i.value=d.latency,i.entries=d.entries,e())},a=Ds("event",n,{durationThreshold:(t=r.durationThreshold)!==null&&t!==void 0?t:40});e=qt(s,i,qo,r.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),ir(function(){n(a.takeRecords()),i.value<0&&Go()>0&&(i.value=0,i.entries=[]),e(!0)}),hs(function(){ee=[],bc=wc(),i=zt("INP"),e=qt(s,i,qo,r.reportAllChanges)}))})},Yo=[2500,4e3],kr={},$g=function(s,r){r=r||{},gi(function(){var t,e=bn(),i=zt("LCP"),n=function(l){var d=l[l.length-1];d&&d.startTime<e.firstHiddenTime&&(i.value=Math.max(d.startTime-sr(),0),i.entries=[d],t())},a=Ds("largest-contentful-paint",n);if(a){t=qt(s,i,Yo,r.reportAllChanges);var c=wn(function(){kr[i.id]||(n(a.takeRecords()),a.disconnect(),kr[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(c,0)},!0)}),ir(c),hs(function(l){i=zt("LCP"),t=qt(s,i,Yo,r.reportAllChanges),_n(function(){i.value=performance.now()-l.timeStamp,kr[i.id]=!0,t(!0)})})}})},Xo=[800,1800],zg=function s(r){document.prerendering?gi(function(){return s(r)}):document.readyState!=="complete"?addEventListener("load",function(){return s(r)},!0):setTimeout(r,0)},qg=function(s,r){r=r||{};var t=zt("TTFB"),e=qt(s,t,Xo,r.reportAllChanges);zg(function(){var i=vn();if(i){var n=i.responseStart;if(n<=0||n>performance.now())return;t.value=Math.max(n-sr(),0),t.entries=[i],e(!0),hs(function(){t=zt("TTFB",0),(e=qt(s,t,Xo,r.reportAllChanges))(!0)})}})},Gg=(()=>{class s{onFCP(t){Ec(t,{reportAllChanges:!0})}onCLS(t){xg(t,{reportAllChanges:!0})}onFID(t){jg(t,{reportAllChanges:!0})}onLCP(t){$g(t,{reportAllChanges:!0})}onTTFB(t){qg(t,{reportAllChanges:!0})}onINP(t){Fg(t,{reportAllChanges:!0})}}return s})();var rr=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Wg=(()=>{class s extends rr{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.N_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=gt(t);return Yi(i)&&csArray.prototype.indexOf.call(this.N_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Ac=(()=>{class s extends rr{constructor(t){super(),this.lt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.lt.getEventTargetPath(t)),e}}return s})(),Ko=65535,Yg=(()=>{let s;return function(r){function t(e){let i=gt(e);if(!i||!nt(i)||!Be(i.getBoundingClientRect)||!Nt(e.pageX)||!Nt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),a=e.pageX-n.left-ft.windowOffsetX(),c=e.pageY-n.top-ft.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),d=Math.max(i.scrollHeight,n.height),g=Math.round(a/l*Ko),u=Math.round(c/d*Ko);return{xRel:g,yRel:u,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Xg=(()=>{class s extends rr{constructor(t,e){super(),this.Ps=t,this.lt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Zl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:a}=Yg.getRelativePosition(t);if(i){let c=this.lt.getEventTargetPath(t);c!==ue.INVALID_ELEMENT&&(e.xRel=n,e.yRel=a,e.type===z.MOUSEMOVE&&(c!==this.Zl||this.Ps.iframesTracking?(this.Zl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Zl="");return e}}return s})(),Ne=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Jo=100,Tc=(()=>{class s extends rr{constructor(t,e,i){super(),this.h=t,this.ue=e,this.I=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}M_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,nn(n.parentElement)||rn(n.parentElement)||this.ue.getElementSensitiveStatus(n.parentElement)!==Ne.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Jo)break;n=i.nextNode()}return!1}k_(t){let e=Gr(t,"button,a");return e||(this.h.collectTargetText===Fr.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(hi(csEventtarget.apply(t))){let i=this.k_(csEventtarget.apply(t));if(i&&$(i.textContent)&&!this.M_(i)&&!this.I.hasPII(i.textContent,this.h.anonymizeDigits)){let n=It.truncate(csString.prototype.trim.call(i.textContent),Jo);n.length>0&&(e.text=n)}}return e}}return s})();function Kg(s,r,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Xg(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Tc(s,t,new di)),csArray.prototype.push.call(e,new Wg,new Ac(r)),e}function Jg(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Tc(s,t,new di)),csArray.prototype.push.call(e,new Ac(r)),e}var Qg=50,Zg=(()=>{class s{constructor(t=[]){this.Nt=t}stringifyEvents(){return csJSON.stringify(this.Nt)}addEvent(t){csArray.prototype.push.call(this.Nt,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Nt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Qg}isEmpty(){return this.Nt.length===0}getEvents(){return this.Nt}}return s})(),tm="csAnalysisEventsPersisted",Qo="v2/events",Rc=["submit"],em=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E){this.h=t,this.Z=e,this.R=i,this.W=n,this.Lt=a,this.f=c,this.X=l,this.Dt=d,this.ot=g,this.At=u,this.J=y,this.ue=E}init(){let t=new Zg,e=this.At.create(`${this.h.getTrackerUri()}/${Qo}`,!0,"base64");this.na=this.D_(e),this.ke=this.L_(t,this.na.getRecoveryStorage(),e),this.ke.init(),this.J.addListener(this.ke),this.ot.addListener(this.ke),this.f.register(Rc,(i,n)=>{this.ke.pushSubmitCommandEvent(i,n)})}onStartTracking(t){this.na.start(),this.ke.start(t)}onAfterNaturalPageView(){this.ke.initStates()}onAfterArtificialPageView(){this.ke.initStates(),this.ke.collectInitialEvents()}onArtificialPageViewEnd(){this.ke.clearStates(!0)}onBeforeSessionRenewal(){this.ke.clearStates(),this.ke.stop(),this.na.stop()}onOptout(){this.ke.stop(),this.na.stop()}L_(t,e,i){var n;let a=new bg(window),c=new Og,l=Kg(this.h,this.W,this.ue),d=[];this.h.collectSubmit||csArray.prototype.push.call(d,"submit");let g=new Pg(l,this.W,this.Lt,d),u=Jg(this.h,this.W,this.ue),y=new Ig(u,this.Dt),E=new Dg(new Gg),v=new tc,T,M,R,b=new ic(`${this.h.getTrackerUri()}/${Qo}`),x=new ai(this.Z,this.R),w,k,U,W;return new Ng(this.h,g,y,c,a,t,b,x,this.X,e,this.W,E,v,i,T,M,R,w,k,U,W)}D_(t){return new Mg(new kg(tm),t)}}return s})(),Hi=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),sm=(()=>{class s extends Dt{constructor(t,e,i,n,a){super(),this.E=t,this.J=e,this.th=i,this.A=n,this.Ke=a}init(){this.x_()}onStart(t){t?this.V_():this.U_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.mf(t,e):Nt(t)&&this.A.overridePath(t,e),this.isStarted||(this.J.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}U_(){this.Ke.setPageViewType(Hi.Natural),this.E.emitBeforeNaturalPageView(),this.th.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterNaturalPageView()}V_(){this.Ke.setPageViewType(Hi.Renewal),this.E.emitBeforeNaturalPageView(),this.th.send(),this.E.emitAfterNaturalPageView()}mf(t,e){this.Ke.setPageViewType(Hi.Artificial),this.E.emitArtificialPageViewEnd(),Nt(t)&&this.A.overridePath(t,e),this.E.emitBeforeArtificialPageView(),this.th.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterArtificialPageView()}x_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.mf()})}}return s})(),im=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function rm(){return{la:im}}var nm=(()=>{class s{constructor(t,e){this.K=t,this.ft=e,this.eh=!1}getRequestParameters(){return{dr:this.ih()}}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.eh=!0}disableRemoveQueryString(){this.eh=!1}ih(){let t=this.eh?this.K.removeQueryString(this.yf()):this.yf();return this.K.anonymizeUrl(t,{maskingPatterns:this.ft.getUrlMaskingPatterns()})}yf(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),om=99999,am=(()=>{class s{constructor(t){this.w=t,this.j_=this.H_()&&window.CSCurrentScript}B_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.F_(e)?null:Math.round(e.responseEnd-e.fetchStart)}F_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.j_||this.$_()!==1)return{};let t=this.B_();return t===null?{}:{dt:`${Math.min(t,om)}`}}$_(){var t;return((t=this.w.getSession())===null||t===void 0?void 0:t.pageNumber)||null}H_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Cc=":";function Zo(s){let r=[],t=cm(s),e=csString.prototype.split.call(t,"/");for(let i of e)ze(i,Cc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function cm(s){let r=s;return ze(s,"/")&&(r=csString.prototype.substring.call(r,1)),pi(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var lm=(()=>{class s{constructor(){this.Ef=new Set,this.Sf=[],this.rh=new Set,this.nh=[]}addUrlMaskingPattern(t){if(this.Ef.has(t))return;this.Ef.add(t);let e=Zo(t);csArray.prototype.push.call(this.Sf,e)}getUrlMaskingPatterns(){return this.Sf}resetPartialUrlMaskingPatterns(){this.rh.clear(),this.nh=[]}addPartialUrlMaskingPattern(t){if(this.rh.has(t))return;this.rh.add(t);let e=Zo(t);csArray.prototype.push.call(this.nh,e)}getPartialUrlMaskingPatterns(){return this.nh}}return s})(),hm=["trackPageview"],ta=["setPath"],ea=["setQuery"],sa=["referrer:maskUrl"],um=["referrer:removeQueryString"],dm=["referrer:keepQueryString"],pm=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,T,M){this.h=t,this.f=e,this.E=i,this.Me=n,this.R=a,this.w=c,this.de=l,this.vt=d,this.K=g,this.A=u,this.Zt=y,this.Ke=E,this.J=v,this.Gs=T,this.tr=M}init(){var t;let e=new Cs(this.h.getTrackerUri(),"pageview");this.er=new sm(this.E,this.J,e,this.A,this.Ke);let i=new nm(this.K,new lm);this.er.init();let n=new ai(this.Me,this.R,ft,i,this.A,this.de,en,this.vt,this.Ke,new am(this.w),this.Zt);this.Gs&&n.addProvider(this.Gs),this.tr&&n.addProvider(this.tr);let a=this.h.isCsCrosswritingHeap();if(a||this.h.isCsSideloadingHeap()||this.h.isHeapSideloadsCs()){let c=(t=this.h.heapEnvironment)===null||t===void 0?void 0:t.env_id;n.addProvider({getRequestParameters(){let l={cw:a?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(n),this.f.register(hm,(c,l)=>{if(!$(c)){this.er.triggerArtificialPageView();return}this.oh(l)?this.er.triggerArtificialPageView(c,l):this.er.triggerArtificialPageView(c)}),this.f.register(ta,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${ta[0]}`);this.oh(l)?this.A.overridePath(c,l):this.A.overridePath(c)}),this.f.register(ea,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${ea[0]}`);this.oh(l)?this.A.overrideQuery(c,l):this.A.overrideQuery(c)}),this.f.register(sa,c=>{if(!$(c))throw new Error(`Command misuse: ${sa[0]}`);i.addUrlMaskingPattern(c)}),this.f.register(um,()=>i.enableRemoveQueryString()),this.f.register(dm,()=>i.disableRemoveQueryString())}start(t){this.er.start(t)}onBeforeSessionRenewal(){this.er.stop()}oh(t){return As(t)&&t!==null}}return s})(),fm=(()=>{class s{constructor(t){this.lt=t}on(t,e){return i=>{this.lt.hasValidEventTarget(i)&&this.z_(i,t)&&e(i)}}z_(t,e){let i=gt(t);return Xt.call(i,e)}isMatchesSelectorSupported(){return!!Xt}}return s})(),gm=(()=>{class s{constructor(){}onLoad(t){this.Ui=t}onLoadCallbackExecute(){this.Ui()}start(){let t=this.onLoadCallbackExecute.bind(this);this.q_(t)}q_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return F([L("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),mm=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.w=i,this.es=O.now()}resetStartTime(){this.es=O.now()}getSessionData(){let{projectId:t}=this.h,e=this.R.getVisitor();e==null&&j.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},a=this.w.getSession();a===null&&j.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:O.now()-this.es}}}return s})(),ym=["clearSession"],Em=["extendSession"];var Sm=["getSessionData"],vm=["session:start:newVisitor"],_m=["session:clear:visitor"],wm=(()=>{class s{constructor(t,e,i,n){this.h=t,this.R=e,this.w=i,this.f=n}init(){this.ah=new mm(this.h,this.R,this.w),this.f.register(ym,()=>this.w.removeSession()),this.f.register(Em,()=>this.w.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.register(Sm,()=>this.ah.getSessionData(),{disableApplyPending:!0}),this.f.register(vm,()=>this.R.renewVisitor()),this.f.register(_m,()=>{this.R.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onBeforeArtificialPageView(){this.w.abortQuotaServiceRequest(),this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onAfterNaturalPageView(){this.ah.resetStartTime()}onAfterArtificialPageView(){this.ah.resetStartTime()}onOptout(){this.R.removeVisitor(),this.w.removeSession()}onCollectStateChange(t,e){this.w.updateCollectState(t,e)}}return s})(),bm=60*1e3,Am=30*1e3,Tm=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.ch=!1,this.G_=Qi(()=>this.w.refreshSession(),Am)}onSessionExpired(t){this.W_=t}isSessionValid(){return this.ch?!0:!(!this.w.hasValidSession()||this.w.pollCacheRefreshEvent()&&this.R.isSessionRenewed())}isCurrentPageviewValid(){let t=this.w.hasValidSession();return this.w.pollCacheRefreshEvent(!1)?!this.R.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.G_():this.Y_()&&(this.vf=O.now(),this.renewSession())}renewSession(){this.ch=!0,this.W_(),this.ch=!1}Y_(){return!Z(this.vf)||O.now()-this.vf>bm}}return s})();var as;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(as||(as={}));function Ic(s){return s.tagDeploymentMode===as.DualCollectionReview||s.tagDeploymentMode===as.DualCollection}function Rm(s){return Ic(s)||s.tagDeploymentMode===as.LoadClicktalePtc}var ia=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=a}(s||(s={})),s})();var Cm="@ETP@",ra="@user-identifier@",Im=(()=>{class s extends Dt{constructor(t,e,i,n){super(),this.h=t,this.xw=e,this.ce=i,this.J=n,this.hh=[],this.gi=[]}onStart(){csArray.prototype.forEach.call(this.hh,t=>this.Df(t)),this.hh=[],csArray.prototype.forEach.call(this.gi,t=>this.Lf(t)),this.gi=[]}onStop(){}Df(t){this.Vw(t)?Ks.isSupported()&&this.Uw(t):this.jw(t)}trackPageEvent(t){if(!s.xf(t))throw new Error(`Command misuse: ${Pc[0]}`);this.isStarted?this.Df(t):csArray.prototype.push.call(this.hh,t)}Vw(t){return ze(t,ra)}async Uw(t){if(!this.h.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,ra.length);if(e.length>Ks.MAX_DIGEST_INPUT_SIZE){j.warn("UserIdentifier event: invalid user identifier");return}let i=await Ks.digest(e);i?(this.ar={eventName:i,isETR:!1,isCustomHashId:!0},this.da()):j.warn("Page event: unable to compute customHashId"),this.h.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}jw(t){this.J.emitPageEvent(t),this.ar={eventName:t,isETR:!1,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===as.LoadClicktalePtc&&ia.sendPageEvent(t)}Lf(t){this.h.malkaEtrEnabled?this.Hw(t):this.Bw(t)}trackEventTriggerRecording(t){if(!s.xf(t))throw new Error(`Command misuse: ${Oc[0]}`);this.isStarted?this.Lf(t):csArray.prototype.push.call(this.gi,t)}Hw(t){ze(t,Cm)?this.J.emitEventTriggerRecording(t,He.ETR_PAGE):this.J.emitEventTriggerRecording(t,He.ETR_SESSION),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.da()}Bw(t){Rm(this.h)&&(this.J.emitEventTriggerRecording(t,He.ETR_LEGACY),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===as.LoadClicktalePtc&&ia.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ce.compressSync(this.ar.eventName,"base64"),ct:this.ce.algorithm,isETR:`${this.ar.isETR}`,isCustomHashId:`${this.ar.isCustomHashId}`}}da(){this.xw.send()}static xf(t){return $(t)&&!!csString.prototype.trim.call(t)}}return s})(),Pc=["trackPageEvent"],Oc=["trackEventTriggerRecording"],Pm=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.f=e,this.ce=i,this.Me=n,this.J=a}init(){let t=new Cs(this.h.getTrackerUri(),"pageEvent");this.pa=new Im(this.h,t,this.ce,this.J),t.setRequestParametersProviders(this.pa,this.Me),this.f.register(Pc,e=>{this.pa.trackPageEvent(e)}),this.f.register(Oc,e=>{this.pa.trackEventTriggerRecording(e)})}onStartTracking(){this.pa.start()}}return s})(),Nc=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Om=(()=>{class s extends Nc{constructor(){super(),this.F=new lc(t=>this.errorListener(t))}onStartTracking(){this.F.observe()}onStopTracking(){this.F.disconnect()}errorListener(t){let e=this.Fw(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}$w(t){return t=t!=null?t:"[NO ERROR MESSAGE]",It.truncate(t,s.wl,It.ELLIPSIS)}zw(t){return!t||Bt(t)?"":It.truncate(t,s.bl,It.ELLIPSIS)}Fw(t){return{errorType:"jsError",message:this.$w(t.message),filename:this.zw(t.filename),lineno:t.lineno,colno:t.colno}}}return s.wl=1024,s.bl=150,F([L("Event handler type: error")],s.prototype,"errorListener",null),s})(),Nm=(()=>{class s{constructor(t){this.f=t}init(){this.Vf(s.qw,ja),this.Vf(s.Gw,Ua)}Vf(t,e){this.f.register([t],(i,n)=>{!$(i)||!($(n)||Fe(n))||j.error(n,`${e}${i}`)})}}return s.Gw="logSnippetError",s.qw="logImplementationSnippetError",s})(),Mm=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.Y=e,this.Fs=i,this.ue=n,this.ot=a}init(){this.Y.onChildMessage((t,e,i)=>this.ot.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.ue.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Fs.getRecordingContext())}onStartTracking(){this.h.iframesTracking&&this.Y.start()}onOptout(){this.h.iframesTracking&&this.Y.stop()}onSensitiveStatusChange(){if(this.h.iframesTracking){let t=this.ue.getSensitiveStatus();this.Y.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.h.iframesTracking){let t=this.Fs.getRecordingContext();this.Y.onRecordingContextChange(t)}}}return s})(),km=(()=>{class s extends Dt{constructor(t){super(),this.h=t,this.uh=0,this.Re=new Map,this.Uf={boundElement:window,type:"message",listener:e=>this.ph(e)}}onChildMessage(t){this.jf=t}setRecordingContextCallback(t){this.Ww=t}setSentiveStatusCallback(t){this.Yw=t}onSensitiveStatusChange(t){let e=pt.buildBaseMessage(K.SensitiveStatus,Zt.Parent,this.h.projectId);e.content=t;let i=pt.buildBaseMessage(K.SensitiveStatus,Zt.Parent,this.h.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Re.forEach(n=>{if(n.port){let a=this.fa(n)?i:e;this.fh(n,a)}})}onRecordingContextChange(t){let e=pt.buildBaseMessage(K.RecordingContext,Zt.Parent,this.h.projectId);e.content=t,this.Re.forEach(i=>{!this.fa(i)&&i.port&&this.fh(i,e)})}sendToChildren(t,e){let i=pt.buildBaseMessage(t,Zt.Parent,this.h.projectId);i.content=e,this.Xw(i)}onStart(){Pt(this.Uf,!1),this.Hf()}onStop(){this.Kw(),Ot(this.Uf,!1),this.Jw()}Hf(){let t=this.Qw();this.Zw(t),csArray.prototype.forEach.call(t,e=>{if(this.tb(e)===null){let n={iframe:e};this.Re.set(this.uh,n),this.uh+=1}}),this.eb()}Qw(){return csArray.prototype.filter.call(ut.findAllElements("iframe"),t=>this.sb(t))}Zw(t){this.Re.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.ib(i,e)})}ib(t,e){e.port&&pt.closeChannelPort(e.port),this.Re.delete(t)}Jw(){this.Re.forEach(t=>{t.port&&pt.closeChannelPort(t.port)}),this.Re.clear()}tb(t){let e=null;return this.Re.forEach((i,n)=>{e===null&&i.iframe===t&&(e=n)}),e}sb(t){return t.id!==pa&&(!t.src||qe(t.src,"about:")||dn(Ha(t.src),this.h.hostnames))}Xw(t){this.Re.forEach(e=>{this.fh(e,t)})}fh(t,e){let i=e.type===K.SensitiveStatus||e.type===K.RecordingContext;t.port&&(!i||t.initialStatusSent)&&pt.sendChannelMessage(t.port,e)}eb(){this.Re.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.rb(e);pt.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Kw(){let t=this.nb();this.Re.forEach(e=>{e.port?pt.sendChannelMessage(e.port,t):e.iframe.contentWindow&&pt.sendPostMessage(e.iframe.contentWindow,"*",t)})}rb(t){return pt.buildBaseMessage(K.Discovery,Zt.Parent,this.h.projectId,t)}nb(){return pt.buildBaseMessage(K.Stop,Zt.Parent,this.h.projectId)}ob(t,e){let i=this.Re.get(t);if(i===void 0){j.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.uh})`);return}i.port=e,i.port.onmessage=n=>{this.gh(n,i)}}ab(t){if(!t.port)return;let e=pt.buildBaseMessage(K.SensitiveStatus,Zt.Parent,this.h.projectId),i=this.Yw();this.fa(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,pt.sendChannelMessage(t.port,e)}cb(t){if(!t.port)return;let e=pt.buildBaseMessage(K.RecordingContext,Zt.Parent,this.h.projectId),i=this.Ww();this.fa(t)&&(i.isRecording=!1),e.content=i,pt.sendChannelMessage(t.port,e)}gh(t,e){if(e===void 0){j.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===K.EndOfBufferedMessages?(this.ab(e),this.cb(e),e.initialStatusSent=!0):this.jf(e.iframe,i,n)}ph(t){if(pt.isMessageValid(t,Zt.Child,this.h.projectId,this.h.hostnames))switch(t.data.type){case K.Discovery:if(t.data.id===void 0){this.Hf();return}if(t.ports&&t.ports.length===1&&this.Re.has(t.data.id)){this.ob(t.data.id,t.ports[0]);return}j.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case K.ChildLogMessage:this.jf(null,K.ChildLogMessage,t.data.content);break;default:j.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}fa(t){return N.isMaskedElement(t.iframe)||N.isMaskedElementChild(t.iframe)}}return s})();var Dm="CS_ANONYMIZED_VALUE",Lm=(()=>{class s{constructor(t,e){this.I=t,this.A=e}anonymize(t){return $(t.message)&&(t.message=this.gb(t.message),t.message=this.I.anonymizePII(t.message)),$(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}gb(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Dm}'`)}}return s})(),xm=(()=>{class s extends Nc{constructor(t){super(),this.mb=t,this.Ls=[{boundElement:document,type:"touchstart",listener:e=>this.G(e)},{boundElement:document,type:"touchmove",listener:e=>this.G(e)},{boundElement:document,type:"touchend",listener:e=>this.G(e)}],this.Ln=new Jr,this.Ln.onGesture((e,i)=>this._l(e,i))}_l(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,t=>Pt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,t=>Ot(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}G(t){this.mb.tryToExecute("process gesture event",()=>{if(this.Ln.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Ln.processActionDown(t);break;case"touchmove":this.Ln.processActionMove();break;case"touchend":this.Ln.processActionUp(t);break}})()}static isSwipe(t){return t.type===mt.FLICK||t.type===mt.DRAG}}return s})(),Vm=(()=>{class s extends Dt{constructor(t,e){super(),this.V=t,this.yh=e,this.$f=0}onStart(){j.isPerfLoggingActive()&&(this.Nn=window.csSetInterval(()=>this.zf(),s.yb))}onStop(){j.isPerfLoggingActive()&&(this.zf(),csClearInterval(this.Nn))}zf(){if(xi.isEmpty||this.$f>=s.Eb)return;this.$f++;let t={a:s.Sb,l:s.vb,...this.yh.getRequestParameters()},e=[];xi.forEach(i=>{csArray.prototype.forEach.call(i,n=>{csArray.prototype.push.call(e,{...n,...t})})}),this.V.send(e),xi.clear()}}return s.Sb="uxa",s.vb="perf",s.yb=5e3,s.Eb=5,s})(),Um=(()=>{class s{constructor(t,e,i){this.h=t,this.yh=e,this.At=i}init(){this.qf=new Vm(this.At.create(this.h.getLoggerUri(),!0),this.yh)}onStartTracking(){this.qf.start()}onOptout(){this.qf.stop()}}return s})(),jm=(()=>{class s{constructor(t){this.ue=t,this.Gf=!1}enableRecordingContext(t,e,i){this.Gf=!0,this.Wi=t,this.w=e,this.Ai=i}getRecordingContext(){var t,e,i,n;if(!this.Gf)return{isRecording:!1,recordingStartTimestamp:0,etrState:Ct.ETR_OFF,etrStatus:Rt.ETR_DISABLED,collectState:I.ANALYTICS_ONLY};let a=this.w.getSession();return{isRecording:this.Wi.isRecording(),useAnonymization:this.ue.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Wi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Wi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Wi.getRecordingStartTimestamp(),10),etrState:(i=a==null?void 0:a.etrState)!==null&&i!==void 0?i:Ct.ETR_OFF,etrStatus:this.Ai.getEtrStatus(a),collectState:(n=a==null?void 0:a.collectState)!==null&&n!==void 0?n:I.ANALYTICS_ONLY}}}return s})(),ci=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var Hm=20,Bm="Custom Error:",Fm="https://cserror.com/texterror.js",$m=(()=>{class s extends Dt{constructor(t,e,i,n,a,c){super(),this.ws=t,this.vh=e,this.Z=i,this.ae=n,this.$s=a,this.A=c,this.Ea=[],this.vi=0,this.Mi=[]}initStates(){this.es=O.now(),this.vh.removeQueryParams(),this.vh.setQueryParams(this.Z.getRequestParameters()),this.Ea=[],this.vi=0}onStart(){this.ws.subscribe(s.Mt,t=>this.G(t)),this._h()}onStop(){this.ws.unsubscribe(s.Mt)}onIframeJavascriptError(t){this.G(t)}trackCustomError(t){let e={errorType:"jsError",message:`${Bm} ${t}`,lineno:1,colno:1,filename:Fm};this.Vn(e)}Vn(t){if(this.isStarted){let e=this.G(t);e&&this.$s.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}_h(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Vn(t)),this.Mi=[])}G(t){if(this.isStarted&&this.vi<Hm){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.Pi()};return this.ae.anonymize(e),csArray.prototype.push.call(this.Ea,e),this.xn(),e}return null}Pi(){return O.now()-this.es}xn(){this.vh.send({errors:this.Ea}),this.Ea=[],this.vi+=1}}return s.Mt="JavaScriptErrorsService",s})(),An=["trackError"],zm="errors",qm=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g){this.ws=t,this.ae=e,this.h=i,this.Z=n,this.ot=a,this.f=c,this.$s=l,this.A=d,this.At=g}init(){let t=this.At.create(`${this.h.getTrackerUri()}/${zm}`,!0);this.ki=new $m(this.ws,t,this.Z,this.ae,this.$s,this.A),this.ot.addListener(this.ki),this.at()}at(){this.h.jsCustomErrorsEnabled&&!this.h.customErrors.enabled&&this.f.register(An,t=>{this.ki.trackCustomError(t)})}onStartTracking(){this.ki.start()}onAfterNaturalPageView(){this.ki.initStates()}onAfterArtificialPageView(){this.ki.initStates()}onBeforeSessionRenewal(){this.ki.stop()}onOptout(){this.ki.stop()}}return s})(),Gm=(()=>{let s;return function(r){function a(d,g,u=!1){let E={message:It.truncate(d,300,It.ELLIPSIS),errorType:"customError"};return(u||l(g))&&(c(g),E.attributes=g),E}r.buildCustomErrorEvent=a;function c(d){for(let g in d){let u=d[g];if(typeof u=="string"&&u.length>30&&(u=It.truncate(u,30,It.ELLIPSIS),d[g]=u),g.length>30){let y=It.truncate(g,30,It.ELLIPSIS);delete d[g],d[y]=u}}}function l(d){let g=Object.keys(d).length;return g>0&&g<=5}}(s||(s={})),s})(),Wm=20,Ym=(()=>{class s extends Dt{constructor(t,e,i,n,a){super(),this.bh=t,this.Z=e,this.Xs=i,this.J=n,this.bs=a,this.Sa=[],this._i=0,this.Mi=[]}initStates(){var t;this.Sh(),this.es=O.now(),this.Sa=[],this._i=0,(t=this.bs)===null||t===void 0||t.onEvent(e=>this.G(e))}trackCustomError(t,e={}){if(!($(t)&&As(e)&&Nt(e)))throw new Error(`Command misuse: ${An[0]}`);let i=Gm.buildCustomErrorEvent(t,e);this.Vn(i)}onIframeCustomError(t){this.G(t)}onStart(){var t;this._h(),(t=this.bs)===null||t===void 0||t.start()}onStop(){var t;(t=this.bs)===null||t===void 0||t.stop()}_h(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Vn(t)),this.Mi=[])}Vn(t){if(this.isStarted){let e=this.G(t);e&&this.J.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}G(t){if(this.isStarted&&this._i<Wm){let e=this._b(t);return csArray.prototype.push.call(this.Sa,e),this.xn(),e}return null}_b(t){let e={...t,rt:this.Pi()};return e.message=this.Xs.anonymize(t.message),e}Sh(){this.bh.removeQueryParams(),this.bh.setQueryParams(this.Z.getRequestParameters())}Pi(){return O.now()-this.es}xn(){this.bh.send({errors:this.Sa}),this.Sa=[],this._i+=1}}return s})(),Xm="custom-errors",Km=(()=>{class s{constructor(t,e,i,n,a,c,l,d){this.Xs=t,this.h=e,this.Z=i,this.f=n,this.$s=a,this.At=c,this.ot=l,this.bs=d}init(){let t=this.At.create(`${this.h.getTrackerUri()}/${Xm}`,!0);this.Di=new Ym(t,this.Z,this.Xs,this.$s,this.bs),this.ot.addListener(this.Di),this.at()}at(){this.f.register(An,(t,e)=>{this.Di.trackCustomError(t,e)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),Jm=(()=>{class s{constructor(){this.Ah=Hi.Natural}setPageViewType(t){this.Ah=t}getPageViewType(){return this.Ah}getRequestParameters(){return{pvt:this.Ah}}}return s})(),Qm=(()=>{class s{constructor(t){this.X=t}onAfterVisitorRenewal(){this.X.renewSession()}}return s})();var Zm=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),a=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let d=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(l==="x"?d:d&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let a=0;a<i.length;a+=1)n=csString.prototype.charCodeAt.call(i,a)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var ce;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(ce||(ce={}));var te;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(te||(te={}));var ty=(()=>{class s{constructor(t,e,i,n){this.de=t,this.h=e,this.A=i,this.va=n}init(){this.Ub()}shouldMaskNonTextElements(){return this.h.isSMB&&this.h.anonymisationMethod===ce.replayRecordingMaskedUrlRegexRules&&this.shouldUseAnonymization()}shouldUseAnonymization(){if(this.de.isReplayUnanonymizedAllowedByConsent()){switch(this.h.anonymisationMethod){case null:case ce.replayRecordingMaskedUrlRegex:return!!(this.h.replayRecordingMaskedUrlRegex&&this.h.replayRecordingMaskedUrlRegex.test(this.A.getAnonymizedUrl()));case ce.replayRecordingMaskedUrlRegexRules:return this.va.evaluateUrl(this.A.getAnonymizedUrl())}return!1}else{switch(this.h.anonymisationMethod){case null:case ce.replayRecordingUnmaskedUrlRegex:return!(this.h.replayRecordingUnmaskedUrlRegex&&this.h.replayRecordingUnmaskedUrlRegex.test(this.A.getAnonymizedUrl()));case ce.replayRecordingUnmaskedUrlRegexRules:return!this.va.evaluateUrl(this.A.getAnonymizedUrl())}return!0}}Ub(){this.h.anonymisationMethod===ce.replayRecordingMaskedUrlRegexRules&&this.h.replayRecordingMaskedUrlRegexRules?this.va.setRegexRules(this.h.replayRecordingMaskedUrlRegexRules):this.h.anonymisationMethod===ce.replayRecordingUnmaskedUrlRegexRules&&this.h.replayRecordingUnmaskedUrlRegexRules&&this.va.setRegexRules(this.h.replayRecordingUnmaskedUrlRegexRules)}}return s})(),ey=(()=>{class s{constructor(){this.Qf=[]}setRegexRules(t){this.Qf=csArray.prototype.map.call(t,e=>this.jb(e))}evaluateUrl(t){return csArray.prototype.some.call(this.Qf,e=>{var i,n;let a=this.Hb(t,e);return e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):(n=e.regex)===null||n===void 0?void 0:n.test(a)})}Hb(t,e){let i=pn(t);return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}_a(t){return t.ignoreCaseSensitivity?"i":""}jb(t){switch(t.operator){case te.NOT_START:t.notOperator=!0;case te.START:t.regex=new csRegExp(`^${t.value}`,this._a(t));break;case te.NOT_END:t.notOperator=!0;case te.END:t.regex=new csRegExp(`${t.value}$`,this._a(t));break;case te.NOT_CONTAIN:t.notOperator=!0;case te.CONTAIN:t.regex=new csRegExp(`${t.value}`,this._a(t));break;case te.NOT_EXACT:t.notOperator=!0;case te.EXACT:t.regex=new csRegExp(`^${t.value}$`,this._a(t));break;default:j.warn(`buildRegexWithRule, unknown type: ${t.operator}`)}return t}}return s})();var sy=(()=>{class s extends ne{constructor(t){super(),this.U=null,this.Aa=null,this.P=null,this.js=null,this.ng=["value","checked","src","data","alt"],this.Ta={state:N.MaskedElementState.Child},this.TA=e=>{for(let i of e){if(N.isMaskedElement(i.target)||N.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let a=i.addedNodes[n];N.isMaskedElement(a)||N.isMaskedElementChild(a)||nt(a)&&this.og(a)}for(let n=0;n<i.removedNodes.length;n+=1){let a=i.removedNodes[n];ut.isConnected(a)||this.ag(a)}}},this.RA=t}setMaskedElementSettings(t){this.As=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.As||(ct.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.As={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:a,attrSelector:c,attrSelectors:l}=this.As;(t=this.js)!==null&&t!==void 0||(this.js=this.CA()),a.length!==0&&((e=this.U)!==null&&e!==void 0||(this.U=this.IA()),this.U.observe(a)),c.length!==0&&((i=this.Aa)!==null&&i!==void 0||(this.Aa=this.PA(l)),this.Aa.observe(c)),(n=this.P)!==null&&n!==void 0||(this.P=new We(this.TA,(d,g)=>g==="added"&&this.OA(d))),this.P.observe(),csSetTimeout(this.RA)}onStop(){var t,e,i;this.U&&(this.ag(document),this.U.disconnect()),(t=this.Aa)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect(),(i=this.js)===null||i===void 0||i.disconnect()}CA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}IA(){return new Is(t=>{csArray.prototype.forEach.call(t,e=>{this.NA(e)?this.og(e):(this.MA(e),this.kA(e))})})}PA(t){return new Is(e=>{csArray.prototype.forEach.call(e,i=>this.DA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=N.getMaskedElementDetails(t.target);if(i.state!==N.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:et(t.target),width:e.width,height:e.height})}kA(t){!this.js||!nt(t)||Xi(t)||this.js.observe(t)}NA(t){let e=csNodeparentNode.apply(t);return e?N.isMaskedElement(e)||N.isMaskedElementChild(e):ri(t)?N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host):!1}OA(t){(N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host))&&N.setMaskedElementProperty(t,this.Ta)}ag(t){Yt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{N.unsetMaskedElementProperty(i)})}MA(t){let e=t.getBoundingClientRect(),i={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t,i),this.LA(t),Yt(t).visitAll(n=>n!=t&&N.setMaskedElementProperty(n,this.Ta))}og(t){N.setMaskedElementProperty(t,this.Ta),Yt(t).visitAll(e=>e!=t&&N.setMaskedElementProperty(e,this.Ta))}LA(t){var e;let i=(e=G.getProperty(t,N.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.ng.length;n+=1){let a=this.ng[n];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&N.setMaskedAttributeProperty(t,i)}DA(t,e){var i;let n=(i=G.getProperty(t,N.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Xt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&N.setMaskedAttributeProperty(t,n)}}return de([L()],s.prototype,"resizeObserverCallback",null),s})(),iy=(()=>{class s{constructor(){this.Mh=0,this.N=!1,this.cg="data-cs-capture",this.Ys=t=>{for(let e of t){if(he.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];he.isWhitelistedElement(n)||nt(n)&&this.lg(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ut.isConnected(n)||this.hg(n)}}}}start(){this.Mh++,!this.N&&(this.N=!0,this.xA())}xA(){this.U||(this.U=new Is(e=>J(e,i=>this.lg(i))));let t=this.kh?`[${this.cg}], ${this.kh}`:`[${this.cg}]`;this.U.observe(t),this.P||(this.P=new We(this.Ys,(e,i)=>i==="added"&&this.VA(e))),this.P.observe()}stop(){this.N&&(this.Mh--,this.Mh===0&&(this.N=!1,this.UA()))}UA(){this.U&&(this.hg(document),this.U.disconnect()),this.P&&this.P.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Qs(t))this.kh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.kh}lg(t){Yt(t).visitAll(e=>{he.whitelistElement(e)})}VA(t){he.isWhitelistedElement(t.host)&&he.whitelistElement(t)}hg(t){Yt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{he.removeWhitelistElement(i)})}}return s})(),ry=(()=>{class s{constructor(){this.U=null,this.P=null,this.N=!1,this.Ys=t=>{for(let e of t)if(Me.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Me.isEditableNode(n)){if(Bi(n)||Eh(n)){Me.markEditableNode(n);continue}nt(n)&&this.ug(n)}}}}start(){this.N||(this.N=!0,this.U=new Is(t=>J(t,e=>{this.ug(e)})),this.U.observe("[contenteditable]"),this.P=new We(this.Ys,(t,e)=>e==="added"&&this.jA(t)),this.P.observe())}stop(){var t,e;this.N&&(this.N=!1,(t=this.U)===null||t===void 0||t.disconnect(),this.U=null,(e=this.P)===null||e===void 0||e.disconnect(),this.P=null)}ug(t){Yt(t).visitAll(e=>{Me.markEditableNode(e)})}jA(t){Me.isEditableNode(t.host)&&Me.markEditableNode(t)}}return s})();var ny=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},oy=5e3,ay=(()=>{class s extends Ma{constructor(t,e,i){super(t,e),this.mr=null,this.BA=(i==null?void 0:i.type)||"json",this.pg=i==null?void 0:i.cacheMinutes,this.Mr=i==null?void 0:i.timeout}onLoad(t){this.Ui=t}onError(t){this.Nr=t}onTimeout(t,e){this.ai=t,this.Mr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.ic(t);let e=oi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.ih(i,this.BA)}abort(){this.mr&&(this.mr.abort(),this.mr=null)}isInProgress(){return this.mr!==null}ih(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var a;return(a=this.Nr)===null||a===void 0?void 0:a.call(this,n)},n.ontimeout=()=>{var a;return(a=this.ai)===null||a===void 0?void 0:a.call(this,n)},n.onload=()=>{var a,c;n.status>=200&&n.status<400?((a=this.Ui)===null||a===void 0||a.call(this,this.FA(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Nr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.mr=null},n.timeout=(i=this.Mr)!==null&&i!==void 0?i:oy,this.mr=n,n.send()}FA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ic(t){let e;this.pg?e=`${ny(this.pg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var cy=(()=>{class s{constructor(t,e,i,n,a){this.nt=t,this.gt=e,this.fe=i,this.Ot=n,this.tt=a}getSensitiveStatus(){var t,e;return{started:this.fe.isStarted,useAnonymization:this.nt.shouldUseAnonymization(),capturedElementSelector:this.Ot.getWhitelistedElementsSelector(),maskedElementSettings:this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.fe.isStarted,i=this.nt.shouldUseAnonymization();return e?N.isMaskedElement(t)||N.isMaskedElementChild(t)?Ne.MASKED:Yp.shouldEncrypt(t)?Ne.ENCRYPTED:Me.isEditableNode(t)?Ne.ANONYMIZED:i?he.isWhitelistedElement(t)?Ne.CAPTURED:Ne.ANONYMIZED:Ne.CAPTURED:Ne.ANONYMIZED}}return s})(),ly=["setEncryptionSelectors"],Mc=["setPIISelectors"],hy=["setCapturedElementsSelector"],uy=(()=>{class s{constructor(t,e,i,n,a,c,l){this.E=t,this.f=e,this.gt=i,this.fe=n,this.Ot=a,this.tt=c,this.Sr=l}init(){var t,e;this.Sr&&this.tt&&((t=this.Sr)===null||t===void 0||t.addSelector((e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.at()}onStartTracking(t){this.fe.start(),this.E.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.fe.stop(),this.E.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.fe.start(),this.E.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.fe.stop(),this.E.emitSensitiveStatusChange()}onOptout(){this.fe.stop(),this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.E.emitSensitiveStatusChange()}at(){this.f.register(Mc,t=>{this.gt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()}),this.f.register(hy,t=>{this.Ot.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(ly,t=>{var e,i;(e=this.tt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Sr)===null||i===void 0||i.addSelector(t)})}}return s})(),dy=(()=>{class s extends Dt{constructor(t,e,i,n,a,c){super(),this.jt=t,this.gt=e,this.Ot=i,this.Sr=n,this.vr=a,this.nt=c}onStart(){var t,e,i;this.Ot.start(),this.jt.setMaskedElementSettings(this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.jt.startIdentifier(),(e=this.Sr)===null||e===void 0||e.start(),(i=this.vr)===null||i===void 0||i.start()}onStop(){var t,e;this.Ot.stop(),this.jt.stopIdentifier(),(t=this.Sr)===null||t===void 0||t.stop(),(e=this.vr)===null||e===void 0||e.stop()}}return s})();var py=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,fy="$1$4CS_ANONYMIZED_NAME$3$6",gy=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,my="CS_ANONYMIZED_PHONE",yy=(()=>{class s{constructor(t,e){this.I=t,this.K=e}anonymize(t){return this.K?csArray.prototype.join.call(csArray.prototype.map.call(jd(t),({content:e,isUrl:i})=>{var n;return i?(n=this.K)===null||n===void 0?void 0:n.anonymizeUrl(e,{maskNames:!0}):this.Eg(e)}),""):this.Eg(t)}Eg(t){t=this.I.anonymizePII(t);let e=t;t=this.Dn(t),t!==e&&(rt.counters.redactedPII.count("name"),rt.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.eT(t),t!==i&&(rt.counters.redactedPII.count("phone"),rt.counters.redactedPII.count("phone-in-custom-error")),t}Dn(t){return csString.prototype.replace.call(t,py,fy)}eT(t){return csString.prototype.replace.call(t,gy,my)}}return s})(),na=(()=>{let s;return function(r){function t(u,y){for(let E of u)if(i(E,y))return!0;return!1}r.isUrlMatching=t;function e(u,y){if($(y)){for(let E of u)if(i(E,y))return!0}else if(Kn(y)){for(let E of u)if(i(E,csString(y)))return!0}return!1}r.isMatching=e;function i(u,y){let E=n(u,y);return u.negate?!E:E}function n(u,y){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(y=(new csDate(y).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return $(u.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return y===u.pattern||y===csString(u.pattern);case"number":return Nt(y)?Number(y)===Number(u.pattern):!1;default:return y===u.pattern}case"starts_with":return $(u.pattern)?csString.prototype.indexOf.call(y,u.pattern)===0:!1;case"ends_with":return $(u.pattern)?pi(y,u.pattern):!1;case"contains":return $(u.pattern)?csString.prototype.indexOf.call(y,u.pattern)!==-1:!1;case"regex":if(!$(u.pattern))return!1;try{return new csRegExp(u.pattern).test(y)}catch(E){return j.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case"simple":return $(u.pattern)?g(y)===g(u.pattern):!1;case"greater_than":return Number(y)>Number(u.pattern);case"less_than":return Number(y)<Number(u.pattern);case"exact_date":{let E=Number(u.pattern);if(!se(E))return!1;let v=new csDate(E*1e3);return new csDate(y).toDateString()===v.toDateString()}case"exact_days_ago":return a(u,y);case"more_than_days_ago":return c(u,y);case"less_than_days_ago":return l(u,y);case"unknown":return d(y);default:return j.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function a(u,y){let E=new csDate,v=E.setDate(E.getDate()-Number(u.pattern)),T=new csDate(v);return new csDate(y).toDateString()===T.toDateString()}function c(u,y){let E=Number(u.pattern);if(!se(E))return!1;let v=Number(E)+1,T=new csDate,M=new csDate(T);return M.setDate(T.getDate()-v),new csDate(y).getTime()<=M.getTime()}function l(u,y){let E=Number(u.pattern);if(!se(E))return!1;if(E===0)return a(u,y);let v=new csDate,T=new csDate(v);return T.setDate(v.getDate()-E),new csDate(y).getTime()>=T.getTime()}function d(u){return Nt(u)?$(u)?csString.prototype.trim.call(u)==="":Kn(u)?u===!0:se(u)?u!==0:!1:!0}function g(u){let y=qe(u,"http://")||qe(u,"https://")?u:`https://${u}`,E=pn(y);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):u}}(s||(s={})),s})(),Ey=(()=>{class s{constructor(){this.Sg=[],this.vg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Sg,e):e.component==="trigger"&&csArray.prototype.push.call(this.vg,e)}matchUrl(t){return na.isUrlMatching(this.Sg,t)}matchTrigger(t){return na.isMatching(this.vg,t)}}return s})(),Sy=(()=>{class s extends Dt{constructor(t,e,i){super(),this.Ca=t,this.Hh=e,this.A=i}init(){this.Bh=new Ey,this.Ca&&this.Bh.setTargetingRules(this.Ca)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Fh(t,"url")&&this.Hh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Fh(t,"url")&&this.Hh()}onExternalEvent(t){this.isStarted&&this.Fh(t.name,"trigger")&&this.Hh()}Fh(t,e){var i,n;return e==="url"&&$(t)&&(!((i=this.Bh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Bh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),vy=(()=>{class s{constructor(t,e,i,n,a,c){this.Ca=t,this.sT=e,this.E=i,this.et=n,this.J=a,this.A=c}init(){this.Bn=new Sy(this.Ca,this.sT,this.A),this.J.addListener(this.Bn),this.Bn.init()}start(){this.Bn.start()}stop(){this.Bn.stop()}checkInitialUrlTargetingRules(){this.Bn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.et.getInitialCollectState();t===I.ANALYTICS_ONLY?this.E.emitCollectStateChange(I.ANALYTICS_ONLY_RULES_TARGETING,Ct.ETR_OFF):t===I.RECORDING_GLOBAL_SAMPLING&&this.E.emitCollectStateChange(I.RECORDING_RULES_TARGETING,Ct.ETR_OFF)}}return s})();var _y=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),wy=(()=>{class s{constructor(){}static init(t){(!this.$h||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.$h=new Map,i){let n=csString.prototype.split.call(i,".");for(let a=0;a<n.length;a++){let[c,l]=csString.prototype.split.call(n[a],"=");this.$h.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.$h)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(_y.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,d=n.value;by(s.getString("debugLog"),t)&&(n.value=function(...g){return console.log(l,...g),d.bind(this)(...g)})}}}return s})();function by(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function oa(){function i(o){let p=o.length;for(;--p>=0;)o[p]=0}let n=0,a=1,c=2,l=3,d=258,g=29,u=256,y=u+1+g,E=30,v=19,T=2*y+1,M=15,R=16,b=7,x=256,w=16,k=17,U=18,W=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ot=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),yt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=512,P=new Array((y+2)*2);i(P);let V=new Array(E*2);i(V);let H=new Array(S);i(H);let tt=new Array(d-l+1);i(tt);let lt=new Array(g);i(lt);let At=new Array(E);i(At);function pe(o,p,f,m,h){this.static_tree=o,this.extra_bits=p,this.extra_base=f,this.elems=m,this.max_length=h,this.has_stree=o&&o.length}let Ye,nr,us;function fe(o,p){this.dyn_tree=o,this.max_code=0,this.stat_desc=p}let Ls=o=>o<256?H[o]:H[256+(o>>>7)],oe=(o,p)=>{o.pending_buf[o.pending++]=p&255,o.pending_buf[o.pending++]=p>>>8&255},St=(o,p,f)=>{o.bi_valid>R-f?(o.bi_buf|=p<<o.bi_valid&65535,oe(o,o.bi_buf),o.bi_buf=p>>R-o.bi_valid,o.bi_valid+=f-R):(o.bi_buf|=p<<o.bi_valid&65535,o.bi_valid+=f)},Lt=(o,p,f)=>{St(o,f[p*2],f[p*2+1])},xs=(o,p)=>{let f=0;do f|=o&1,o>>>=1,f<<=1;while(--p>0);return f>>>1},or=o=>{o.bi_valid===16?(oe(o,o.bi_buf),o.bi_buf=0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},ar=(o,p)=>{let f=p.dyn_tree,m=p.max_code,h=p.stat_desc.static_tree,A=p.stat_desc.has_stree,_=p.stat_desc.extra_bits,C=p.stat_desc.extra_base,X=p.stat_desc.max_length,B,jt,be,st,Ze,fs,Ri=0;for(st=0;st<=M;st++)o.bl_count[st]=0;for(f[o.heap[o.heap_max]*2+1]=0,B=o.heap_max+1;B<T;B++)jt=o.heap[B],st=f[f[jt*2+1]*2+1]+1,st>X&&(st=X,Ri++),f[jt*2+1]=st,!(jt>m)&&(o.bl_count[st]++,Ze=0,jt>=C&&(Ze=_[jt-C]),fs=f[jt*2],o.opt_len+=fs*(st+Ze),A&&(o.static_len+=fs*(h[jt*2+1]+Ze)));if(Ri!==0){do{for(st=X-1;o.bl_count[st]===0;)st--;o.bl_count[st]--,o.bl_count[st+1]+=2,o.bl_count[X]--,Ri-=2}while(Ri>0);for(st=X;st!==0;st--)for(jt=o.bl_count[st];jt!==0;)be=o.heap[--B],!(be>m)&&(f[be*2+1]!==st&&(o.opt_len+=(st-f[be*2+1])*f[be*2],f[be*2+1]=st),jt--)}},Vs=(o,p,f)=>{let m=new Array(M+1),h=0,A,_;for(A=1;A<=M;A++)m[A]=h=h+f[A-1]<<1;for(_=0;_<=p;_++){let C=o[_*2+1];C!==0&&(o[_*2]=xs(m[C]++,C))}},Cn=()=>{let o,p,f,m,h,A=new Array(M+1);for(f=0,m=0;m<g-1;m++)for(lt[m]=f,o=0;o<1<<W[m];o++)tt[f++]=m;for(tt[f-1]=m,h=0,m=0;m<16;m++)for(At[m]=h,o=0;o<1<<ot[m];o++)H[h++]=m;for(h>>=7;m<E;m++)for(At[m]=h<<7,o=0;o<1<<ot[m]-7;o++)H[256+h++]=m;for(p=0;p<=M;p++)A[p]=0;for(o=0;o<=143;)P[o*2+1]=8,o++,A[8]++;for(;o<=255;)P[o*2+1]=9,o++,A[9]++;for(;o<=279;)P[o*2+1]=7,o++,A[7]++;for(;o<=287;)P[o*2+1]=8,o++,A[8]++;for(Vs(P,y+1,A),o=0;o<E;o++)V[o*2+1]=5,V[o*2]=xs(o,5);Ye=new pe(P,W,u+1,y,M),nr=new pe(V,ot,0,E,M),us=new pe(new Array(0),yt,0,v,b)},In=o=>{let p;for(p=0;p<y;p++)o.dyn_ltree[p*2]=0;for(p=0;p<E;p++)o.dyn_dtree[p*2]=0;for(p=0;p<v;p++)o.bl_tree[p*2]=0;o.dyn_ltree[x*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},Pn=o=>{o.bi_valid>8?oe(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},jc=(o,p,f,m)=>{Pn(o),m&&(oe(o,f),oe(o,~f)),o.pending_buf.set(o.window.subarray(p,p+f),o.pending),o.pending+=f},On=(o,p,f,m)=>{let h=p*2,A=f*2;return o[h]<o[A]||o[h]===o[A]&&m[p]<=m[f]},cr=(o,p,f)=>{let m=o.heap[f],h=f<<1;for(;h<=o.heap_len&&(h<o.heap_len&&On(p,o.heap[h+1],o.heap[h],o.depth)&&h++,!On(p,m,o.heap[h],o.depth));)o.heap[f]=o.heap[h],f=h,h<<=1;o.heap[f]=m},Nn=(o,p,f)=>{let m,h,A=0,_,C;if(o.last_lit!==0)do m=o.pending_buf[o.d_buf+A*2]<<8|o.pending_buf[o.d_buf+A*2+1],h=o.pending_buf[o.l_buf+A],A++,m===0?Lt(o,h,p):(_=tt[h],Lt(o,_+u+1,p),C=W[_],C!==0&&(h-=lt[_],St(o,h,C)),m--,_=Ls(m),Lt(o,_,f),C=ot[_],C!==0&&(m-=At[_],St(o,m,C)));while(A<o.last_lit);Lt(o,x,p)},lr=(o,p)=>{let f=p.dyn_tree,m=p.stat_desc.static_tree,h=p.stat_desc.has_stree,A=p.stat_desc.elems,_,C,X=-1,B;for(o.heap_len=0,o.heap_max=T,_=0;_<A;_++)f[_*2]!==0?(o.heap[++o.heap_len]=X=_,o.depth[_]=0):f[_*2+1]=0;for(;o.heap_len<2;)B=o.heap[++o.heap_len]=X<2?++X:0,f[B*2]=1,o.depth[B]=0,o.opt_len--,h&&(o.static_len-=m[B*2+1]);for(p.max_code=X,_=o.heap_len>>1;_>=1;_--)cr(o,f,_);B=A;do _=o.heap[1],o.heap[1]=o.heap[o.heap_len--],cr(o,f,1),C=o.heap[1],o.heap[--o.heap_max]=_,o.heap[--o.heap_max]=C,f[B*2]=f[_*2]+f[C*2],o.depth[B]=(o.depth[_]>=o.depth[C]?o.depth[_]:o.depth[C])+1,f[_*2+1]=f[C*2+1]=B,o.heap[1]=B++,cr(o,f,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],ar(o,p),Vs(f,X,o.bl_count)},Mn=(o,p,f)=>{let m,h=-1,A,_=p[0*2+1],C=0,X=7,B=4;for(_===0&&(X=138,B=3),p[(f+1)*2+1]=65535,m=0;m<=f;m++)A=_,_=p[(m+1)*2+1],!(++C<X&&A===_)&&(C<B?o.bl_tree[A*2]+=C:A!==0?(A!==h&&o.bl_tree[A*2]++,o.bl_tree[w*2]++):C<=10?o.bl_tree[k*2]++:o.bl_tree[U*2]++,C=0,h=A,_===0?(X=138,B=3):A===_?(X=6,B=3):(X=7,B=4))},kn=(o,p,f)=>{let m,h=-1,A,_=p[0*2+1],C=0,X=7,B=4;for(_===0&&(X=138,B=3),m=0;m<=f;m++)if(A=_,_=p[(m+1)*2+1],!(++C<X&&A===_)){if(C<B)do Lt(o,A,o.bl_tree);while(--C!==0);else A!==0?(A!==h&&(Lt(o,A,o.bl_tree),C--),Lt(o,w,o.bl_tree),St(o,C-3,2)):C<=10?(Lt(o,k,o.bl_tree),St(o,C-3,3)):(Lt(o,U,o.bl_tree),St(o,C-11,7));C=0,h=A,_===0?(X=138,B=3):A===_?(X=6,B=3):(X=7,B=4)}},Hc=o=>{let p;for(Mn(o,o.dyn_ltree,o.l_desc.max_code),Mn(o,o.dyn_dtree,o.d_desc.max_code),lr(o,o.bl_desc),p=v-1;p>=3&&o.bl_tree[Et[p]*2+1]===0;p--);return o.opt_len+=3*(p+1)+5+5+4,p},Bc=(o,p,f,m)=>{let h;for(St(o,p-257,5),St(o,f-1,5),St(o,m-4,4),h=0;h<m;h++)St(o,o.bl_tree[Et[h]*2+1],3);kn(o,o.dyn_ltree,p-1),kn(o,o.dyn_dtree,f-1)},Fc=o=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&o.dyn_ltree[f*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(f=32;f<u;f++)if(o.dyn_ltree[f*2]!==0)return 1;return 0},Dn=!1,$c=o=>{Dn||(Cn(),Dn=!0),o.l_desc=new fe(o.dyn_ltree,Ye),o.d_desc=new fe(o.dyn_dtree,nr),o.bl_desc=new fe(o.bl_tree,us),o.bi_buf=0,o.bi_valid=0,In(o)},Ln=(o,p,f,m)=>{St(o,(n<<1)+(m?1:0),3),jc(o,p,f,!0)},zc=o=>{St(o,a<<1,3),Lt(o,x,P),or(o)},qc=(o,p,f,m)=>{let h,A,_=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=Fc(o)),lr(o,o.l_desc),lr(o,o.d_desc),_=Hc(o),h=o.opt_len+3+7>>>3,A=o.static_len+3+7>>>3,A<=h&&(h=A)):h=A=f+5,f+4<=h&&p!==-1?Ln(o,p,f,m):o.strategy===4||A===h?(St(o,(a<<1)+(m?1:0),3),Nn(o,P,V)):(St(o,(c<<1)+(m?1:0),3),Bc(o,o.l_desc.max_code+1,o.d_desc.max_code+1,_+1),Nn(o,o.dyn_ltree,o.dyn_dtree)),In(o),m&&Pn(o)},Gc=(o,p,f)=>(o.pending_buf[o.d_buf+o.last_lit*2]=p>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=p&255,o.pending_buf[o.l_buf+o.last_lit]=f&255,o.last_lit++,p===0?o.dyn_ltree[f*2]++:(o.matches++,p--,o.dyn_ltree[(tt[f]+u+1)*2]++,o.dyn_dtree[Ls(p)*2]++),o.last_lit===o.lit_bufsize-1);var Wc=$c,Yc=Ln,Xc=qc,Kc=Gc,Jc=zc,Qc={_tr_init:Wc,_tr_stored_block:Yc,_tr_flush_block:Xc,_tr_tally:Kc,_tr_align:Jc},xn=(o,p,f,m)=>{let h=o&65535|0,A=o>>>16&65535|0,_=0;for(;f!==0;){_=f>2e3?2e3:f,f-=_;do h=h+p[m++]|0,A=A+h|0;while(--_);h%=65521,A%=65521}return h|A<<16|0};let Zc=()=>{let o,p=[];for(var f=0;f<256;f++){o=f;for(var m=0;m<8;m++)o=o&1?3988292384^o>>>1:o>>>1;p[f]=o}return p},tl=new Uint32Array(Zc());var ge=(o,p,f,m)=>{let h=tl,A=m+f;o^=-1;for(let _=m;_<A;_++)o=o>>>8^h[(o^p[_])&255];return o^-1},yi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:el,_tr_stored_block:sl,_tr_flush_block:il,_tr_tally:me,_tr_align:rl}=Qc,{Z_NO_FLUSH:Xe,Z_PARTIAL_FLUSH:nl,Z_FULL_FLUSH:ol,Z_FINISH:ye,Z_BLOCK:Un,Z_OK:Kt,Z_STREAM_END:jn,Z_STREAM_ERROR:Ht,Z_DATA_ERROR:al,Z_BUF_ERROR:hr,Z_DEFAULT_COMPRESSION:cl,Z_FILTERED:ll,Z_HUFFMAN_ONLY:Ei,Z_RLE:hl,Z_FIXED:ul,Z_DEFAULT_STRATEGY:dl,Z_UNKNOWN:pl,Z_DEFLATED:Si}=Vn,fl=9,gl=15,ml=8,ur=256+1+29,yl=30,El=19,Sl=2*ur+1,vl=15,Y=3,Ee=258,Gt=Ee+Y+1,_l=32,vi=42,dr=69,_i=73,wi=91,bi=103,Ke=113,Us=666,dt=1,js=2,Je=3,ds=4,wl=3,Se=(o,p)=>(o.msg=yi[p],p),Hn=o=>(o<<1)-(o>4?9:0),ve=o=>{let p=o.length;for(;--p>=0;)o[p]=0},_e=(o,p,f)=>(p<<o.hash_shift^f)&o.hash_mask,we=o=>{let p=o.state,f=p.pending;f>o.avail_out&&(f=o.avail_out),f!==0&&(o.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),o.next_out),o.next_out+=f,p.pending_out+=f,o.total_out+=f,o.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},vt=(o,p)=>{il(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,p),o.block_start=o.strstart,we(o.strm)},Q=(o,p)=>{o.pending_buf[o.pending++]=p},Hs=(o,p)=>{o.pending_buf[o.pending++]=p>>>8&255,o.pending_buf[o.pending++]=p&255},bl=(o,p,f,m)=>{let h=o.avail_in;return h>m&&(h=m),h===0?0:(o.avail_in-=h,p.set(o.input.subarray(o.next_in,o.next_in+h),f),o.state.wrap===1?o.adler=xn(o.adler,p,h,f):o.state.wrap===2&&(o.adler=ge(o.adler,p,h,f)),o.next_in+=h,o.total_in+=h,h)},Bn=(o,p)=>{let f=o.max_chain_length,m=o.strstart,h,A,_=o.prev_length,C=o.nice_match,X=o.strstart>o.w_size-Gt?o.strstart-(o.w_size-Gt):0,B=o.window,jt=o.w_mask,be=o.prev,st=o.strstart+Ee,Ze=B[m+_-1],fs=B[m+_];o.prev_length>=o.good_match&&(f>>=2),C>o.lookahead&&(C=o.lookahead);do if(h=p,!(B[h+_]!==fs||B[h+_-1]!==Ze||B[h]!==B[m]||B[++h]!==B[m+1])){m+=2,h++;do;while(B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&m<st);if(A=Ee-(st-m),m=st-Ee,A>_){if(o.match_start=p,_=A,A>=C)break;Ze=B[m+_-1],fs=B[m+_]}}while((p=be[p&jt])>X&&--f!==0);return _<=o.lookahead?_:o.lookahead},Qe=o=>{let p=o.w_size,f,m,h,A,_;do{if(A=o.window_size-o.lookahead-o.strstart,o.strstart>=p+(p-Gt)){o.window.set(o.window.subarray(p,p+p),0),o.match_start-=p,o.strstart-=p,o.block_start-=p,m=o.hash_size,f=m;do h=o.head[--f],o.head[f]=h>=p?h-p:0;while(--m);m=p,f=m;do h=o.prev[--f],o.prev[f]=h>=p?h-p:0;while(--m);A+=p}if(o.strm.avail_in===0)break;if(m=bl(o.strm,o.window,o.strstart+o.lookahead,A),o.lookahead+=m,o.lookahead+o.insert>=Y)for(_=o.strstart-o.insert,o.ins_h=o.window[_],o.ins_h=_e(o,o.ins_h,o.window[_+1]);o.insert&&(o.ins_h=_e(o,o.ins_h,o.window[_+Y-1]),o.prev[_&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=_,_++,o.insert--,!(o.lookahead+o.insert<Y)););}while(o.lookahead<Gt&&o.strm.avail_in!==0)},Al=(o,p)=>{let f=65535;for(f>o.pending_buf_size-5&&(f=o.pending_buf_size-5);;){if(o.lookahead<=1){if(Qe(o),o.lookahead===0&&p===Xe)return dt;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let m=o.block_start+f;if((o.strstart===0||o.strstart>=m)&&(o.lookahead=o.strstart-m,o.strstart=m,vt(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-Gt&&(vt(o,!1),o.strm.avail_out===0))return dt}return o.insert=0,p===ye?(vt(o,!0),o.strm.avail_out===0?Je:ds):(o.strstart>o.block_start&&(vt(o,!1),o.strm.avail_out===0),dt)},pr=(o,p)=>{let f,m;for(;;){if(o.lookahead<Gt){if(Qe(o),o.lookahead<Gt&&p===Xe)return dt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),f!==0&&o.strstart-f<=o.w_size-Gt&&(o.match_length=Bn(o,f)),o.match_length>=Y)if(m=me(o,o.strstart-o.match_start,o.match_length-Y),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=Y){o.match_length--;do o.strstart++,o.ins_h=_e(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=_e(o,o.ins_h,o.window[o.strstart+1]);else m=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(m&&(vt(o,!1),o.strm.avail_out===0))return dt}return o.insert=o.strstart<Y-1?o.strstart:Y-1,p===ye?(vt(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?dt:js},ps=(o,p)=>{let f,m,h;for(;;){if(o.lookahead<Gt){if(Qe(o),o.lookahead<Gt&&p===Xe)return dt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=Y-1,f!==0&&o.prev_length<o.max_lazy_match&&o.strstart-f<=o.w_size-Gt&&(o.match_length=Bn(o,f),o.match_length<=5&&(o.strategy===ll||o.match_length===Y&&o.strstart-o.match_start>4096)&&(o.match_length=Y-1)),o.prev_length>=Y&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-Y,m=me(o,o.strstart-1-o.prev_match,o.prev_length-Y),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=0,o.match_length=Y-1,o.strstart++,m&&(vt(o,!1),o.strm.avail_out===0))return dt}else if(o.match_available){if(m=me(o,0,o.window[o.strstart-1]),m&&vt(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return dt}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(m=me(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<Y-1?o.strstart:Y-1,p===ye?(vt(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?dt:js},Tl=(o,p)=>{let f,m,h,A,_=o.window;for(;;){if(o.lookahead<=Ee){if(Qe(o),o.lookahead<=Ee&&p===Xe)return dt;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=Y&&o.strstart>0&&(h=o.strstart-1,m=_[h],m===_[++h]&&m===_[++h]&&m===_[++h])){A=o.strstart+Ee;do;while(m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&h<A);o.match_length=Ee-(A-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=Y?(f=me(o,1,o.match_length-Y),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(f=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),f&&(vt(o,!1),o.strm.avail_out===0))return dt}return o.insert=0,p===ye?(vt(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?dt:js},Rl=(o,p)=>{let f;for(;;){if(o.lookahead===0&&(Qe(o),o.lookahead===0)){if(p===Xe)return dt;break}if(o.match_length=0,f=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,f&&(vt(o,!1),o.strm.avail_out===0))return dt}return o.insert=0,p===ye?(vt(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(vt(o,!1),o.strm.avail_out===0)?dt:js};function Jt(o,p,f,m,h){this.good_length=o,this.max_lazy=p,this.nice_length=f,this.max_chain=m,this.func=h}let Bs=[new Jt(0,0,0,0,Al),new Jt(4,4,8,4,pr),new Jt(4,5,16,8,pr),new Jt(4,6,32,32,pr),new Jt(4,4,16,16,ps),new Jt(8,16,32,32,ps),new Jt(8,16,128,128,ps),new Jt(8,32,128,256,ps),new Jt(32,128,258,1024,ps),new Jt(32,258,258,4096,ps)],Cl=o=>{o.window_size=2*o.w_size,ve(o.head),o.max_lazy_match=Bs[o.level].max_lazy,o.good_match=Bs[o.level].good_length,o.nice_match=Bs[o.level].nice_length,o.max_chain_length=Bs[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=Y-1,o.match_available=0,o.ins_h=0};function Il(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Si,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Sl*2),this.dyn_dtree=new Uint16Array((2*yl+1)*2),this.bl_tree=new Uint16Array((2*El+1)*2),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(vl+1),this.heap=new Uint16Array(2*ur+1),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ur+1),ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Fn=o=>{if(!o||!o.state)return Se(o,Ht);o.total_in=o.total_out=0,o.data_type=pl;let p=o.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?vi:Ke,o.adler=p.wrap===2?0:1,p.last_flush=Xe,el(p),Kt},$n=o=>{let p=Fn(o);return p===Kt&&Cl(o.state),p},Pl=(o,p)=>!o||!o.state||o.state.wrap!==2?Ht:(o.state.gzhead=p,Kt),zn=(o,p,f,m,h,A)=>{if(!o)return Ht;let _=1;if(p===cl&&(p=6),m<0?(_=0,m=-m):m>15&&(_=2,m-=16),h<1||h>fl||f!==Si||m<8||m>15||p<0||p>9||A<0||A>ul)return Se(o,Ht);m===8&&(m=9);let C=new Il;return o.state=C,C.strm=o,C.wrap=_,C.gzhead=null,C.w_bits=m,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=h+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+Y-1)/Y),C.window=new Uint8Array(C.w_size*2),C.head=new Uint16Array(C.hash_size),C.prev=new Uint16Array(C.w_size),C.lit_bufsize=1<<h+6,C.pending_buf_size=C.lit_bufsize*4,C.pending_buf=new Uint8Array(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=p,C.strategy=A,C.method=f,$n(o)},Ol=(o,p)=>zn(o,p,Si,gl,ml,dl),Nl=(o,p)=>{let f,m;if(!o||!o.state||p>Un||p<0)return o?Se(o,Ht):Ht;let h=o.state;if(!o.output||!o.input&&o.avail_in!==0||h.status===Us&&p!==ye)return Se(o,o.avail_out===0?hr:Ht);h.strm=o;let A=h.last_flush;if(h.last_flush=p,h.status===vi)if(h.wrap===2)o.adler=0,Q(h,31),Q(h,139),Q(h,8),h.gzhead?(Q(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),Q(h,h.gzhead.time&255),Q(h,h.gzhead.time>>8&255),Q(h,h.gzhead.time>>16&255),Q(h,h.gzhead.time>>24&255),Q(h,h.level===9?2:h.strategy>=Ei||h.level<2?4:0),Q(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(Q(h,h.gzhead.extra.length&255),Q(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(o.adler=ge(o.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=dr):(Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,h.level===9?2:h.strategy>=Ei||h.level<2?4:0),Q(h,wl),h.status=Ke);else{let _=Si+(h.w_bits-8<<4)<<8,C=-1;h.strategy>=Ei||h.level<2?C=0:h.level<6?C=1:h.level===6?C=2:C=3,_|=C<<6,h.strstart!==0&&(_|=_l),_+=31-_%31,h.status=Ke,Hs(h,_),h.strstart!==0&&(Hs(h,o.adler>>>16),Hs(h,o.adler&65535)),o.adler=1}if(h.status===dr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size));)Q(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=_i)}else h.status=_i;if(h.status===_i)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.name.length?m=h.gzhead.name.charCodeAt(h.gzindex++)&255:m=0,Q(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.gzindex=0,h.status=wi)}else h.status=wi;if(h.status===wi)if(h.gzhead.comment){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.comment.length?m=h.gzhead.comment.charCodeAt(h.gzindex++)&255:m=0,Q(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.status=bi)}else h.status=bi;if(h.status===bi&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&we(o),h.pending+2<=h.pending_buf_size&&(Q(h,o.adler&255),Q(h,o.adler>>8&255),o.adler=0,h.status=Ke)):h.status=Ke),h.pending!==0){if(we(o),o.avail_out===0)return h.last_flush=-1,Kt}else if(o.avail_in===0&&Hn(p)<=Hn(A)&&p!==ye)return Se(o,hr);if(h.status===Us&&o.avail_in!==0)return Se(o,hr);if(o.avail_in!==0||h.lookahead!==0||p!==Xe&&h.status!==Us){let _=h.strategy===Ei?Rl(h,p):h.strategy===hl?Tl(h,p):Bs[h.level].func(h,p);if((_===Je||_===ds)&&(h.status=Us),_===dt||_===Je)return o.avail_out===0&&(h.last_flush=-1),Kt;if(_===js&&(p===nl?rl(h):p!==Un&&(sl(h,0,0,!1),p===ol&&(ve(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),we(o),o.avail_out===0))return h.last_flush=-1,Kt}return p!==ye?Kt:h.wrap<=0?jn:(h.wrap===2?(Q(h,o.adler&255),Q(h,o.adler>>8&255),Q(h,o.adler>>16&255),Q(h,o.adler>>24&255),Q(h,o.total_in&255),Q(h,o.total_in>>8&255),Q(h,o.total_in>>16&255),Q(h,o.total_in>>24&255)):(Hs(h,o.adler>>>16),Hs(h,o.adler&65535)),we(o),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Kt:jn)},Ml=o=>{if(!o||!o.state)return Ht;let p=o.state.status;return p!==vi&&p!==dr&&p!==_i&&p!==wi&&p!==bi&&p!==Ke&&p!==Us?Se(o,Ht):(o.state=null,p===Ke?Se(o,al):Kt)},kl=(o,p)=>{let f=p.length;if(!o||!o.state)return Ht;let m=o.state,h=m.wrap;if(h===2||h===1&&m.status!==vi||m.lookahead)return Ht;if(h===1&&(o.adler=xn(o.adler,p,f,0)),m.wrap=0,f>=m.w_size){h===0&&(ve(m.head),m.strstart=0,m.block_start=0,m.insert=0);let X=new Uint8Array(m.w_size);X.set(p.subarray(f-m.w_size,f),0),p=X,f=m.w_size}let A=o.avail_in,_=o.next_in,C=o.input;for(o.avail_in=f,o.next_in=0,o.input=p,Qe(m);m.lookahead>=Y;){let X=m.strstart,B=m.lookahead-(Y-1);do m.ins_h=_e(m,m.ins_h,m.window[X+Y-1]),m.prev[X&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=X,X++;while(--B);m.strstart=X,m.lookahead=Y-1,Qe(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=Y-1,m.match_available=0,o.next_in=_,o.input=C,o.avail_in=A,m.wrap=h,Kt};var Dl=Ol,Ll=zn,xl=$n,Vl=Fn,Ul=Pl,jl=Nl,Hl=Ml,Bl=kl,Fl="pako deflate (from Nodeca project)",Fs={deflateInit:Dl,deflateInit2:Ll,deflateReset:xl,deflateResetKeep:Vl,deflateSetHeader:Ul,deflate:jl,deflateEnd:Hl,deflateSetDictionary:Bl,deflateInfo:Fl};let $l=(o,p)=>Object.prototype.hasOwnProperty.call(o,p);var zl=function(o){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let m in f)$l(f,m)&&(o[m]=f[m])}}return o},ql=o=>{let p=0;for(let m=0,h=o.length;m<h;m++)p+=o[m].length;let f=new Uint8Array(p);for(let m=0,h=0,A=o.length;m<A;m++){let _=o[m];f.set(_,h),h+=_.length}return f},qn={assign:zl,flattenChunks:ql};let Gn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Gn=!1}let $s=new Uint8Array(256);for(let o=0;o<256;o++)$s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;$s[254]=$s[254]=1;var Gl=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let p,f,m,h,A,_=o.length,C=0;for(h=0;h<_;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<_&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),C+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(C),A=0,h=0;A<C;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<_&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),f<128?p[A++]=f:f<2048?(p[A++]=192|f>>>6,p[A++]=128|f&63):f<65536?(p[A++]=224|f>>>12,p[A++]=128|f>>>6&63,p[A++]=128|f&63):(p[A++]=240|f>>>18,p[A++]=128|f>>>12&63,p[A++]=128|f>>>6&63,p[A++]=128|f&63);return p};let Wn=(o,p=o.length)=>{if(p<65534&&o.subarray&&Gn)return String.fromCharCode.apply(null,o.length===p?o:o.subarray(0,p));let f="";for(let m=0;m<p;m++)f+=String.fromCharCode(o[m]);return f};var Wl=(o,p)=>{let f=p||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,p));let m,h,A=new Array(f*2);for(h=0,m=0;m<f;){let _=o[m++];if(_<128){A[h++]=_;continue}let C=$s[_];if(C>4){A[h++]=65533,m+=C-1;continue}for(_&=C===2?31:C===3?15:7;C>1&&m<f;)_=_<<6|o[m++]&63,C--;if(C>1){A[h++]=65533;continue}_<65536?A[h++]=_:(_-=65536,A[h++]=55296|_>>10&1023,A[h++]=56320|_&1023)}return Wn(A,h)},Yl=(o,p)=>{p=p||o.length,p>o.length&&(p=o.length);let f=p-1;for(;f>=0&&(o[f]&192)===128;)f--;return f<0||f===0?p:f+$s[o[f]]>p?f:p},Yn={string2buf:Gl,buf2string:Wl,utf8border:Yl};function Xl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Kl=Xl;let Xn=Object.prototype.toString,{Z_NO_FLUSH:Jl,Z_SYNC_FLUSH:Ql,Z_FULL_FLUSH:Zl,Z_FINISH:th,Z_OK:Ai,Z_STREAM_END:eh,Z_DEFAULT_COMPRESSION:sh,Z_DEFAULT_STRATEGY:ih,Z_DEFLATED:rh}=Vn;function Ti(o){this.options=qn.assign({level:sh,method:rh,chunkSize:16384,windowBits:15,memLevel:8,strategy:ih},o||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Kl,this.strm.avail_out=0;let f=Fs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==Ai)throw new Error(yi[f]);if(p.header&&Fs.deflateSetHeader(this.strm,p.header),p.dictionary){let m;if(typeof p.dictionary=="string"?m=Yn.string2buf(p.dictionary):Xn.call(p.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(p.dictionary):m=p.dictionary,f=Fs.deflateSetDictionary(this.strm,m),f!==Ai)throw new Error(yi[f]);this._dict_set=!0}}Ti.prototype.push=function(o,p){let f=this.strm,m=this.options.chunkSize,h,A;if(this.ended)return!1;for(p===~~p?A=p:A=p===!0?th:Jl,typeof o=="string"?f.input=Yn.string2buf(o):Xn.call(o)==="[object ArrayBuffer]"?f.input=new Uint8Array(o):f.input=o,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(m),f.next_out=0,f.avail_out=m),(A===Ql||A===Zl)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=Fs.deflate(f,A),h===eh)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=Fs.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===Ai;if(f.avail_out===0){this.onData(f.output);continue}if(A>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Ti.prototype.onData=function(o){this.chunks.push(o)},Ti.prototype.onEnd=function(o){o===Ai&&(this.result=qn.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function nh(o,p){p=p||{};let f=new Ti(p);if(f.push(o,!0),f.err)throw f.msg||yi[f.err];return f.result}function oh(o,p){return p=p||{},p.gzip=!0,nh(o,p)}return(o,p,f)=>{let m=oh(o);return p==="base64"?m=btoa(Wn(m)):m=m.buffer,f&&f(m),m}}var Ay=(()=>{class s extends Ba{constructor(t){super(t),this.algorithm=Ji.GZIP,this.bg=oa(),this.rT=(i,n,a)=>{let c=this.bg(i,n);a(c)},this.compress=aa(),typeof CompressionStream!="undefined"&&bd||(this.compress=this.rT,this.getCompressorSourceCode=()=>oa.toString())}compressSync(t,e){return this.bg(t,e)}getCompressorSourceCode(){return aa.toString()}}return s})();function aa(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(a=>s(a)).then(a=>e(a));return}n.then(a=>e(a))}}var Ty=(()=>{class s extends Ba{constructor(){super(...arguments),this.algorithm=Ji.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),kc=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!wy.isCompressionEnabled()?new Ty(t):this.instance=new Ay(t)}}return s})();var Ry=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,T,M,R,b,x,w,k,U,W,ot,yt,Et,S,P,V,H){this.Z=t,this.ce=e,this.R=i,this.w=n,this.E=a,this.f=c,this.qh=l,this.h=d,this.Gh=g,this.Js=u,this.$n=y,this.de=E,this.I=v,this.W=T,this.K=M,this.A=R,this.hT=b,this.J=x,this.ot=w,this.vt=k,this.Tg=U,this.Zt=W,this.uT=ot,this.C=yt,this.At=Et,this.M=S,this.Bt=P,this.et=V,this.gt=H,this.dT=(tt=!1)=>{let lt=this.w.getSession();lt===null?(this._r=new vy(this.h.recordTargetingRules,this.Rg,this.E,this.et,this.J,this.A),this._r.init(),this._r.start()):(lt.collectState===I.RECORDING_RULES_TARGETING||lt.collectState===I.ANALYTICS_ONLY_RULES_TARGETING)&&this.Rg(tt)},this.Rg=(tt=!1)=>{this.wr.onLoad(()=>{var lt,At;(lt=this._r)===null||lt===void 0||lt.emitTargetingCollectState(),(At=this._r)===null||At===void 0||At.stop(),this.E.emitStartTracking(tt)}),this.Na(tt)},this.Na=(tt=!1)=>{this.Js.isActive()||(this.gt.init(),this.Wh.start(tt),this.wr.start())},this.pT=()=>{this.E.emitBeforeSessionRenewal(),this.br(!0),this.E.emitAfterSessionRenewal()},this.fT=()=>{this.E.emitBeforeSessionRenewal(),this.et.refreshQuota(),this.et.onQuotaReady(tt=>{tt!==I.QUOTA_REACHED&&(this.br(!0),this.E.emitAfterSessionRenewal())})}}start(){var t;if(this.Gh.init(),this.Js.init(),this.Js.isActive())return;let e,i,n,a,c,l,d,g,u,y,E,v,T,M,R,b,x,w,k,U;this.C.schedule(()=>{T=new Tm(this.w,this.R),b=new Qm(T),v=new fm(this.W),M=new sy(()=>{}),x=new iy,U=new ry;let W=new dy(M,this.gt,x,k,U,this.Yh());R=new cy(this.Yh(),this.gt,W,x,w);let ot=new uy(this.E,this.f,this.gt,W,x,w,k);ot.init(),this.E.addListener(ot),e=new em(this.h,this.Z,this.R,this.W,v,this.f,T,new xm(j),this.ot,this.At,this.J,R),i=new fg(this.f,this.w,this.h,this.Z,this.ce,this.I),E=new jm(R);let yt=new km(this.h);y=new Mm(this.h,yt,E,R,this.ot),y.init();let Et=new Jm;n=new cg(this.R,this.w,this.f,this.ot,yt,this.h,Et,E),a=new wg(this.h,this.Z,this.R,this.f,this.I,T,this.A);let S;this.Wh=new pm(this.h,this.f,this.E,this.Z,this.R,this.w,this.de,this.vt,this.K,this.A,this.Zt,Et,this.J,this.Gs,S),this.Cg=new wm(this.h,this.R,this.w,this.f),d=new Pm(this.h,this.f,this.ce,this.Z,this.J),g=new Nm(this.f),u=new Um(this.h,new Va(this.h,this.I),this.At),this.wr=new gm}),this.h.customErrors.enabled&&this.C.schedule(()=>{var W,ot,yt;let Et;this.Xs=new yy(this.I,!((yt=(ot=this.h)===null||ot===void 0?void 0:ot.experimental)===null||yt===void 0)&&yt.anonymizeNameInUrls?this.K:void 0);let S=new Km(this.Xs,this.h,this.Z,this.f,this.J,this.At,this.ot,Et);S.init(),this.E.addListener(S)}),this.h.jsErrorsEnabled&&this.C.schedule(()=>{this.ws=new Om,this.ae=new Lm(this.I,this.A);let W=new qm(this.ws,this.ae,this.h,this.Z,this.ot,this.f,this.J,this.A,this.At);W.init(),this.E.addListener(W)}),this.C.schedule(()=>{this.$n.init()}),this.C.schedule(()=>{n.init()}),this.C.schedule(()=>{i.init()}),this.C.schedule(()=>{a.init()}),this.C.schedule(()=>{this.Tg.init()}),this.C.schedule(()=>{this.Wh.init()}),this.C.schedule(()=>{this.Cg.init()}),this.C.schedule(()=>{d.init()}),this.C.schedule(()=>{this.hT.init()}),this.C.schedule(()=>{g.init()}),this.C.schedule(()=>{u.init()}),this.C.schedule(()=>{this.uT.init()}),this.C.schedule(()=>{this.E.addListener(this.Cg),this.E.addListener(this.qh),this.E.addListener(e),this.E.addListener(this.$n),this.E.addListener(n),this.E.addListener(a),this.E.addListener(this.Tg),this.E.addListener(this.Wh),this.E.addListener(d),this.E.addListener(i),this.E.addListener(y),this.E.addListener(u),this.E.addListener(b)}),ci.isRecordingSupported()&&this.C.schedule(()=>{let W=new Kf(E,this.w,this.h,this.Z,this.f,this.I,T,M,this.ae,this.ut,this.Ie,this.ft,this.E,this.J,this.ot,this.Zt,this.At,this.K,this.Vr,this.Yh(),this.Xs,w);W.init(),this.E.addListener(W),n.setRecordingService(W.recordingService)}),this.C.schedule(()=>{e.init()}),this.C.schedule(()=>{this.h.isQuotaEnabled()?T.onSessionExpired(()=>{this.fT()}):T.onSessionExpired(()=>{this.pT()}),this.br()})}br(t=!1){var e;if(this.h.hasTargetingRules()){this.dT(t),this.f.start(),this._r&&this._r.checkInitialUrlTargetingRules();return}this.f.start(),this.wr.onLoad(()=>{this.E.emitStartTracking(t)}),(!Ic(this.h)||t)&&this.Na(t)}Yh(){if(this.nt)return this.nt;let t=new ey;return this.nt=new ty(this.de,this.h,this.A,t),this.nt.init(),this.nt.shouldUseAnonymization()&&rt.counters.pageAnonymisation.count("anonymized-on-start"),this.nt}}return s})(),Cy=(()=>{class s{constructor(t,e,i,n,a,c,l,d){this.h=t,this.R=e,this.qe=i,this.Ig=n,this.gT=a,this.mT=c,this.yT=l,this.Xh=d}compute(t){var e,i;this.h.crossDomainTracking&&!this.h.cookielessTrackingEnabled?this.h.crossDomainSingleIframeTracking?(e=this.yT)===null||e===void 0||e.start(()=>this.Kh(t)):(i=this.mT)===null||i===void 0||i.applyUpToDate(()=>this.Kh(t)):this.Kh(t)}Kh(t){this.gT.handle(),this.Ig.clear(),this.ET()?(this.Ig.restoreClearedVisitor(),t(!0)):(this.qe.exclude(this.h),t(!1))}ET(){let t=Ts.boolean(this.h.sampleRate);return this.Xh.isForceIncluded()||!this.qe.isExcluded()&&this.R.doesVisitorExist()||!this.qe.isExcluded()&&t}}return s})(),Iy=(()=>{class s{constructor(t,e,i,n){this.h=t,this.it=e,this.E=i,this.w=n,this.ST=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.vT(),(t=this.w)===null||t===void 0||t.removeSession()),this._T(e),this.setVisitor(e)}vT(){return{id:Zm.generate(),visitsCount:0,appliedTrackingDraw:this.h.lastTrackingDraw,creationTimestamp:no(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.h.visitorCookieTimeout,allowSubdomains:this.h.allowSubdomains,identityPrint:null}}_T(t){let e=no();this.w&&!this.w.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.h.lastTrackingDraw,this.Pg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.it.get()}setVisitor(t){this.it.set(t)}doesVisitorExist(){return this.it.get()!==null}resetVisitor(){this.Og(),this.E.emitAfterVisitorCleared()}removeVisitor(){this.it.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.h.allowSubdomains:!1}handleSubdomainChange(){this.it.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Pg===void 0?!1:t.visitsCount!==this.Pg}wT(){return!Z(this.Ng)||O.now()-this.Ng>this.ST}renewVisitor(){this.wT()?(this.Ng=O.now(),this.Og(),this.E.emitAfterVisitorRenewal()):j.warn("session:start:newVisitor is trying to renew visitor under time limit")}Og(){this.E.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),Tn=60*1e3,Py=60*Tn,Oy=4*Py-Tn,ys=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Ny=(()=>{class s{constructor(t,e){this.ge=t,this.et=e,this.zn=null,this.Jh=0,this.qn=ys.NO}setDynamicVariablesService(t){this.bT=t}createOrUpdateSession(){this.Qh(),this.AT=O.now(),this.Jh=0;let t=this.Mg();t===null?(t=this.TT(),this.kg(t),this.Ma(t)):(t=this.et.sanitizeSessionCollectState(t),this.kg(t),t.collectState=this.et.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.et.getInitialCollectState(),t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.qn=ys.GRANTED}withdrawnReplayRecording(t){t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.qn=ys.WITHDRAWN}Ma(t){this.qn===ys.WITHDRAWN?(t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)):this.qn===ys.GRANTED?t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.et.computeInitialCollectState(t),this.qn=ys.NO}TT(){return{pageNumber:0,collectState:this.et.getInitialCollectState(),etrState:Ct.ETR_OFF,etrStatus:Rt.ETR_NOT_SAVED_SESSION}}kg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.et.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===I.RECORDING_TEMPORARILY}abortQuotaServiceRequest(){this.et.abortQuotaServiceRequest()}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ge.get()}Mg(){return this.ge.get(!0)}doesSessionExist(){return this.ge.get()!==null}setSession(t){this.ge.set(t)}refreshSession(){let t=this.Mg();t&&this.setSession(t)}removeSession(){this.ge.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==I.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===I.RECORDING_RULES_TARGETING?I.RECORDING_GLOBAL_SAMPLING:t.collectState),t.etrState===Ct.ETR_ON&&csArray.prototype.push.call(e,I.RECORDING_ETR_SAMPLING)),e}updateCollectState(t,e){let i=this.getSession();i!==null&&(i.collectState=t,i.etrState=e,this.setSession(i))}hasValidSession(){let t=this.ge.getRawSession();return this.ge.isValid(t)}handleSubdomainChange(){this.ge.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ge.isCacheRefreshed();return e&&t&&this.ge.resetCacheRefreshed(),e}extendSessionPeriodically(){this.zn||this.Dg()}extendSession(){let t=this.getSession();return t===null?(j.warn("extendSession is trying to extend an expired session"),this.Qh(),!1):(this.ge.set(t,Vi),!0)}Dg(){if(this.RT()){this.Qh();return}this.extendSession()&&(this.CT(),this.IT())}IT(){this.zn=window.csSetTimeout(()=>{this.Dg()},Vi-Tn)}RT(){return Oy-(O.now()+Vi-this.AT)<0}Qh(){this.zn&&(window.csClearTimeout(this.zn),this.zn=null)}CT(){this.Jh+=1,this.bT.trackDynamicVariable("session_expiry_update",this.Jh)}}return s})(),My=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.qe=i}clear(){this.PT()&&(this.Lg=this.R.getVisitor(),this.R.removeVisitor()),this.OT()&&this.qe.removeExclusion()}PT(){return this.R.doesVisitorExist()&&this.R.getVisitor().appliedTrackingDraw!==this.h.lastTrackingDraw}OT(){return this.qe.getAppliedTrackingDraw()!==this.h.lastTrackingDraw}restoreClearedVisitor(){this.Lg&&this.R.setVisitor(this.Lg)}}return s})(),ky=(()=>{class s{constructor(t,e,i){this.R=t,this.w=e,this.NT=i}handle(){this.R.hasAllowSubdomainsChanged()&&(this.R.handleSubdomainChange(),this.w.handleSubdomainChange(),this.NT.handleSubdomainChange())}}return s})(),Pe="_cs_c",es=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),Dy=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Bt=i}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Bt.getItem(Pe):t=this.M.get(Pe),t===null?t:Number(t)}set(t){this.h.cookielessTrackingEnabled?this.Bt.setItem(Pe,csString(t)):this.M.set(Pe,csString(t),ln)}remove(){this.h.cookielessTrackingEnabled?this.Bt.removeItem(Pe):this.M.delete(Pe)}handleSubdomainChange(){this.h.cookielessTrackingEnabled||(this.h.allowSubdomains?this.M.delete(Pe,Ki.CURRENT_DOMAIN):this.M.delete(Pe,this.M.getRootDomain()))}}return s})(),Ly=(()=>{class s{constructor(t,e,i){this.h=t,this.w=e,this.E=i}grantReplayConsent(){if(!Ve.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.grantReplayRecordingBeforeSessionStart();return}Ve.isRecordingBlockedByConsent(t)&&(this.w.grantReplayRecording(t),this.E.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ve.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.withdrawnReplayRecordingBeforeSessionStart();return}Ve.isRecordingWithDrawn(t)||(this.w.withdrawnReplayRecording(t),this.E.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),xy=["replay:consent:unanonymized:granted","trackConsentGranted"],Vy=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Uy=["replay:consent:startForSession:granted"],jy=["replay:consent:startForSession:withdrawn"],Hy=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.f=e,this.de=i,this.w=n,this.E=a}init(){this.xg=new Ly(this.h,this.w,this.E),this.de.setInitialConsent(),this.at()}at(){this.f.register(xy,()=>{this.de.grantReplayAnonymizationConsent()}),this.f.register(Vy,()=>{this.de.withdrawReplayAnonymizationConsent()}),this.f.register(Uy,()=>{this.xg.grantReplayConsent()}),this.f.register(jy,()=>{this.xg.withdrawReplayConsent()})}onOptout(){this.de.removeAllConsents()}onBeforeVisitorRenewal(){this.de.removeAllConsents()}onAfterVisitorRenewal(){this.de.setInitialConsent()}onAfterVisitorCleared(){this.de.setInitialConsent()}}return s})(),By=(()=>{class s{constructor(t,e,i){this.h=t,this.it=e,this.E=i}setInitialConsent(){let t=this.it.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.h.consentRequired;return e&&t===es.NOT_REQUIRED||!e&&t!==es.NOT_REQUIRED}handleSubdomainChange(){this.it.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.h.consentRequired?es.NOT_EXPRESSED:es.NOT_REQUIRED;this.it.set(t)}grantReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(es.GRANTED),this.E.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(es.WITHDRAWN),this.E.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.it.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired||this.it.get()===es.GRANTED}getRequestParameters(){return{uc:`${this.it.get()}`}}}return s})(),Fy=(()=>{class s{constructor(t,e,i,n,a,c,l){this.E=t,this.f=e,this.qh=i,this.Gh=n,this.Js=a,this.MT=c,this.$n=l}start(){this.E.addListener(this.MT),this.E.addListener(this.$n),this.E.addListener(this.qh),this.$n.init(),this.Gh.init(),this.Js.init(),!this.Js.isActive()&&this.f.start()}}return s})(),$y=(()=>{class s{constructor(t,e){this.Rt=t,this.it=e}exclude(t){this.it.set(csString(t.lastTrackingDraw))}removeExclusion(){this.it.remove()}isExcluded(){return this.kT()||this.DT()}kT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.it.get()}DT(){return csString.prototype.indexOf.call(this.Rt.href,ae)>0}}return s})(),zy=(()=>{class s{constructor(t){this.Je=t}onOptout(){this.Je.removeExclusion()}}return s})(),Dr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),qy=".^",Gy=".*",Wy=(()=>{class s{constructor(t){this.A=t,this.Zh=new csRegExp(`${qy}`)}setExcludeUrlForSessionReplay(t){try{this.Zh=new csRegExp(t)}catch{j.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Zh=new csRegExp(`${Gy}`)}}Vg(){return this.Zh.test(this.A.getAnonymizedUrl())?Dr.SessionReplay:Dr.None}isUrlExcludedForSessionReplay(){return this.Vg()===Dr.SessionReplay}getRequestParameters(){return{ex:this.Vg()}}}return s})(),Yy=["excludeURLforReplay"],Xy=(()=>{class s{constructor(t,e){this.Je=t,this.f=e}init(){this.f.register(Yy,t=>{if($(t))this.Je.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Lr="_cs_inc",Ky=(()=>{class s{constructor(t,e){this.Rt=t,this.M=e}isForceIncluded(){return this.LT()||this.xT()}isForceReplayRecorded(){return this.VT(I.RECORDING_GLOBAL_SAMPLING)}LT(){return this.M.get(Lr)!==null}VT(t){return this.M.get(Lr)===t}xT(){return csString.prototype.indexOf.call(this.Rt.href,Lr)>0}}return s})(),Xs="_cs_optout",Jy=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Bt=i}get(){return this.h.cookielessTrackingEnabled?this.Bt.getItem(Xs):this.M.get(Xs)}set(t){this.h.cookielessTrackingEnabled?this.Bt.setItem(Xs,t):this.M.set(Xs,t,ln)}}return s})(),ca="1",Qy=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.it=i}init(){!this.isActive()&&this.UT()&&this.activate()}isActive(){return this.it.get()===ca}activate(){this.E.emitOptout(),this.it.set(ca)}UT(){return csString.prototype.indexOf.call(this.Rt.href,Xs)>0}}return s})(),Zy=["optout"];var tE=(()=>{class s{constructor(t,e){this.f=t,this.Js=e}init(){this.f.register(Zy,()=>{this.Js.activate()})}}return s})();var eE=(()=>{class s{constructor(t,e){this.f=t,this.ot=e}init(){this.ot.addListener(this.f)}onOptout(){this.f.stop()}onBeforeSessionRenewal(){this.f.stop()}}return s})();var sE=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),iE=(()=>{class s extends Dt{constructor(t){super(),this.tu=t,this.cs={}}register(t,e,i){for(let n of t){let a=(...c)=>{try{let l=e(...c);return rt.counters.commandApplied.count(n),l}catch(l){rt.counters.commandMisuse.count(n),j.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Fe(l)?l.stack:l}`)}};this.cs[n]={callback:a,configuration:i},this.cs}}onStart(){this.HT(),this.BT()}onStop(){for(let t of this.tu)window[t]=[]}applyFromIntegration(t,e,i){this.Ug(t,e,`Commands.apply.from.integration: ${i}`),rt.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Ug(t,e,`Commands.apply.from.implementation: ${i}`),rt.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.FT(e.name,e.params,t.iframePath),rt.counters.commandsFromIframe.count(e.name)}Ug(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}j.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}FT(t,e,i){j.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}HT(){for(let t of this.tu)window[t].forEach(([e,...i])=>this.jg(e,i,!1))}BT(){for(let t of this.tu)window[t]={push:([e,...i])=>this.jg(e,i,!0)}}jg(t,e,i){var n,a;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((a=this.cs[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){rt.counters.commandError.count(t),j.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var rE=(()=>{class s{constructor(t,e,i,n){this.h=t,this.R=e,this.w=i,this.Xg=n}getRequestParameters(){var t;let e={...hn(),...this.h.getRequestParameters()},i=this.w.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.R.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.Xg)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Xg.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),nE=(()=>{class s{constructor(t,e){this.f=t,this.Ps=e}init(){this.f.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ps.updateDynamicFields("emitDebugEvents",t)})}}return s})();function la(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?Dc(r):s.pathname,i=Z(t)?Lc(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Dc(s){return ze(s,"/")?s:`/${s}`}function Lc(s){return ze(s,"?")||s===""?s:`?${s}`}var xr=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),oE=(()=>{class s{constructor(t,e){this.Rt=t,this.K=e,this.YT=10}overridePath(t,e){if(t===""){this.Ar=void 0;return}let i=this.Kg(e);i&&(this.iu=i),this.Ar=e?this.Jg(t,e):t}overrideQuery(t,e){let i=this.Kg(e);i&&(this.ru=i),this.Wn=e?this.Jg(t,e):t}computeOverriddenUrl(t){return this.XT(t)?this.getAnonymizedUrl():t}KT(t){return(typeof t=="string"||typeof t=="number")&&t in xr}XT(t){let e=this.Qg(this.Rt.href);return this.Qg(t)===e}Qg(t){return nu(t,"/")?csString.prototype.slice.call(t,0,-1):t}Kg(t){return Z(t==null?void 0:t.lifespan)&&this.KT(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}JT(){return this.iu&&this.iu in xr}QT(){return this.ru&&this.ru in xr}cleanupOverrideLifespan(){this.JT()&&(this.Ar=void 0,this.iu=void 0),this.QT()&&(this.Wn=void 0,this.ru=void 0)}getAnonymizedUrl(){let t=la(this.Rt,this.Ar,this.Wn);return this.K.anonymizeUrl(t)}getUrl(){return la(this.Rt,this.Ar,this.Wn)}getAnonymizedPathAndQuery(){let t=Z(this.Ar)?Dc(this.Ar):this.Rt.pathname,e=Z(this.Wn)?Lc(this.Wn):this.Rt.search;return this.K.anonymizeUrl(t+e)}getUrlProtocol(){return this.Rt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Jg(t,e){return this.ZT(e)?this.tR(t):this.eR(e)?this.sR(t):t}eR(t){return!!t.decodeURI}sR(t){return this.Zg(t,1,!1)}ZT(t){return!!t.decodeURIDeep}tR(t){return this.Zg(t,this.YT,!0)}Zg(t,e,i){let n=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&j.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),Rn=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),aE=(()=>{class s extends Rn{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),ii="|iframe|",cE=(()=>{class s extends Rn{constructor(t,e,i,n){super(),this.iR=t,this.rR=e,this.nR=i,this.oR=n}emitIframeEvent(t,e,i){if(this.aR(e)&&t===null){j.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case K.ChildLogMessage:this.cR(i);break;case K.AnalysisEvent:{let n=i,a=this.iR.transformEvent(t,n);a.isUserEvent?this.lR(a.event):this.hR(a.event);break}case K.RecordingEvent:{let n=i,a=this.oR.transformEvents(t,n);if(a.events.length===0)return;a.containsUserEvent?this.uR(a.events):this.dR(a.events);break}case K.JavascriptError:this.pR(i);break;case K.ApiError:this.fR(i);break;case K.DetailedApiError:this.gR(i);break;case K.CustomError:this.mR(i);break;case K.EmerchandisingMessage:{let n=this.nR.transformEvent(t,i);this.yR(n);break}case K.Commands:{let n=this.rR.transformEvent(t,i);this.ER(n);break}case K.IntegrationCallback:this.SR(i);break;case K.StaticResource:this.vR(i);break;case K.TrackingContextRequestMessage:this._R(i);break;default:j.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}aR(t){let e=[K.AnalysisEvent,K.RecordingEvent,K.EmerchandisingMessage,K.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}cR(t){let{message:e,errorCode:i,level:n}=t;switch(n){case it.debug:j.debug(e,i);break;case it.warn:j.warn(e,!0,i);break;case it.implementation:j.implementation(e,i);break;case it.error:j.error(e,i);break;case it.critical:j.critical(e,i);break}}lR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}hR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}uR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}dR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}pR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}fR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}gR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}yR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}ER(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}SR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}vR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}_R(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}mR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),lE=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),hE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),xc=["setCustomVariable"],uE=(()=>{class s{constructor(t,e){this.f=t,this.vt=e}init(){this.f.register(xc,(t,e,i,n)=>{this.vt.set(t,e,i,n)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),this.vt.removeCustomVariablesPage()}}return s})(),ha=512,ua=255,Vr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},dE=(()=>{class s{constructor(t,e){this.I=t,this.it=e,this.$t={},this.De={}}set(t,e,i,n){let a,c;if((se(t)||$(t))&&Number(t)>0&&Nt(e)&&Nt(i)&&!Be(e)&&!Be(i)&&this.wR(n)){let l=this.I.anonymizePII(csString(e)),d=this.I.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,ha),csString.prototype.slice.call(d,0,ua)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(Vr.SESSION,n)>=0){let g=this.getCustomVariablesSession();c?g[t]=a:delete g[t],this.setCustomVariableSession(g)}(!Z(n)||csArray.prototype.indexOf.call(Vr.PAGE,n)>=0)&&(c?this.$t[t]=a:delete this.$t[t]),Z(n)&&csArray.prototype.indexOf.call(Vr.NEXT_PAGE_ONLY,n)>=0&&(c?this.De[t]=a:delete this.De[t])}else throw new Error(`Command misuse: ${xc[0]}`)}getCustomVariablesSession(){let t=this.it.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&As(e)?e:{}}setCustomVariableSession(t){this.it.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.it.remove()}removeCustomVariablesPage(){this.$t={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.De)this.De.hasOwnProperty(i)&&(this.$t[i]=this.De[i]);for(let i in this.$t)this.$t.hasOwnProperty(i)&&(t[i]=this.$t[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.tm(t)};return this.$t&&window.csJSON.stringify(this.$t).length>2&&(e.cvarp=this.tm(this.$t)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.De).length>0)for(let t in this.De)this.De[t]===this.$t[t]&&(delete this.$t[t],delete this.De[t])}em(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],a=n[0],c=n[1];(!gh(i,1,20)||a.length>ha||c.length>ua)&&delete t[e]}}tm(t){this.em(t);let e=mh(t)?[]:t;return window.csJSON.stringify(e)}wR(t){return!Z(t)||$(t)||se(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.De)this.De.hasOwnProperty(e)&&(this.$t[e]=this.De[e]);for(let e in this.$t)this.$t.hasOwnProperty(e)&&(t[e]=this.$t[e]);return this.em(t),t}}return s})(),pE=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,fE="$1CS_ANONYMIZED_NAME",gE=(()=>{class s{constructor(t){this.I=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],a=this.I.anonymizePII(t);if(a=this.I.anonymizeJwt(a),e.maskNames){let d=a;a=this.Dn(a),a!==d&&(rt.counters.redactedPII.count("name"),rt.counters.redactedPII.count("name-in-url"))}let c=this.bR(a,i);if(c!==a)return rt.counters.redactedPII.count("url"),c;let l=this.AR(a,n);return l!==a&&rt.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.nu(t);return i!==""?`${e}?`:e}nu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}bR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nu(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.TR(a,c);if(l!==null)return`${l}${n}`}return t}TR(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let a=t[n];if(n>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[n].key;if(this.sm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(a===c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}AR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nu(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.RR(a,c);return`${csArray.prototype.join.call(a,"/")}${n}`}RR(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let d=t[l],g=e[n].key;if(this.sm(g)&&l>=c){let u=e[n].value;csArray.prototype.push.call(i,d.length>0?u:""),n++,n===e.length&&(n=0);continue}if(d===g){csArray.prototype.push.call(i,d),n++,n===e.length&&(n=0);continue}for(let u=0;u<n;u++){let y=l-n+u;i[y]=t[y]}n=0,csArray.prototype.push.call(i,d)}for(let l=0;l<n;l++){let d=t.length-n+l;i[d]=t[d]}return i}sm(t){return ze(t,Cc)}Dn(t){return csString.prototype.replace.call(t,pE,fE)}}return s})(),mE=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],yE=1024,EE=1024,SE=(()=>{class s{constructor(t,e){this.lt=t,this.h=e}getEventTargetPathAndHierarchy(t,e){let i=gt(t),n={isNodeSensitive(a){return N.isMaskedElement(a)||N.isMaskedElementChild(a)},isAttributeSensitive(a,c){return N.isMaskedAttribute(a,c)},allWhitelistedAttributes:rc(this.h.whitelistedAttributes),attributeIgnoreTokens:mE,useAnonymization:e,attrMaxLength:EE,hierarchyMaxLength:yE};return this.lt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPath(t){let e=gt(t);return this.lt.getElementPath(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=gt(t),{path:i,firstAnchorParent:n}=this.lt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules}),a=this.CR(n)?n.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=gt(t);return this.lt.isValidElement(e)}getElementPath(t){return this.lt.getElementPath(t,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}CR(t){var e;return t!==null&&t.hasAttribute("href")&&!ze((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),vE=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){this.IR(t,e.event);let i=this.W.getElementPath(t);return this.PR(i,e.event),e}IR(t,e){if(Rg(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+ft.windowOffsetX()),e.y=Math.round(i.top+e.y+ft.windowOffsetY())}}PR(t,e){gc(e)&&(e.tgt=`${t}${ii}${e.tgt}`),Ag(e)&&(e.tgtHM=`${t}${ii}${e.tgtHM}`),Tg(e)&&(e.tgtLk=`${t}${ii}${e.tgtLk}`)}}return s})(),_E=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){let i=this.W.getElementPath(t);return{iframePath:e.iframePath?`${i}${ii}${e.iframePath}`:i,commands:e.commands}}}return s})(),wE=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.W.getElementPath(t),n=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${ii}${a.targetPath}`}));return{...e,products:n}}}return s})(),bE=(()=>{class s{constructor(){this.NR={clientX:2,clientY:3},this.MR={clientX:1,clientY:2},this.kR=[D.POINTER_DOWN,D.POINTER_MOVE,D.POINTER_UP],this.DR=[D.TOUCH_START,D.TOUCH_MOVE,D.TOUCH_END]}transformEvents(t,e){if(!ut.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==D.VISIBILITY_CHANGE),e.events.length===0||(j.warn(`IframeRecordingEventsTransformer received event ${K.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=et(t),n=null;csArray.prototype.some.call(e.events,c=>this.im(c)||this.rm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.im(c)?this.LR(n,c):this.rm(c)&&this.xR(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}xR(t,e){this.nm(this.MR,t,e)}LR(t,e){this.nm(this.NR,t,e)}nm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}im(t){return csArray.prototype.indexOf.call(this.kR,t.type)!==-1}rm(t){return csArray.prototype.indexOf.call(this.DR,t.type)!==-1}}return s})(),AE=(()=>{class s{constructor(t){this.ou=t}start(){this.ou.onEvent(t=>this.G(t)),this.ou.start()}stop(){this.ou.stop()}G(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;j.warn(e)}}return s})(),TE=(()=>{class s{constructor(){this.Vt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.au,"localhost"),csArray.prototype.push.call(s.au,"fake-tracker.content-square.fr")}start(){Pt(this.Vt)}stop(){Ot(this.Vt)}onEvent(t){this.O=t}VR(t){if(!t)return!1;let e=t.disposition;return $(t.sourceFile)&&csArray.prototype.some.call(s.au,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.VR(t)&&this.O({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.au=["contentsquare","cdnssl.clicktale.net"],F([L("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),RE=(()=>{class s{init(){this.om=new AE(new TE),this.om.start()}onOptout(){this.om.stop()}}return s})();var{toString:ZE}=Object.prototype;function Vc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let a=s.apply(this,e);return t.cache=n.set(i,a)||n,a};return t.cache=new(Vc.Cache||Map),t}Vc.Cache=Map;var{hasOwnProperty:tS}=Object.prototype;var Uc=(()=>{class s{constructor(t){this.configuration=t}}return s})(),CE=(()=>{class s extends Uc{constructor(t,e,i){super(t),this.configuration=t,this.Qn=e,this.E=i,this.r0=I.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.Zn=void 0,this.Ua()}onQuotaReady(t){this.Em=t}init(){this.n0()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==I.QUOTA_REACHED}computeInitialCollectState(t){return this.Zn?(this.E.emitCollectStateChange(this.Zn,Ct.ETR_OFF),this.Zn):(j.warn("Quota file error computeInitialCollectState() called before quota answered"),I.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===I.QUOTA_REACHED?I.QUOTA_REACHED:!ci.isRecordingSupported()&&this.isReplayRecorded(t)?I.ANALYTICS_ONLY:t.collectState===I.RECORDING_RULES_TARGETING?I.RECORDING_RULES_TARGETING:t.collectState===I.ANALYTICS_ONLY_RULES_TARGETING?I.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===I.RECORDING_GLOBAL_SAMPLING?I.RECORDING_GLOBAL_SAMPLING:I.ANALYTICS_ONLY}abortQuotaServiceRequest(){}isReplayRecorded(t){return t.collectState===I.RECORDING_GLOBAL_SAMPLING||t.collectState===I.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Zn||I.QUOTA_REACHED}setVisitorService(t){}computeInitialCollectStateFromRecordingConsentGranted(t){return I.ANALYTICS_ONLY}to(t){this.Zn=t,this.Em&&this.Em(t)}n0(){this.Qn.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Qn.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Qn.onLoad(t=>this.quotaFileHandler(t))}Ua(){this.Qn.isInProgress()||this.Qn.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.o0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;j.warn(e),this.to(this.r0)}o0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Ts.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ci.isRecordingSupported()?this.to(I.RECORDING_GLOBAL_SAMPLING):this.to(I.ANALYTICS_ONLY):e&&!i?this.to(I.ANALYTICS_ONLY):this.to(I.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return I.ANALYTICS_ONLY}}return F([L("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),F([L("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),IE=3e3,PE=(()=>{class s extends Uc{constructor(t,e,i,n,a){super(t),this.configuration=t,this.eo=e,this.E=i,this.Xh=n,this.A=a,this.$e=[]}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.a0()}sanitizeSessionCollectState(t){return(t.collectState===I.QUOTA_REACHED||t.collectState===I.RECORDING_RULES_TARGETING||t.collectState===I.RECORDING_TEMPORARILY)&&(t.collectState=I.ANALYTICS_ONLY),t}computeInitialCollectState(t){return Ve.isReplayConsentNeeded(this.configuration)?I.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ma(t)}computeInitialCollectStateFromRecordingConsentGranted(t){return this.Ma(t)}Ma(t){return ci.isRecordingSupported()?(this.$e=[],Ts.percentage()<this.configuration.replayRecordingRate||this.Xh.isForceReplayRecorded()?csArray.prototype.push.call(this.$e,I.RECORDING_GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.$e,I.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,I.RECORDING_ETR_SAMPLING),this.$e.length>0?(this.Ua(t),I.RECORDING_TEMPORARILY):I.ANALYTICS_ONLY):I.ANALYTICS_ONLY}getEligibleCollectState(t){return ci.isRecordingSupported()?Ve.isRecordingBlockedByConsent(t)?t.collectState===I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:I.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.collectState===I.RECORDING_GLOBAL_SAMPLING?I.RECORDING_GLOBAL_SAMPLING:(this.$e=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.$e,I.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,I.RECORDING_ETR_SAMPLING)),this.$e.length>0?(this.Ua(t),I.RECORDING_TEMPORARILY):(t.etrState===Ct.ETR_ON&&this.E.emitCollectStateChange(I.ANALYTICS_ONLY,Ct.ETR_ON),I.ANALYTICS_ONLY)):I.ANALYTICS_ONLY}Ua(t){var e;let i=(e=this.R)===null||e===void 0?void 0:e.getVisitor();this.eo.send({recordingTypes:csArray.prototype.map.call(this.$e,Number),url:this.A.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(i==null?void 0:i.id)||"",sn:(i==null?void 0:i.visitsCount)||"",pn:(t==null?void 0:t.pageNumber)||""})}abortQuotaServiceRequest(){this.eo.abort()}isReplayRecorded(t){return Ve.isRecordingBlockedByConsent(t)?!1:t.collectState===I.RECORDING_TEMPORARILY||t.collectState===I.RECORDING_GLOBAL_SAMPLING||t.collectState===I.RECORDING_URL_SAMPLING||t.etrState===Ct.ETR_ON}a0(){this.eo.onError(()=>this.quotaServiceErrorHandler("NetworkError")),this.eo.onTimeout(()=>this.quotaServiceTimeoutHandler(),IE),this.eo.onLoad(t=>this.quotaServiceLoadHandler(t))}quotaServiceErrorHandler(t){this.Sm(`error - ${t}`)}quotaServiceTimeoutHandler(){this.Sm("timeout")}Sm(t){let e=I.ANALYTICS_ONLY;this.vm(this.$e)?(e=I.RECORDING_GLOBAL_SAMPLING,j.warn(`Quota Service: request ${t} - bypassed by GLOBAL_SAMPLING`)):j.warn(`Quota Service: request ${t}`),this.E.emitCollectStateChange(e,Ct.ETR_OFF)}quotaServiceLoadHandler(t){if(t.status!==200){this.quotaServiceErrorHandler(`Status code: ${t.status}`);return}let e;try{e=csJSON.parse(t.responseText)}catch{this.quotaServiceErrorHandler(`Unable to parse the quota service response: ${t.responseText}`);return}let i=e.allowedRecordingTypes==null?void 0:csArray.prototype.map.call(e.allowedRecordingTypes,csString);if(!i){this.quotaServiceErrorHandler("recording types missing from quota service response");return}let n=Ct.ETR_OFF,a=I.ANALYTICS_ONLY;this.vm(i)?a=I.RECORDING_GLOBAL_SAMPLING:this.c0(i)&&(a=I.RECORDING_URL_SAMPLING),this.l0(i)&&(n=Ct.ETR_ON),this.E.emitCollectStateChange(a,n)}vm(t){return csArray.prototype.some.call(t,e=>e===I.RECORDING_GLOBAL_SAMPLING)}c0(t){return csArray.prototype.some.call(t,e=>e===I.RECORDING_URL_SAMPLING)}l0(t){return csArray.prototype.some.call(t,e=>e===I.RECORDING_ETR_SAMPLING)}setVisitorService(t){this.R=t}getInitialCollectState(){return I.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return I.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return F([L("Quota Service: onerror")],s.prototype,"quotaServiceErrorHandler",null),F([L("Quota Service: ontimeout")],s.prototype,"quotaServiceTimeoutHandler",null),F([L("Quota Service: onload")],s.prototype,"quotaServiceLoadHandler",null),s})();function OE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function NE(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var ME=(()=>{class s{constructor(){this.h0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.As={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:OE(),Attributes:NE()};this.As=N.getComputedSelectorSettings(t,this.As)}init(){this.u0()}setMaskedElementSettingsFromCommand(t){if(t=N.sanitizeSelectorUserInput(t),!N.isSelectorUserInput(t))throw new Error(`Command misuse: ${Mc[0]}`);this.Su(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Su(e)}getMaskedElementSettings(t){return t?this._m(this.h0):this.As}u0(){var t,e,i,n,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(d=>{$(d.attr)&&$(d.rule)&&l.Attributes.push({selector:d.rule,attrName:d.attr})}),this.Su(l)}Su(t){this.As=this._m(t)}_m(t){return N.getComputedSelectorSettings(t,this.As)}}return s})();var kE=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.oi=e,this.us=i,this.C=n,this.E=a,this.d0=()=>{var c;let l=ht.get(Wt);l!==null&&_r.isValidSessionString(l)?this.et.canCollect(_r.fromRawString(l))?this.init():!((c=this.h.voc)===null||c===void 0)&&c.enabled:(this.et.onQuotaReady(d=>{var g;d!==I.QUOTA_REACHED?this.init():!((g=this.h.voc)===null||g===void 0)&&g.enabled}),this.et.refreshQuota())}}initWithQuota(){var t,e;if(((t=this.h.smbConfig)===null||t===void 0?void 0:t.record)===!1){!((e=this.h.voc)===null||e===void 0)&&e.enabled;return}let i=new ay(this.h.getQuotaUri(),"",{type:"json",cacheMinutes:15});this.et=new CE(this.h,i,this.E),this.et.init(),this.d0()}init(){Ks.isSupported()&&Ks.setDigestSalt(this.h.projectId.toString());let t,e,i,n,a,c,l,d,g,u,y,E,v,T,M,R,b,x,w,k,U,W,ot,yt,Et,S,P,V,H,tt,lt,At,pe,Ye,nr;this.C.schedule(()=>{t=new di,e=new gE(t),n=new oE(window.location,e),i=new Ki(this.h,n,this.oi),i.init()}),this.C.schedule(()=>{a=new lE,c=new hE,b=new Ky(window.location,i),new RE().init(),x=kc.create(j.warn),R=new Fa(x);let fe=R.create(`${this.h.getLegacyQuotaUri()}/quota`,!0);this.et===void 0&&(this.et=new PE(this.h,fe,this.E,b,n),this.et.init())}),this.C.schedule(()=>{l=new _r(this.h,i,a),g=new Ny(l,this.et)}),this.C.schedule(()=>{u=new td(this.h,i,a),y=new Iy(this.h,u,this.E,g),this.us.setContext(y,g),this.et.setVisitorService(y)}),this.C.schedule(()=>{Ye=new By(this.h,new Dy(this.h,i,c),this.E),E=new ky(y,g,Ye),v=new id(this.h,i,a),T=new $y(window.location,v),M=new zy(T),U=new My(this.h,y,T),At=new SE(ue,this.h),P=new vE(At),V=new _E(At),H=new wE(At),tt=new bE,lt=new cE(P,V,H,tt),S=new iE([sE.UXA]),W=new eE(S,lt),ot=new Wy(n),yt=new Xy(ot,S);let us=new rd(this.h,i,a);pe=new dE(t,us),Et=new uE(S,pe);let fe=new Qu(y,g,T,pe,this.h)}),this.C.schedule(()=>{new Cy(this.h,y,T,U,E,w,d,b).compute(fe=>{this.C.schedule(()=>{W.init();let Ls=new aE,oe=new Hy(this.h,S,Ye,g,this.E),St=new Jy(this.h,i,c),Lt=new Qy(this.E,window.location,St),xs=new tE(S,Lt),or=new nE(S,this.h),ar=new rE(this.h,y,g,k);if(fe){this.E.emitInitTracking();let Vs=new ME;new Ry(ar,x,y,g,this.E,S,W,this.h,xs,Lt,oe,Ye,t,At,e,n,or,Ls,lt,pe,Et,ot,yt,this.C,R,i,c,this.et,Vs).start()}else new Fy(this.E,S,W,xs,Lt,M,oe).start()})})})}}return s})(),ns=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(b){let x=b.source,w=b.data;if(c(w)){let k=()=>{let U=n(t,w);y(U,()=>x.postMessage("csBundleLoaded",b.origin))};e=w.token,R(i.loadBundle),l(b.origin)&&k()}}};function n(b,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(b,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function a(){return e}r.getToken=a;function c(b){return b&&b.type==="csBundleInjection"&&l(b.domain)&&g(b.version)&&d(b.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(b){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(b)||r.hjDomainRegex.test(b)}r.isAuthorizedDomain=l;function d(b){return/^[a-zA-Z0-9]+$/.test(b)}r.isAuthorizedToken=d;function g(b){return/^[a-zA-Z0-9\.]+$/.test(b)}r.isAuthorizedTagVersion=g;function u(){let b=window.opener||window.parent;return window!==b&&window.addEventListener}r.isActivable=u;function y(b,x){let w=document.createElement("script");w.type="text/javascript",w.async=!0,w.src=b,w.onload=x,w.charset="utf-8",document.head.appendChild(w)}r.addScript=y;function E(b){let x=document.createElement("link");x.rel="stylesheet",x.href=b,document.head.appendChild(x)}r.addStyle=E;function v(b){return`${b}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function T(){M(i.loadBundle)}r.waitForBundleInjection=T;function M(b){window.addEventListener("message",b,!1)}r.listen=M;function R(b){window.removeEventListener("message",b,!1)}r.removeListener=R}(s||(s={})),s})(),da="_hp_ved",DE=18e5,mi="https://heapanalytics.com",LE=`${mi}/js/ved.js`,xE=`${mi}/css/ved.css`,VE=`${mi}/js/ved.css`,UE=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),jE=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Ur=(()=>{let s;return function(r){let t=!1;function e(){let g=[xE,VE];csArray.prototype.forEach.call(g,u=>{ns.addStyle(u)})}function i(g){let u=new csRegExp("(^|;)[ ]*"+g+"=([^;]*)"),y=u.exec(document.cookie);return y?decodeURIComponent(y[2]):null}function n(g,u,y){let E=encodeURIComponent(g)+"="+encodeURIComponent(u),v=new csDate;v.setTime(v.getTime()+y);let T=E+"; expires="+v.toUTCString()+"; path=/";document.cookie=T}function a(){n(da,"on",DE)}function c(){return i(da)==="on"}r.isVLCookieEnabled=c;function l(g){window.heapV=Object.assign({},window.heap,{source:g==null?void 0:g.source,uri:mi,loadArgs:g==null?void 0:g.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=l;function d(g){var u;if(g){let y={type:UE.StatusUpdate,value:jE.ReceivedInitMessage},E={targetOrigin:g==null?void 0:g.origin};(u=g==null?void 0:g.source)===null||u===void 0||u.postMessage(y,E)}t||(t=!0,a(),l(g),window.heapV&&(ns.addScript(LE),e()))}r.init=d}(s||(s={})),s})(),HE=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ns.hjDomainRegex],a,c,l={initHeapVisualLabeler(w){var k;w.origin===mi&&((k=w.data)===null||k===void 0?void 0:k.message)==="init"&&w.source&&(Ur.init(w),R(l.initHeapVisualLabeler))},ping(w){typeof w.data=="string"&&w.data==="ping"&&u(w.origin)&&(c=w.origin,a=ns.hjDomainRegex.test(w.origin)?i:w.origin,R(l.ping),M(l.insertMessageScript),y(ns.addCacheBusting("utils.js")))},insertMessageScript:b(w=>{typeof w.data=="string"&&w.data!=="ping"&&(R(l.insertMessageScript),y(w.data))})};function d(){return ns.getToken()}r.getToken=d;function g(){return window!==t&&window.addEventListener}r.isActivable=g;function u(w){return csArray.prototype.some.call(n,k=>k.test(w))}r.isAuthorizedDomain=u;function y(w,k){let U=document.createElement("script");U.type="text/javascript",U.async=!0;let W=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");U.src=`${W}/${e}/${w}`,U.onload=k,U.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(U),E(w)}function E(w){csString.prototype.includes.call(w,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(w,"&mode=")[1])}function v(){M(l.ping),ns.waitForBundleInjection()}r.waitForConnection=v;function T(){M(l.initHeapVisualLabeler),Ur.isVLCookieEnabled()&&Ur.init()}r.waitForHeapVisualLabeler=T;function M(w){window.addEventListener("message",w,!1)}r.listen=M;function R(w){window.removeEventListener("message",w,!1)}r.removeListener=R;function b(w){return function(k){k.origin===c&&w(k)}}r.secureListener=b;function x(w){c&&t.postMessage(w,c)}r.post=x}(s||(s={})),s})();var Li=window.CSFrameCommunication||HE;var BE=(()=>{class s extends Rn{constructor(t){super(),this.C=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.C.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){j.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return F([kt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var FE=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(se(v))return v}catch{j.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}r.sendAnalysisEvent=n;function a(v){if(window.CSJavascriptBridge.sendSREvent)for(let T of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(T))}r.sendSREvent=a;function c(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}r.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}r.sendOptIn=l;function d(){window.CSJavascriptBridge.optOut()}r.sendOptOut=d;function g(v,T){window.CSJavascriptBridge.sendDynamicVar(v,T)}r.sendDynamicVariable=g;function u(v,T,M){window.CSJavascriptBridge.sendTransaction(v,T,M)}r.sendTransaction=u;function y(v,T){if(window.CSJavascriptBridge.sendAssets){let M=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(M,T||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,M=>M.assetId))}r.sendAssets=y;function E(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}r.sendNativeSREvent=E}(s||(s={})),s})();var $E=(()=>{class s{constructor(t,e,i){this.h=t,this.mt=e,this.us=i}start(){var t,e,i,n,a;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new sc(!!(!((t=this.h.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.h.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.h.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Gu(this.mt,this.h);l.init();let d=new Yu(this.h,l);if(this.mt.isTopWindowTracker()&&d.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&j.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){j.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}zu();let u=new BE(c),y=new kE(this.h,l,this.us,c,u);this.h.isQuotaEnabled()?y.initWithQuota():y.init()}let g=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(u){return N.isMaskedElement(u)||N.isMaskedElementChild(u)},isAttributeSensitive(u,y){return N.isMaskedAttribute(u,y)},getSensitiveAttributes(u){return Oa(u.attributes,y=>N.isMaskedAttribute(u,y.name))}},Console:{warn(u){g&&console.warn("cs.tracking.warning",u)},error(u){g&&console.error("cs.tracking.error",u)}},Version:ka},window.CSFrameCommunication||(window.CSFrameCommunication=Li,Li.isActivable()&&Li.waitForConnection(),this.h.isCsCrosswritingHeap()&&Li.waitForHeapVisualLabeler())}}return F([kt("main.start"),L("main.start")],s.prototype,"start",null),s})(),zE=(()=>{class s{constructor(){}send(t,e,i=it.warn){let n={message:t,errorCode:e,level:i};FE.sendLog(n)}}return s})();var qE=(()=>{class s{constructor(t,e,i){this.V=t,this.I=e,this.oC=i,this.bt=[],this.Ce=null,this.aC=hn().v}Um(){this.bt.length!==0&&(this.V.send({m:csArray.prototype.map.call(this.bt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.I.anonymizePII(window.location.pathname),pid:this.oC,v:this.aC}),this.bt=[])}push(t){if(csArray.prototype.push.call(this.bt,...t),this.Ce&&(csClearTimeout(this.Ce),this.Ce=null),this.bt.length>=s.MAX_QUEUE_SIZE){this.Um();return}this.Ce=window.csSetTimeout(()=>{this.Um(),this.Ce=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function GE(s,r){let t=s.validationRate/10,e=Ts.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let a=kc.create(j.warn,r.isTopWindowTracker()),l=new Fa(a).create(s.getMetricsUri(),!0),d=new di,g=new qE(l,d,s.projectId);rt.setService(g)}catch(a){j.warn(`Error initializing metrics: ${a.message}`)}}function WE(){var s,r;let t=new fu(window.CS_CONF);window._uxa=window._uxa||[],t.processOptionOverrides(window._uxa);let e=new gu(window,t);e.init();let i=new Hu;if(Xh(j),j.computeIsActive(t.validationRate),e.isTopWindowTracker()){let c=new Du(t,i);j.setStrategy(c)}else if(e.isInIframeContext()){let a=new ju(t);j.setStrategy(a)}else if(e.isInWebViewContext()){let a=new zE;j.setStrategy(a)}!((r=t==null?void 0:t.experimental)===null||r===void 0)&&r.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ge(window,"MutationObserver")),Jh(),GE(t,e),new $E(t,e,i).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Bu(WE)}catch{}});})();

